(()=>{"use strict";var e={426:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(81),s=n.n(i),o=n(645),a=n.n(o)()(s());a.push([e.id,"body {\n  background-color: #222;\n  background-color: #1a1a1a;\n  color: #ccc; /* dbdbdb; */\n  margin: 0;\n  padding: 0;\n  font-family: Arial, Helvetica, sans-serif;  \n}\n\n.content {\n  display: none;\n  padding: 40px 40px;\n  max-width: 1440px;\n  margin: 50px auto 0 auto;\n}\n\na {\n  text-decoration: underline;\n  color: #fff;\n}\n\na:hover {\n  text-decoration: underline;\n  color: #ddd !important;\n}\n\na:visited {\n  color: #fff;\n}\n\nh2 {\n  font-size: 20px;\n  font-weight: 400;\n}\n\n.noselect {\n  -webkit-touch-callout: none;\n    -webkit-user-select: none;\n     -khtml-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n  -webkit-user-drag: none;\n  -khtml-user-drag: none;\n  -moz-user-drag: none;\n  -o-user-drag: none;\n  user-drag: none;            \n          \n}\n\n\n.text-highlight {\n  color: #ffffff;\n  font-weight: 500;\n}\n\n.button, button {\n  margin: 0;\n  background-color: transparent;\n  border: 1px solid #fff;\n  border-radius: 0;\n  color: #fff;\n  padding: 14px 10px;\n  cursor: pointer;\n  text-transform: uppercase;\n  font-size: 12px;\n  line-height: 12px;\n  transition: all 0.2s;\n  white-space: nowrap;\n  text-decoration: none;\n  display: flex;\n  height: 44px;\n  align-items: center;\n}\n\n.button:hover, button:hover {\n  text-decoration: none;\n  background-color: #fff;\n  color: #000 !important;\n}\n\n.button:disabled, button:disabled {\n  /* background-color: #555; */\n  color: #ddd;\n  border: 1px solid #555;\n  cursor: not-allowed;\n}\n\n.button:hover:disabled, button:hover:disabled {\n  color: #ddd !important;\n  border: 1px solid #555;\n  background-color: transparent !important;\n}\n\n\n#header {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 100px;\n  padding-top: 6px;\n  background-color: #1a1a1a;\n  z-index: 100;\n}\n\n#header h1 {\n  margin: 16px 0 4px 0;\n  font-weight: 400;\n  font-size: 46px;\n  letter-spacing: 1px;\n  line-height: 50px;\n  height: 50px;\n  text-transform: uppercase;\n  white-space: nowrap;\n}\n\n.connect-holder {\n  display: flex;\n}\n\n/************* TOKEN NAV *************/\n#token-nav-holder {\n  display: flex;\n  align-items: center;\n  margin: 18px 0 4px 0;\n}\n\n.token-nav img {\n  width: 38px;\n  height: 38px;\n}\n\n.token-nav:hover {\n  opacity: 0.8;\n}\n/************ END TOKEN NAV ***********/\n\n.home-heading {\n  font-size: 28px;\n  font-weight: 400;\n  margin-bottom: 20px;\n  line-height: 1.4;\n}\n\n.home-content {\n  text-align: center;\n  margin-bottom: 20px;\n  line-height: 1.7;\n  max-width: 800px;\n  width: 100%;\n  margin: 0 auto;\n  margin-bottom: 30px;\n}\n\n.home-content p {\n  margin-left: auto;\n  margin-right: auto;\n  max-width: 740px;\n  letter-spacing: 0.8px;\n  margin-bottom: 40px;\n  margin-top: 10px;\n  font-size: 16px;\n}\n\n.home-about-buttons {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  margin: 30px 0;\n  \n}\n\n.home-about-buttons .button {\n  display: flex;\n  margin: 0 10px 10px 0;\n  height: 40px;\n  padding: 0;\n  width: 130px;\n  justify-content: center;\n\n}\n\n.home-mint-button {\n  display: flex;\n  justify-content: center;\n}\n\n#home-mint-now-button {\n  width: 130px;\n  height: 40px;\n  padding: 0;\n  justify-content: center;\n  align-items: center;\n}\n\n.home-minted-info {\n/*\n  display: flex;\n  justify-content: center;\n*/  \n  font-size: 28px;\n  font-weight: 400;\n  margin-bottom: 0;\n}\n\n.home-minted-info div {\n  display: inline-block;\n}\n\n.home-mint-price {\n  margin-top: 20px;\n  text-align: center;\n}\n#page-title-holder {\n  display: flex;\n}\n\n#header-items {\n  display: flex;\n  flex-direction: column;\n}\n\n#header-content {\n  width: 100%;\n  max-width: 1440px;\n  margin: 0 auto;\n  padding: 8px 40px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n#menu-items {\n  font-size: 14px;\n  text-transform: uppercase;\n  letter-spacing: 0.3px;\n  display: flex;\n}\n\n.menu-link-separator {\n  margin: 0 8px;\n}\n\n\n#connect-status .collection-link {\n  text-decoration: underline;\n}\n\n\n@media only screen and (max-width: 600px) {\n  #header {\n    height: 90px;\n  }\n\n  #menu-items {\n    font-size: 12px;\n  }\n\n  .menu-link-separator {\n    margin: 0 6px;\n  }\n\n  #header h1 {\n    margin-top: 10px;\n    font-size: 40px;  \n  }\n\n  #header-content {\n    padding: 8px 20px;\n  }\n\n  .content {\n    padding: 20px 20px;\n    margin-top: 68px;\n    letter-spacing: 0.8px;\n  }\n\n  .home-heading {\n    margin-top: 26px;\n    font-size: 22px;\n    color: #f0f0f0;\n    margin-bottom: 18px;\n    letter-spacing: 1px;\n  }\n\n  .home-content {\n    font-size: 15px;\n  }\n\n  .home-content p {\n    letter-spacing: 0.8px;\n    margin-bottom: 40px;\n    margin-top: 10px;\n    font-size: 15px;\n  }  \n\n  .desktop-link {\n    display: none;\n  }\n}\n\n@media only screen and (max-width: 714px) {\n  #connect-status .collection-link {\n    font-size: 13px;\n    position: absolute;\n    right: 10px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    width: 180px;\n  }\n\n}\n\n@media only screen and (max-width: 600px) {\n  #connect-status .collection-link {\n    display: none;\n    font-size: 13px;\n    width: 80px;\n  }\n\n}\n\n@media only screen and (max-width: 435px) {\n  #header h1 {\n    font-size: 36px;\n  }\n\n  #header-content {\n    padding-left: 10px;\n    padding-right: 10px;\n  }\n\n  .connect-holder {\n    display: none;\n  }\n\n}\n\n\n\n.token-title {\n  margin: 10px 0 0 0;\n  font-size: 16px;\n  text-align: left;\n  color: #bbbbbb !important;\n  transition: 0.4s;\n  letter-spacing: 0.6px;\n  transition: all 0.4s;\n}\n\n#token-params {\n  margin: 0 0 0 0;\n  display: flex;\n  height: 16px;\n\n}\n\n#token-params .token-param {\n  margin-right: 10px;\n}\n\n#token-description {\n  margin-bottom: 20px;\n  font-size: 14px;\n  line-height: 26px;\n}\n\n#token-controls-text {\n  margin-top: 20px;\n  font-size: 14px;\n  line-height: 26px;\n}\n\n.catalog {\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  margin: 0 -10px;\n}\n\n.catalog .catalog-item {\n  margin: 10px;\n  display: flex;\n  flex-direction: column;\n  background-color: #181818;\n  padding: 8px;\n  transition: all 0.5s;\n  opacity: 1;\n  text-decoration: none;\n  border: 1px solid #111;\n }\n\n .catalog .catalog-item:hover {\n  border: 1px solid #666;\n }\n\n.catalog-item .title {\n  margin-top: 6px;\n  color: #aaa;\n  transition: all 0.4s;\n}\n.catalog-item:hover .title {\n  color: #ffffff !important;\n}\n\n.image-holder {\n  position: relative;\n  width: 216px;\n  height: 216px;\n  pointer-events: none;\n}\n\n.catalog-item img {\n  width: 216px;\n  height: 216px;\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  transition: opacity 0.4s;\n}\n\n\n#token-view-holder {\n  display: flex;\n  margin-top: 16px;\n}\n\n#sid-holder,\n#sid-holder-2 {\n  background-color: #000;\n  position: relative;\n  display: flex;\n  margin: auto;\n  margin-left: 10px;\n}\n\n/************ CPU MEMORY ************/\n\n.charset-cpu-memory {\n  margin-top: 10px;\n  display: flex;\n  justify-content: space-between;\n\n}\n\n.cpu-memory {\n  display: flex;\n}\n\n.cpu {\n  margin: 0 10px;\n  display: flex;\n  flex-direction: column;\n}\n\n.cpu-2 {\n  display: flex;\n  flex-direction: column;\n}\n\n.cpu-sid {\n  display: none;  \n}\n\n.disassembly-controls {\n  display: flex;\n  background-color: #141414;\n  padding: 4px 2px;\n}\n\n.disassembly-controls button {\n  border: 0;\n  height: 22px;\n  width: 22px;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 8px;\n}\n\n.disassembly-controls button:disabled img {\n  filter: invert(0.3);\n}\n\n\n.disassembly-controls button:hover {\n\n}\n\n.disassembly-controls button img {\n  filter: invert(0.8);\n  height: 20px;\n}\n\n.disassembly-controls button:hover img {\n  filter: invert(0.2);\n}\n\n@media only screen and (max-width: 1300px) {\n  .cpu-sid {\n    margin-top: 10px;\n    display: flex;\n    justify-content: space-between;\n  }\n\n  #token-view-holder {\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n\n  #sid-holder {\n    display: none;\n  }\n\n  /*\n  .charset-cpu-memory {\n    flex-direction: column;\n  }\n  */\n  .charset-cpu-memory {\n    margin-top: 19px;\n  }\n  .cpu {\n    display: none;\n  }\n\n}\n\n@media only screen and (max-width: 980px) {\n  .charset-cpu-memory {\n    flex-direction: column;\n    align-items: center\n  }\n  #charset-holder {\n    margin-bottom: 10px;\n  }\n}\n\n@media only screen and (max-width: 776px) {\n  .cpu-memory {\n    display: none;\n  }\n\n  .cpu-2 {\n    display: none;\n  }\n\n  #sid-holder-2 {\n    margin: 0;\n  }\n}\n\n#token-canvas-holder {\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  position: relative;\n  flex-direction: column;\n  background-color: #000;\n}\n\n#token-ownership-status {\n  margin-bottom: 16px;\n}\n\n@media only screen and (max-width: 776px) {\n  #token-ownership-status {\n    font-size: 12px;\n  }\n\n  #token-ownership-status span {\n    margin-top: 10px;\n    margin-bottom: 20px;\n    display: block;\n  }\n}\n\n.token-holder {\n  position: relative;\n  display: flex;\n  background-color: #000;\n}\n\n#token-mode {\n}\n\n#token-mode-heading {\n  display: flex;\n  align-items: center;\n}\n\n#tokenMode {\n  font-size: 24px;\n  line-height: 24px;\n  display: flex;\n  align-items: center;\n  color: #fff;\n  opacity: 0.8;\n  cursor: pointer;\n}\n\n#tokenMode:hover {\n  opacity: 1;\n}\n\n#tokenMode img {\n  margin-left: 4px;\n}\n\n\n#unlockModes {\n  margin-right: 20px;\n}\n\n.progress-button {\n  display: flex;\n  align-items: center;\n}\n\n.progress-button img {\n  width: 20px;\n  height: 20px;\n  margin-right: 6px;\n}\n\n#mode-controls-holder {\n  display: flex;\n  flex-direction: column;\n  margin: 0 0 20px 0 ;\n}\n\n#unlock-buttons {\n  margin-top: 16px;\n  display: flex;\n}\n\n#token-unlock-text {\n  margin-top: 16px;\n  font-size: 14px;\n  line-height: 26px;\n}\n\n#unlock-buttons {\n  display: flex;\n}\n\n#token-patch-text {\n  margin: 10px 0 20px 0;\n}\n\n.version-separator {\n  margin: 0 10px;\n}\n\n#nextModeButton {\n  cursor: pointer;\n  margin: 0 4px;\n  display: flex;\n  align-items: center;\n}\n\n#nextModeButton:hover {\n  color: #ddd;\n}\n\n\n.version-active {\n  color: #eee;\n}\n\n.version-link {\n  color: #bbb !important;\n}\n\n.version-link:hover {\n  color: #eee !important;\n}\n\n/************ TOKEN OVERLAY ***********/\n\n#start-overlay, #loading-overlay {\n  background-color: rgba(0,0,0,0.4);\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n#loading-message {\n  display: flex;\n  align-items: center;\n  height: 20px;\n}\n\n#loading-message img {\n  margin-right: 4px;\n}\n\n/************ TOKEN CONTROLS **********/\n\n#token-controls {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 50px;\n  background: rgb(0,0,0);\n  background: linear-gradient(0deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 65%, rgba(0,0,0,0) 100%);\n  opacity: 0;\n  transition: opacity 0.4s;\n}\n\n#token-fullscreen-icon {\n  position: absolute;\n  right: 10px;\n  bottom: 10px;\n  cursor: pointer;\n  opacity: 0.7;\n}\n\n#token-fullscreen-icon:hover {\n  opacity: 1;\n}\n\n#token-fullscreen-exit-icon {\n  position: absolute;\n  right: 10px;\n  bottom: 10px;\n  cursor: pointer;\n  display: none;\n  opacity: 0.7;\n}\n\n#token-fullscreen-exit-icon:hover {\n  opacity: 1;\n}\n\n#token-download-image {\n  display: flex;\n  text-decoration: none;\n  position: absolute;\n  bottom: 11px;\n  right: 60px;\n  font-size: 14px;\n  align-items: center;\n  opacity: 0.8;\n}\n\n#token-download-image img {\n  filter: invert(1);\n  width: 22px;\n  height: 22px;\n  margin-right: 4px;\n}\n\n#token-download-image:hover {\n  text-decoration: none;\n}\n\n.volume-icon {\n  position: absolute;\n  left: 10px;\n  bottom: 10px;\n  cursor: pointer;\n  opacity: 0.7;\n}\n\n.volume-icon:hover {\n  opacity: 1;\n}\n\n#volume-bar-holder {\n  position: absolute;\n  left: 46px;\n  width: 100px;\n  bottom: 10px;\n  height: 20px;\n  cursor: pointer;\n}\n\n#volume-bar {\n  position: absolute;\n  left: 0px;\n  bottom: 10px;\n  width: 100%;\n  height: 3px;\n  cursor: pointer;\n  opacity: 0.5;\n  background-color: #aaa;\n  transition: opacity 0.4s;\n}\n\n#volume-bar-value {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 30%;\n  background-color: #fff;\n}\n\n#volume-value {\n  position: absolute;\n  left: calc(30% - 5px);\n  bottom: -4px;\n  width: 10px;\n  height: 10px;\n  background-color: #fff;\n  border-radius: 50%;\n}\n\n#volume-bar-holder:hover #volume-bar {\n  opacity: 1;\n}\n\n/************ END TOKEN CONTROLS **********/\n\n/*********** MANUAL ***********/\n\n#sid-filter-value,\n#sid-filter-value-2 {\n  width: 100%;\n}\n\n#sid-filter-control-selector {\n  margin: 6px;\n}\n\n#sid-manual-controls {\n  margin: 4px;\n}\n\n.sid-manual-control {\n  display: flex;\n  margin-bottom: 10px;\n}\n\n.sid-manual-control-label {\n  width: 100px;\n}\n\n.sid-manual-control-control {\n  flex: 1;\n}\n\n/************ DOWNLOAD *****************/\n\n.download-row {\n  display: flex;\n  align-items: center;\n  height: 40px;\n}\n\n.download-label {\n  width: 100px;\n}\n\n#download-not-connected, #download-connected {\n  font-size: 14px;\n  line-height: 26px;  \n}\n\n#video_download_message {\n  margin-bottom: 10px;\n}\n\n#download-modes label {\n  margin-right: 10px;\n}\n/**************************************/\n\n/********** SETTINGS ***********/\n\n.token-settings-mode-default {\n  display: flex;\n  align-items: center;\n}\n\n.token-settings-mode-default input {\n  height: 38px;\n  margin-right: 10px;\n}\n/************ MINT *****************/\n\n.token-mint-number-minted, \n.mint-price,\n.token-mint-total,\n.contract-link {\n  display: inline;\n}\n\n.token-mint-price,\n.token-mint-number-minted,\n.token-mint-total {\n  color: #fff;\n  font-weight: 600;\n}\n\n.mint-minted {\n  margin: 20px 0;\n}\n\n#mint-account {\n  display: inline;\n}\n\n.mint-section {\n  margin-bottom: 20px;\n  font-size: 16px;\n  line-height: 26px;\n  \n}\n\n.mint-section .mint-price {\n  font-weight: 600;\n}\n\n.mint-status-row {\n  display: flex;\n  margin-bottom: 10px;\n}\n\n.mint-status-heading {\n  width: 180px;\n}\n\n#mint-status {\n  margin: 20px 0;\n}\n\n#token-mint-information {\n  margin-bottom: 20px;\n}\n\n#mint-button {\n  font-size: 14px;\n}\n\n.token-minted-heading {\n  font-size: 24px;\n  margin-bottom: 20px;\n  color: #5f5;\n}\n\n#token-unlock-complete-text {\n  font-size: 18px;\n  margin: 10px 0;\n  color: #5f5;\n\n}\n\n.token-error-label {\n  color: #f22;\n  margin-right: 6px;\n}\n/************ END MINT ************/\n\n\n/************ CHARSET ********************/\n\n#charset-holder {\n  margin-top: 2px;\n}\n\n/************ SID CONTROLS ****************/\n\n\n#sid-controls, \n#sid-controls-2 {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 50px;\n  background: rgb(0,0,0);\n  background: linear-gradient(0deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 65%, rgba(0,0,0,0) 100%);\n  opacity: 0;\n  transition: opacity 0.4s;\n}\n\n#sid-fullscreen-icon,\n#sid-fullscreen-icon-2 {\n  position: absolute;\n  right: 10px;\n  bottom: 10px;\n  cursor: pointer;\n  opacity: 0.7;\n}\n\n#sid-fullscreen-icon:hover,\n#sid-fullscreen-icon-2:hover {\n  opacity: 1;\n}\n\n#sid-fullscreen-exit-icon,\n#sid-fullscreen-exit-icon-2 {\n  position: absolute;\n  right: 10px;\n  bottom: 10px;\n  cursor: pointer;\n  display: none;\n  opacity: 0.7;\n}\n\n#sid-fullscreen-exit-icon:hover,\n#sid-fullscreen-exit-icon-2:hover {\n  opacity: 1;\n}\n\n\n\n/************ END SID CONTROLS ***********/\n\n#about {\n  font-size: 16px;\n  line-height: 30px;\n  letter-spacing: 0.3px;\n  color: #dddddd;\n}\n\n#about h2 {\n  font-size: 28px;\n  margin: 60px 0 10px 0;\n  color: #f1f1f1;\n}\n\n#about h3 {\n  font-size: 20px;\n  margin: 30px 0 6px 0;\n  color: #f1f1f1;\n  font-weight: 200;\n}\n\n#about h2:first-child {\n  margin-top: 20px;\n}\n\n#about pre {\n  margin: 30px 0 30px 20px;\n}\n\n.about-image {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  margin: 20px 0;\n}\n\n.about-image-caption {\n  margin-top: 10px;\n  font-size: 14px;\n  line-height: 1.6;\n  color: #999;\n  text-align: center;\n}\n\n.about-image-attribution {\n  font-size: 12px;\n  line-height: 1.3;\n  text-align: center;\n}\n\n\n@media only screen and (max-width: 600px) {\n  .about-image-caption {\n    font-size: 12px;\n    line-height: 1.6;\n  }\n  \n  .about-image-attribution {\n    font-size: 10px;\n  }\n  \n}\n\n.contract-function-parameters {\n  border-collapse: collapse;\n  font-size: 12px;\n  margin: 20px auto 20px auto;\n}\n\n.contract-function-parameters tr {\n  vertical-align: top;\n}\n\n.contract-function-parameters th,\n.contract-function-parameters td {\n  text-align: left;\n  padding: 8px;\n  \n}\n\n.contract-function-parameters td {\n  border: 1px solid #444;\n}\n\n\n.c64-specifications {\n  border-collapse: collapse;\n  border: 1px solid #444;\n  font-size: 12px;\n  margin: 0 auto 20px auto;\n}\n\n.c64-specifications th,\n.c64-specifications td {\n  text-align: left;\n  border: 1px solid #444;  \n  padding: 8px;\n}\n\n\n@media only screen and (max-width: 803px) {\n\n  /*\n  #header h1 {\n    font-size: 40px;  \n  }\n  */\n\n  .about-image img {\n    width: 100%;  \n  }\n}\n",""]);const d=a},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,s,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(i)for(var d=0;d<this.length;d++){var l=this[d][0];null!=l&&(a[l]=!0)}for(var r=0;r<e.length;r++){var c=[].concat(e[r]);i&&a[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),s&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=s):c[4]="".concat(s)),t.push(c))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var o={},a=[],d=0;d<e.length;d++){var l=e[d],r=i.base?l[0]+i.base:l[0],c=o[r]||0,h="".concat(r," ").concat(c);o[r]=c+1;var m=n(h),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==m)t[m].references++,t[m].updater(u);else{var p=s(u,i);i.byIndex=d,t.splice(d,0,{identifier:h,updater:p,references:1})}a.push(h)}return a}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var o=i(e=e||[],s=s||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var d=n(o[a]);t[d].references--}for(var l=i(e,s),r=0;r<o.length;r++){var c=n(o[r]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=l}}},569:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},749:(e,t,n)=>{var i;n.d(t,{L:()=>s}),e=n.hmd(e),i=function(){return function(e,t,n){var i=window,s="application/octet-stream",o=n||s,a=e,d=document,l=d.createElement("a"),r=function(e){return String(e)},c=i.Blob||i.MozBlob||i.WebKitBlob||r;c=c.call?c.bind(i):Blob;var h,m,u=t||"download";if("true"===String(this)&&(o=(a=[a,o])[0],a=a[1]),String(a).match(/^data\:[\w+\-]+\/[\w+\-]+[,;]/))return navigator.msSaveBlob?navigator.msSaveBlob(function(e){for(var t=e.split(/[:;,]/),n=t[1],i=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),s=i.length,o=0,a=new Uint8Array(s);o<s;++o)a[o]=i.charCodeAt(o);return new c([a],{type:n})}(a),u):p(a);function p(e,t){if("download"in l)return l.href=e,l.setAttribute("download",u),l.innerHTML="downloading...",d.body.appendChild(l),setTimeout((function(){l.click(),d.body.removeChild(l),!0===t&&setTimeout((function(){i.URL.revokeObjectURL(l.href)}),250)}),66),!0;if("undefined"!=typeof safari)return e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=d.createElement("iframe");d.body.appendChild(n),t||(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),n.src=e,setTimeout((function(){d.body.removeChild(n)}),333)}if(h=a instanceof c?a:new c([a],{type:o}),navigator.msSaveBlob)return navigator.msSaveBlob(h,u);if(i.URL)p(i.URL.createObjectURL(h),!0);else{if("string"==typeof h||h.constructor===r)try{return p("data:"+o+";base64,"+i.btoa(h))}catch(e){return p("data:"+o+","+encodeURIComponent(h))}(m=new FileReader).onload=function(e){p(this.result)},m.readAsDataURL(h)}return!0}},"function"==typeof define&&n.amdO?define([],i):"object"==typeof exports?e.exports=i():window.dnload=i();let s=window.dnload}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i](o,o.exports,n),o.loaded=!0,o.exports}n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(379),t=n.n(e),i=n(795),s=n.n(i),o=n(569),a=n.n(o),d=n(565),l=n.n(d),r=n(216),c=n.n(r),h=n(589),m=n.n(h),u=n(426),p={};p.styleTagTransform=m(),p.setAttributes=l(),p.insert=a().bind(null,"head"),p.domAPI=s(),p.insertStyleElement=c(),t()(u.Z,p),u.Z&&u.Z.locals&&u.Z.locals;var g=n(749);let y=M64({});y.ready=!1,y.codeMemory=null,y.init=y.cwrap("m64_init",null,["number","number"]),y.reset=y.cwrap("m64_reset",null,["number"]),y.injectAndRunPrg=y.cwrap("m64_injectAndRunPrg",null,["array","number","number"]),y.keyPush=y.cwrap("m64_keyPush",null,["number"]),y.keyRelease=y.cwrap("m64_keyRelease",null,["number"]),y.joystickPush=y.cwrap("m64_joystickPush",null,["number","number"]),y.joystickRelease=y.cwrap("m64_joystickRelease",null,["number","number"]),y.getPixelBuffer=y.cwrap("m64_getPixelBuffer","number"),y.getPixelBufferWidth=y.cwrap("m64_getPixelBufferWidth","number"),y.getPixelBufferHeight=y.cwrap("m64_getPixelBufferHeight","number"),y.update=y.cwrap("m64_update","number",["number"]),y.step=y.cwrap("m64_step"),y.audioInit=y.cwrap("m64_audioInit",null,["number","number"]),y.getAudioBuffer=y.cwrap("m64_getAudioBuffer","number"),y.getAudioBufferLength=y.cwrap("m64_getAudioBufferLength","number"),y.setChannelBuffersEnabled=y.cwrap("m64_setChannelBuffersEnabled",null,["number"]),y.getAudioBufferCh=y.cwrap("m64_getAudioBufferCh","number"),y.cpuRead=y.cwrap("m64_cpuRead","number"),y.cpuWrite=y.cwrap("m64_cpuWrite",null,["number","number"]),y.getPC=y.cwrap("m64_getPC"),y.getSP=y.cwrap("m64_getSP"),y.getRegX=y.cwrap("m64_getRegX"),y.getRegY=y.cwrap("m64_getRegY"),y.getRegA=y.cwrap("m64_getRegA"),y.getFlagN=y.cwrap("m64_getFlagN"),y.getFlagC=y.cwrap("m64_getFlagC"),y.getFlagD=y.cwrap("m64_getFlagD"),y.getFlagZ=y.cwrap("m64_getFlagZ"),y.getFlagV=y.cwrap("m64_getFlagV"),y.getFlagI=y.cwrap("m64_getFlagI"),y.getFlagU=y.cwrap("m64_getFlagU"),y.getFlagB=y.cwrap("m64_getFlagB");var f=null,v=null,b=null,k=null,w=!1,x=!1,C=0,I=[],E=!0;y.onRuntimeInitialized=function(){y.start_audio(),y.setChannelBuffersEnabled(1),y.init(1,2),y.ready=!0},y.setRunning=function(e){E=e,y.audioInit(T,M.sampleRate)},y.isReady=function(){return y.ready},y.get_audio_playing=function(){return w};var A=0,B=0;y.setup=function(){if(f||(f=document.createElement("canvas")),A=y.getPixelBufferWidth(),B=272,f.width=A,f.height=B,v=f.getContext("2d"),b=v.getImageData(0,0,f.width,f.height),0==I.length)for(var e=0;e<22;e++){let e=document.createElement("canvas");e.width=A,e.height=B;let t=e.getContext("2d").getImageData(0,0,e.width,e.height);I.push(t)}},y.downloadImage=function(e){null==k&&((k=document.createElement("canvas")).width=2160,k.height=2160);let t=k.getContext("2d");t.imageSmoothingEnabled=!1,t.drawImage(f,88,28,216,216,0,0,2160,2160);let n=k.toDataURL("image/png");(0,g.L)(n,e,"image/png")},y.set_prg=function(e,t){y.stop_audio(),y.init(1,1),y.reset(1),setTimeout((function(){y.injectAndRunPrg(e,e.length,1),t()}),1500),y.start_audio(),y.audioInit(T,M.sampleRate)},y.setScreenDelay=function(e){},y.draw=function(e,t,n){var i=y.getPixelBuffer(),s=A*B*4,o=new Uint8Array(y.HEAPU8.subarray(i,i+s));b.data.set(o),v.putImageData(b,0,0),e.drawImage(f,0,0,f.width,f.height,0,0,t,n),C=(C+1)%22};var T=4096,M=!1;let L=!1,R=.9,D=0,P=0,S=0,F=0;var N=0,H=0;function O(){if(M.currentTime-N>2*T/F)return N=M.currentTime,void(H=10);if(N=M.currentTime,H>0)H--;else if(H=0,!(M.currentTime+2*S<P||(P+=S,x))){var e=M.createBufferSource();e.addEventListener("ended",(e=>{O()}));var t=M.createBuffer(1,T,F);e.connect(L);var n=t.getChannelData(0);if(E){var i=y.getAudioBuffer(),s=new Float32Array(y.HEAPF32.subarray(i>>2,(i>>2)+T));n.set(s)}else{s=new Float32Array(T);for(let e=0;e<T;e++)s[e]=0;n.set(s)}e.buffer=t,e.start(P)}}function W(){O();var e=M.createBufferSource();e.addEventListener("ended",(e=>{W()}));var t=M.createBuffer(1,T/4,F);e.connect(M.destination),e.buffer=t,e.start(M.currentTime)}function _(){"running"==M.state&&(L||(L=M.createGain(),L.gain.value=R,L.connect(M.destination),P=M.currentTime+3*S,W(),setInterval(O,4)),"running"==M.state&&(y.audioInit(T,M.sampleRate),y.setVolume(R),w=!0))}y.stop_audio=function(){x=!0},y.start_audio=function(){var e=window.AudioContext||window.webkitAudioContext||!1;if(e){M&&"running"!=M.state&&M.resume(),x&&(x=!1,P=M.currentTime+3*S);try{if(M||(M=new e,F=M.sampleRate,S=T/F,M.onstatechange=()=>{_()}),"running"!=M.state&&M.resume(),"running"!=M.state)return V.style.display="block",z.style.display="none",void(U.style.display="none")}catch(e){console.log("ERRR"),console.log(e)}}};let V=document.getElementById("volume-off-icon"),z=document.getElementById("volume-up-icon"),U=document.getElementById("volume-down-icon"),q=document.getElementById("volume-bar-value"),Q=document.getElementById("volume-value");y.setVolume=function(e){0==e?(V.style.display="block",z.style.display="none",U.style.display="none"):e<.5?(V.style.display="none",z.style.display="none",U.style.display="block"):(V.style.display="none",z.style.display="block",U.style.display="none");let t=100*e;q.style.width=t+"px",t-=5,Q.style.left=t+"px",R=e,L&&(L.gain.value=e)},y.volumeToggle=function(){0!=R?(D=R,m64_setVolume(0)):m64_setVolume(D)};let Y={address:"0xf21ab54111eb5049e42f4794d2724658baa42fc1",abi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint8",name:"modes",type:"uint8"}],name:"checkCanUnlockModes",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkCanUnlockPatch",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"timeRequirement",type:"uint256"}],name:"checkHoldTime",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkIsTokenOwner",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkTokenId",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getTokenAttributes",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getTokenModes",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bool",name:"pal",type:"bool"},{internalType:"uint8",name:"filterResonanceRouting",type:"uint8"},{internalType:"uint8",name:"filterModeVolume",type:"uint8"}],name:"getTokenPRG",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bool",name:"patchedVersion",type:"bool"}],name:"getTokenPRGBase64",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bool",name:"pal",type:"bool"},{internalType:"uint8",name:"filterResonanceRouting",type:"uint8"},{internalType:"uint8",name:"filterModeVolume",type:"uint8"}],name:"getTokenPRGBase64",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getTokenParams",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getTokenPatchUnlocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bool",name:"pal",type:"bool"},{internalType:"uint8",name:"filterResonanceRouting",type:"uint8"},{internalType:"uint8",name:"filterModeVolume",type:"uint8"}],name:"getTokenPatchedPRG",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bool",name:"pal",type:"bool"},{internalType:"uint8",name:"filterResonanceRouting",type:"uint8"},{internalType:"uint8",name:"filterModeVolume",type:"uint8"}],name:"getTokenPatchedPRGBase64",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getTokenSecondsSinceLastTransfer",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"mintPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"mintToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"baseURI",type:"string"}],name:"setAnimationBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint8",name:"defaultMode",type:"uint8"}],name:"setDefaultMode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"desc",type:"string"}],name:"setDescription",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"baseURI",type:"string"}],name:"setExternalBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"baseURI",type:"string"}],name:"setImageBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"price",type:"uint256"}],name:"setMintPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IOraandURI",name:"uriContract",type:"address"}],name:"setTokenURIContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"tokenURIContract",outputs:[{internalType:"contract IOraandURI",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint8",name:"modes",type:"uint8"}],name:"unlockModes",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"unlockPatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}]};class j{index=null;token=null;accounts=[];mintPriceWei=256e14;web3=null;server="https://nopsta.com/a/oraand/";networkId=!1;cachedTokenData=!1;debug=!0;init(e){this.index=e.index,console.log(window.ethereum),void 0!==window.ethereum?(window.ethereum.on("connect",(e=>{console.log("connect event!")})),window.ethereum.on("disconnect",(e=>{console.log("disconnect.."),this.index.setConnectedStatus("disconnected"),this.accounts=[],this.token=null,this.networkId=!1})),window.ethereum.on("accountsChanged",(e=>{console.log("accounts changed: "),console.log(e),0==e.length?(this.index.setConnectedStatus("disconnected"),this.accounts=[],this.token=null,this.networkId=!1):(this.tryConnect(),this.index.setConnectedStatus("connected")),this.accounts=e})),window.ethereum.on("chainChanged",(e=>{console.log("chain CHANGED! newtowk id = "+e),"0x1"!=e?this.networkId=!1:this.connect(),this.checkNetwork()})),window.ethereum.on("networkChanged",(e=>{console.log("NETWORK CHANGED! newtowk id = "+e),this.networkId=e,!1!==e&&(this.networkId=parseInt(e,10),isNaN(this.networkId)&&(this.networkId=!1)),this.checkNetwork()}))):document.getElementById("connect").style.display="none"}getCurrentAccount(){return 0!=this.accounts.length&&this.accounts[0]}checkNetwork(){if(console.log("check network!!"),!1===this.networkId&&(this.token=null,this.index.setConnectedStatus("disconnected")),1===this.networkId){if(void 0!==Y){let e=Y.address;this.token=new this.web3.eth.Contract(Y.abi,e)}else{let e=ORAAND.networks[this.networkId].address;this.token=new this.web3.eth.Contract(ORAAND.abi,e)}this.index.setConnectedStatus("connected")}else console.log("connection status switch"),this.index.setConnectedStatus("switch")}getNetworkId(){return this.networkId}async tryConnect(){console.log("TRY CONNECT");try{if(void 0===window.ethereum)return;let e=window.ethereum;this.web3=new Web3(e),this.networkId=await this.web3.eth.net.getId(),this.networkId=parseInt(this.networkId,10),isNaN(this.networkId)&&(this.networkId=!1);let t=await this.web3.eth.net.getNetworkType();if(this.debug||"private"!=t||(this.networkId=!1),this.accounts=await this.web3.eth.getAccounts(),!this.debug&&1!=this.networkId)return await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x1"}]}),void(this.token=null);if(void 0!==Y){let e=Y.address;this.token=new this.web3.eth.Contract(Y.abi,e)}else{let e=ORAAND.networks[this.networkId].address;this.token=new this.web3.eth.Contract(ORAAND.abi,e)}this.index.setConnectedStatus("connected"),this.checkNetwork()}catch(e){console.log("try connect exception!!"),console.error(e),this.index.setConnectedStatus("disconnected"),console.log(e.message)}}async connect(){try{if(this.index.setConnectedStatus("connecting"),void 0===window.ethereum)return;let e=window.ethereum;this.web3=new Web3(e),this.networkId=await this.web3.eth.net.getId(),this.networkId=parseInt(this.networkId,10),isNaN(this.networkId)&&(this.networkId=!1);let t=await this.web3.eth.net.getNetworkType();if(this.debug||"private"!=t||(this.networkId=!1),await window.ethereum.request({method:"eth_requestAccounts"}),this.accounts=await this.web3.eth.getAccounts(),!this.debug&&1!=this.networkId)return await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x1"}]}),void(this.token=null);if(void 0!==Y){let e=Y.address;this.token=new this.web3.eth.Contract(Y.abi,e)}else{let e=ORAAND.networks[this.networkId].address;this.token=new this.web3.eth.Contract(ORAAND.abi,e)}this.index.setConnectedStatus("connected")}catch(e){console.error(e),this.index.setConnectedStatus("disconnected"),console.log(e.message)}}async switchToMainnet(){await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x1"}]})}async checkAccounts(){await window.ethereum.request({method:"eth_requestAccounts"}),this.accounts=await this.web3.eth.getAccounts(),this.index.setConnectedStatus("connected")}isConnected(){return null!==this.token&&1==this.networkId&&"connected"==this.index.getConnectedStatus()}getAccount(){return 0!=this.accounts.length&&this.accounts[0]}async getTokenOwner(e){if(!1===e||void 0===e)return!1;if(null==this.token||1!==this.networkId)return!(e!=this.cachedTokenId||!this.cachedTokenData)&&this.cachedTokenData.owner;let t=await this.token.methods.ownerOf(e).call();return 0!==t.indexOf("0x")&&(t="0x"+t),t}async isOwner(e){return null!=this.token&&1===this.networkId&&(0!==this.accounts.length?await this.getTokenOwner(e)===this.accounts[0]:void 0)}async getTimeSinceLastTransfer(e){return!1===e?0:null==this.token||1!==this.networkId?(e==this.cachedTokenId&&this.cachedTokenData,!1):await this.token.methods.getTokenSecondsSinceLastTransfer(e).call()}async setTokenId(e){if(this.cachedTokenId=!1,null==this.token||1!=this.networkId){let t=await fetch(this.server+e),n=await t.json();this.cachedTokenId=e,this.cachedTokenData=n.value}else this.cachedTokenId=!1}mint(){if(null!=this.token)return this.token.methods.mintToken().send({from:this.accounts[0],value:this.mintPriceWei})}async getMintPrice(){if(null==this.token||1!==this.networkId){let e=await fetch(this.server+"mint-price");return(await e.json()).value}if(!this.token)return 0;let e=await this.token.methods.mintPrice().call();return this.mintPriceWei=e,this.mintPrice=this.web3.utils.fromWei(e),this.mintPrice}async getTokenCount(){if(null==this.token||1!==this.networkId){let e=await fetch(this.server+"token-count");return(await e.json()).value}return this.token?await this.token.methods.totalSupply().call():0}async getTokenSeed(e){return 0}hexToBytes(e){let t=[];for(let n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t}async getModes(e){if(e=parseInt(e,10),null==this.token||1!==this.networkId){if(e==this.cachedTokenId&&this.cachedTokenData){var t=parseInt(this.cachedTokenData.modes,10);return isNaN(t)?0:t}return!1}try{let t=await this.token.methods.getTokenModes(e).call();return t=parseInt(t,10),isNaN(t)?0:t}catch(e){console.error(e),console.log(e.message)}return!1}async checkBalance(){if(null==this.token||1!==this.networkId)return 0;try{return await this.token.methods.balanceOf(this.accounts[0]).call()}catch(e){return 0}}async balanceOf(e){return null==this.token||1!==this.networkId?0:await this.token.methods.balanceOf(e).call()}async tokenOfOwnerByIndex(e,t){return null==this.token||1!==this.networkId?"":await this.token.methods.tokenOfOwnerByIndex(e,t).call()}async checkCanUnlockPatch(e){if(null==this.token||1!==this.networkId)return!1;try{await this.token.methods.checkCanUnlockPatch(this.accounts[0],e).call()}catch(e){let t=!1,n=e.message,i=n.indexOf('"reason":');if(-1!==i){i+=10;let e=n.indexOf('"',i+4);-1!==e&&(t=n.substr(i,e-i).trim().replace(/\"/g,""),console.log("reason = "+t))}return!1}return!0}unlockPatch(e){return null==this.token||this.networkId,this.token.methods.unlockPatch(e).send({from:this.accounts[0],value:0})}async checkCanUnlockModes(e,t){if(null==this.token||1!==this.networkId)return!1;try{await this.token.methods.checkCanUnlockModes(this.accounts[0],e,t).call()}catch(e){let t=!1,n=e.message,i=n.indexOf('"reason":');if(-1!==i){i+=10;let e=n.indexOf('"',i+4);-1!==e&&(t=n.substr(i,e-i).trim().replace(/\"/g,""),console.log("reason = "+t))}return!1}return!0}setDefaultVersion(e,t){return this.token.methods.setDefaultVersion(e,1==t).send({from:this.accounts[0],value:0})}setDefaultMode(e,t){if(null==this.token||this.networkId,!(t<0||t>3))return this.token.methods.setDefaultMode(e,t).send({from:this.accounts[0],value:0})}unlockModes(e,t){if(null==this.token||this.networkId,!(t<0||t>3))return this.token.methods.unlockModes(e,t).send({from:this.accounts[0],value:0});console.log("wrong mode max: "+t)}async getPatchUnlocked(e){return e=parseInt(e,10),null==this.token||1!==this.networkId?!(e!=this.cachedTokenId||!this.cachedTokenData)&&1==this.cachedTokenData.patchUnlocked:await this.token.methods.getTokenPatchUnlocked(e).call()}async getPatchedPRG(e,t,n,i){if(e=parseInt(e,10),null==this.token||1!==this.networkId){let e=this.hexToBytes(this.cachedTokenData.prgPatched);return new Uint8Array(e)}if(!(e>=await this.getTokenCount())){try{let s=await this.token.methods.getTokenPatchedPRG(e,t,n,i).call(),o=this.web3.utils.hexToBytes(s);return o=new Uint8Array(o),o}catch(e){console.error(e),console.log(e.message)}return!1}}async getData(e,t,n,i){if(e=parseInt(e,10),null==this.token||1!==this.networkId){if(e==this.cachedTokenId&&this.cachedTokenData){let e=this.hexToBytes(this.cachedTokenData.prg);return new Uint8Array(e)}return!1}if(!(e>=await this.getTokenCount())){try{let s=await this.token.methods.getTokenPRG(e,t,n,i).call(),o=this.web3.utils.hexToBytes(s);return o=new Uint8Array(o),o}catch(e){console.error(e),console.log(e.message)}return!1}}async getTokenURI(e){return e=parseInt(e,10),null==this.token||1!==this.networkId?!(e!=this.cachedTokenId||!this.cachedTokenData)&&this.cachedTokenData.tokenURI:e>=await this.getTokenCount()?[]:await this.token.methods.tokenURI(e).call()}async getParams(e){return e=parseInt(e,10),await this.token.methods.getTokenParams(e).call()}async requestCheckChanges(e){let t=Date.now();await fetch(this.server+e+"/request-check?t="+t)}}class G{token=null;thumbnailBaseURI="https://nopsta.com/oraand/t/";init(e){this.index=e.index,this.token=e.token}async showCatalog(){const e=await this.token.getTokenCount();let t="";if(!1!==e)for(let n=0;n<e;n++)t+=this.getCatalogTokenHTML(n);let n=document.getElementById("catalog");n&&(n.innerHTML=t),this.index.updateLazyLoadList(),this.index.lazyLoad()}getCatalogTokenHTML(e){let t="",n=e;return t+='<a class="catalog-item token-link lazy-fade" id="token-link-'+e+'" href="/oraand/'+e+'">',t+='<div class="image-holder">',t+='<img class="image lazy-load" data-src="'+this.thumbnailBaseURI+e+'-square.png?v=0"/>',t+="</div>",t+='<div class="title">',t+="ORAAND "+n,t+="</div>",t+="</a>",t}}const X=["ANE","SHY","SHX","RRA","ISB","SHA","LXA","DCP","SAX","LAS","SRE","SHS","ADC","AND","ANC","ASL","ALR","BCC","BCS","BEQ","BIT","BMI","BNE","BPL","BRK","BVC","BVS","CLC","CLD","CLI","CLV","CMP","CPX","CPY","DEC","DEX","DEY","EOR","INC","INX","INY","JMP","JSR","LAX","LDA","LDX","LDY","LSR","NOP","ORA","PHA","PHP","PLA","PLP","RLA","ROL","ROR","RTI","RTS","SBC","SBX","SEC","SED","SEI","SLO","STA","STX","STY","TAX","TAY","TSX","TXA","TXS","TYA","???"];class K{constructor(e){this.fontFace=e.font,this.debuggerFont=null,this.fontCanvas=null,this.fontCanvasColors=[],this.fontSize=12,this.fontCharWidth=10,this.fontCharHeight=18,this.hexNumberCanvas=[],this.hexNumberPositions=[],this.cmdPositions={},this.retinaFont=!0,this.cmdCanvas=null,this.colorCmdCanvas=null,this.fontsCreated=!1,this.hex2Digit=[],this.fontColorList=["#57a259","#889aff","#ff4411"],this.numberColorList=["#ffffff","#aaaaaa","#57a259","#777777","#aaffaa"];for(var t=0;t<256;t++){var n=("00"+t.toString(16)).substr(-2),i=[];i.push(n.charCodeAt(0)),i.push(n.charCodeAt(1)),this.hex2Digit.push(i)}this.createFonts()}createFonts(){this.fontsCreated||(this.initDebuggerFont(),this.initHexNumberCanvas(),this.initCmdCanvas(),this.initColorCmdCanvas(),this.fontsCreated=!0)}setFontSize(e){this.fontSize=e,this.fontsCreated&&(this.fontsCreated=!1,this.initDebuggerFont(),this.createFonts())}getDevicePixelRatio(){let e=Math.floor(window.devicePixelRatio);return(isNaN(e)||e<1)&&(e=1),e}initDebuggerFont(){let e=this.getDevicePixelRatio();console.log("device pixel ratio = "+e),this.retinaFont?this.fontPx=this.fontSize*e:this.fontPx=this.fontSize,this.font=this.fontPx+'px "'+this.fontFace.family+'", Courier, monospace',null==this.fontCanvas&&(this.fontCanvas=document.createElement("canvas"),this.fontCanvas.style.position="absolute",this.fontCanvas.style.top="-100px",this.fontCanvas.style.left="0px",this.fontCanvas.style.display="none",document.body.appendChild(this.fontCanvas)),this.fontCanvas.width=3*this.fontPx,this.fontCanvas.height=3*this.fontPx;var t=this.fontCanvas.getContext("2d");t.font=this.font,t.clearRect(0,0,this.fontCanvas.width,this.fontCanvas.height);var n=0;t.fillStyle="#ffffff";for(var i=0;i<128;i++){var s=String.fromCharCode(i),o=t.measureText(s);o.width>n&&(n=o.width),t.fillText(s,0,2*this.fontPx)}for(var a=this.fontCanvas.width,d=this.fontCanvas.height,l=!1,r=!1,c=t.getImageData(0,0,this.fontCanvas.width,this.fontCanvas.height),h=0;h<d;h++){for(var m=!1,u=0;u<a;u++){var p=h*a*4+4*u;c.data[p]>100&&(m=!0)}!1===l&&m&&(l=h),!1===l||!1!==r||m||(r=h)}for(this.fontCharHeight=r-l+3,this.fontCharWidth=Math.ceil(n),this.baseLine=r-2*this.fontPx,this.fontCanvas.width=128*this.fontCharWidth,this.fontCanvas.height=this.fontCharHeight+6,(t=this.fontCanvas.getContext("2d")).font=this.font,t.clearRect(0,0,this.fontCanvas.width,this.fontCanvas.height),t.fillStyle="#ffffff",i=0;i<128;i++)s=String.fromCharCode(i),i>31&&t.fillText(s,i*this.fontCharWidth,this.fontCharHeight-this.baseLine);for(var g=this.fontColorList,y=0;y<g.length;y++)for(this.fontCanvasColors.length<=y&&(this.fontCanvasColors[y]=document.createElement("canvas")),this.fontCanvasColors[y].width=128*this.fontCharWidth,this.fontCanvasColors[y].height=this.fontCharHeight+6,(t=this.fontCanvasColors[y].getContext("2d")).font=this.font,t.clearRect(0,0,this.fontCanvas.width,this.fontCanvas.height),t.fillStyle=g[y],i=0;i<128;i++)s=String.fromCharCode(i),i>31&&t.fillText(s,i*this.fontCharWidth,this.fontCharHeight-this.baseLine)}initCmdCanvas(){var e=X.length;null==this.cmdCanvas&&(this.cmdCanvas=document.createElement("canvas")),this.cmdCanvas.width=3*this.fontCharWidth,this.cmdCanvas.height=e*this.fontCharHeight;let t=this.cmdCanvas.getContext("2d");t.font=this.font,t.fillStyle="#ffffff";for(var n=this.fontCharWidth,i=this.fontCharHeight,s=0,o=0,a=!1,d=0;d<e;d++){s=0;var l=X[d];this.cmdPositions[l]={x:s,y:o};for(var r=l.length,c=0;c<r;c++)a=String.fromCharCode(l.charCodeAt(c)),t.fillText(a,s,o+i-this.baseLine),s+=n;s=0,o+=i}}initColorCmdCanvas(){var e=X.length;null==this.colorCmdCanvas&&(this.colorCmdCanvas=document.createElement("canvas")),this.colorCmdCanvas.width=3*this.fontCharWidth,this.colorCmdCanvas.height=e*this.fontCharHeight;let t=this.colorCmdCanvas.getContext("2d");t.font=this.font,t.fillStyle="#b294bb";for(var n=this.fontCharWidth,i=this.fontCharHeight,s=0,o=0,a=!1,d=0;d<e;d++){s=0;var l=X[d];this.cmdPositions[l]={x:s,y:o};for(var r=l.length,c=0;c<r;c++)a=String.fromCharCode(l.charCodeAt(c)),t.fillText(a,s,o+i-this.baseLine),s+=n;s=0,o+=i}}drawText(e,t,n,i){for(var s=this.fontCharWidth,o=this.fontCharHeight,a=t.length,d=0;d<a;d++){let a=t.charCodeAt(d)*s,l=0,r=s,c=o,h=s,m=o;e.drawImage(this.fontCanvas,a,l,r,c,n+d*s,i,h,m)}}initHexNumberCanvas(){for(var e=this.numberColorList,t=0;t<e.length;t++){this.hexNumberCanvas.length<=t&&(this.hexNumberCanvas[t]=document.createElement("canvas")),this.hexNumberCanvas[t].width=32*this.fontCharWidth,this.hexNumberCanvas[t].height=16*this.fontCharHeight;var n=this.hexNumberCanvas[t].getContext("2d");n.clearRect(0,0,this.hexNumberCanvas[t].width,this.hexNumberCanvas[t].height),n.font=this.font,n.fillStyle=e[t];for(var i=this.fontCharWidth,s=this.fontCharHeight,o=0,a=0,d=!1,l=0;l<256;l++){0!==l&&l%16==0&&(o=0,a+=s);var r=this.hex2Digit[l];this.hexNumberPositions[l]={x:o,y:a};for(var c=0;c<2;c++)d=String.fromCharCode(r[c]),n.fillText(d,o,a+s-this.baseLine),o+=i}}}}class Z{constructor(e){this.inViewport=!1,this.canvas1=e.canvas,this.canvas2=e.canvas2,this.canvas=this.canvas2,this.font=e.font,this.fontCanvas=this.font.fontCanvas,this.fontCanvasColors=this.font.fontCanvasColors,this.hexNumberCanvas=this.font.hexNumberCanvas,this.setFontMetrics(),this.audioBufferCount=22,this.bufferDelay=0,this.bufferLength=y.getAudioBufferLength(),this.isFullscreen=!1,this.controlsTimer=0,this.lastBuffer=0,this.audioBuffers=[[],[],[]];for(var t=0;t<this.audioBufferCount;t++)for(var n=0;n<3;n++){let e=new Float32Array(this.bufferLength);this.audioBuffers[n].push(e)}this.holder=document.getElementById("sid-holder"),this.tokenCanvas=document.getElementById("token-canvas"),document.getElementById("sid-holder").addEventListener("webkitfullscreenchange",(e=>{document.fullscreenElement||document.webkitFullscreenElement||(this.isFullscreen=!1,this.resize()),setTimeout((()=>{this.resize()}),800)})),document.getElementById("sid-holder-2").addEventListener("webkitfullscreenchange",(e=>{document.fullscreenElement||document.webkitFullscreenElement||(this.isFullscreen=!1,this.resize()),setTimeout((()=>{this.resize()}),800)})),document.addEventListener("webkitfullscreenchange",(e=>{document.fullscreenElement||document.webkitFullscreenElement||(this.isFullscreen=!1,this.resize()),setTimeout((()=>{this.resize()}),800)})),document.getElementById("sid-holder").addEventListener("fullscreenchange",(e=>{document.fullscreenElement||document.webkitFullscreenElement||(this.isFullscreen=!1,this.resize()),setTimeout((()=>{this.resize()}),800)})),document.getElementById("sid-holder-2").addEventListener("fullscreenchange",(e=>{document.fullscreenElement||document.webkitFullscreenElement||(this.isFullscreen=!1,this.resize()),setTimeout((()=>{this.resize()}),800)})),document.addEventListener("fullscreenchange",(e=>{document.fullscreenElement||document.webkitFullscreenElement||(this.isFullscreen=!1,this.resize()),setTimeout((()=>{this.resize()}),800)})),document.addEventListener("scroll",(()=>{this.checkInViewport()})),document.getElementById("sid-fullscreen-icon").addEventListener("click",(e=>{e.preventDefault(),this.fullscreen()})),document.getElementById("sid-fullscreen-exit-icon").addEventListener("click",(e=>{e.preventDefault(),this.exitFullscreen()})),document.getElementById("sid-fullscreen-icon-2").addEventListener("click",(e=>{e.preventDefault(),this.fullscreen()})),document.getElementById("sid-fullscreen-exit-icon-2").addEventListener("click",(e=>{e.preventDefault(),this.exitFullscreen()})),document.getElementById("sid").addEventListener("dblclick",(e=>{e.preventDefault(),this.isFullscreen?this.exitFullscreen():this.fullscreen()})),document.getElementById("sid-2").addEventListener("dblclick",(e=>{e.preventDefault(),this.isFullscreen?this.exitFullscreen():this.fullscreen()})),document.getElementById("sid").addEventListener("mousemove",(e=>{this.mouseMove(e)})),document.getElementById("sid").addEventListener("mousemove",(e=>{this.mouseMove(e)})),document.getElementById("sid-2").addEventListener("mousemove",(e=>{this.mouseMove2(e)})),document.getElementById("sid-2").addEventListener("mousemove",(e=>{this.mouseMove2(e)}))}exitFullscreen(){this.isFullscreen=!1,document.exitFullscreen?document.exitFullscreen():void 0!==document.webkitCancelFullScreen&&document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),this.resize()}fullscreen(){this.isFullscreen=!0;var e=document.getElementById("sid-holder");window.innerWidth<1300&&(e=document.getElementById("sid-holder-2"),document.getElementById("cpu-sid").style.display="block"),void 0!==e.requestFullscreen&&e.requestFullscreen?e.requestFullscreen():void 0!==e.webkitRequestFullscreen&&e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),this.resize(),setTimeout((()=>{this.isFullscreen=!0,this.resize()}),800)}checkInViewport(){if(!this.canvas)return;if(this.isFullscreen)return!0;const e=this.canvas.getBoundingClientRect();this.inViewport=e.bottom>=0&&e.right>=0&&e.top<=(window.innerHeight||document.documentElement.clientHeight)&&e.left<=(window.innerWidth||document.documentElement.clientWidth)}setFontMetrics(){let e=this.font.getDevicePixelRatio();this.fontCharWidth=this.font.fontCharWidth,this.fontCharHeight=this.font.fontCharHeight,this.hexNumberPositions=this.font.hexNumberPositions,this.lineHeight=this.fontCharHeight+6*e}showControls(){document.getElementById("sid-controls").style.opacity=1,this.controlsTimer=1e3}hideControls(){document.getElementById("sid-controls").style.opacity=0,document.getElementById("sid-controls-2").style.opacity=0}mouseMove(e){this.showControls()}mouseMove2(e){this.showControls2()}showControls2(){document.getElementById("sid-controls-2").style.opacity=1,this.controlsTimer=1e3}resize(){let e=this.font.getDevicePixelRatio();var t=document.getElementById("sid-holder");let n=void 0!==t.requestFullscreen||void 0!==t.webkitRequestFullscreen;if(n||(document.getElementById("sid-fullscreen-icon").style.display="none",document.getElementById("sid-fullscreen-exit-icon").style.display="none"),this.isFullscreen){let t=window.innerWidth,i=window.innerHeight;this.canvas.width=t*e,this.canvas.height=i*e,this.canvas.style.width=t+"px",this.canvas.style.height=i+"px",this.context=this.canvas.getContext("2d"),document.getElementById("cpu-sid").style.display="flex",n&&(document.getElementById("sid-fullscreen-icon").style.display="none",document.getElementById("sid-fullscreen-exit-icon").style.display="block",document.getElementById("sid-fullscreen-icon-2").style.display="none",document.getElementById("sid-fullscreen-exit-icon-2").style.display="block")}else{let t=680,i=400,s=document.getElementById("token-canvas"),o=document.getElementById("token-view-holder");if(document.getElementById("token-mode"),window.innerWidth>=1300)this.canvas=this.canvas1,document.getElementById("cpu-sid").style.display="none",t=o.clientWidth-s.width-10,i=s.height;else if(window.innerWidth>803){document.getElementById("cpu-sid").style.display="flex";let n=document.getElementById("cpu-sid"),s=document.getElementById("disassembly-2");t=n.clientWidth-s.width/e-19,this.canvas=this.canvas2,i=485}else if(window.innerWidth>780)document.getElementById("cpu-sid").style.display="flex",this.canvas=this.canvas2,i=485,t=this.tokenCanvas.width<784?this.tokenCanvas.width:392;else{document.getElementById("cpu-sid").style.display="flex";let e=document.getElementById("cpu-sid");this.canvas=this.canvas2,i=485,t=e.clientWidth}this.canvas.width=t*e,this.canvas.height=i*e,this.holder.style.width=t+"px",this.holder.style.height=i+"px",this.canvas.style.width=t+"px",this.canvas.style.height=i+"px",this.context=this.canvas.getContext("2d"),n&&(document.getElementById("sid-fullscreen-icon").style.display="block",document.getElementById("sid-fullscreen-exit-icon").style.display="none",document.getElementById("sid-fullscreen-icon-2").style.display="block",document.getElementById("sid-fullscreen-exit-icon-2").style.display="none")}this.checkInViewport()}draw(e){if(!this.inViewport)return;let t=this.canvas.getContext("2d");t.fillStyle="#111111",t.fillRect(0,0,this.canvas.width,this.canvas.height);let n=0,i=0,s=0,o=0,a=this.fontCharWidth,d=this.fontCharHeight,l=a,r=d;for(let e=0;e<25;e++){let h=y.cpuRead(112+e);var c=this.hexNumberPositions[h];n=c.x,i=c.y,s=10+e*(2*a+4),o=10,t.drawImage(this.hexNumberCanvas[1],n,i,2*a,d,s,o,2*l,r)}this.audioBufferLength=y.getAudioBufferLength();for(let e=0;e<3;e++){var h=y.getAudioBufferCh(e),m=new Float32Array(y.HEAPF32.subarray(h>>2,(h>>2)+this.audioBufferLength));this.audioBuffers[e][this.lastBuffer].set(m);let n=this.lastBuffer;n-=this.bufferDelay,n<0&&(n+=this.audioBufferCount),m=this.audioBuffers[e][n];var u=0,p=this.canvas.width,g=this.canvas.height,f=1.9*this.audioBufferLength/2048,v=g/4+g/4*e,b=g/400*1.2;0==e&&(v-=10),2==e&&(v+=10),f*=590;var k=this.audioBufferLength/f;0==(k=590*k/p)&&(k=1);for(var w=Math.floor(this.audioBufferLength/2.8);m[w]<1.95&&w<this.audioBufferLength-580;)w++;for(;m[w]>=1.85&&w<this.audioBufferLength-580;)w++;(w-=Math.floor(this.audioBufferLength/2.8))<0&&(w=0);var x=.18*-p,C=m[u=Math.floor(w+0)%this.audioBufferLength]*b+v+.5;t.strokeStyle="#dddddd",t.lineWidth=2,t.beginPath(),t.moveTo(x,C);for(var I=1;I<this.audioBufferLength&&(u+=k,x++,C=m[Math.floor(u)%this.audioBufferLength]*b+v+.5,!(u>this.audioBufferLength));I+=k)t.lineTo(x,C);t.stroke()}this.lastBuffer=(this.lastBuffer+1)%this.audioBufferCount,this.controlsTimer>0&&(this.controlsTimer-=e,this.controlsTimer<0&&(this.controlsTimer=0,this.hideControls()))}}class J{charData=[];scale=2;charsetX=5;charsetY=5;selectedChar=2;highlightedChar=2;charsAcross=16;charsDown=2;redrawRequired=!0;constructor(e){this.canvas=e.canvas,this.canvasWidth=0,this.canvasHeight=0,this.offscreenCanvas=document.createElement("canvas"),this.offscreenCanvas.width=388,this.offscreenCanvas.height=388,this.offscreenContext=this.offscreenCanvas.getContext("2d"),this.offscreenContext.imageSmoothingEnabled=!1,this.imageData=this.offscreenContext.createImageData(this.offscreenCanvas.width,this.offscreenCanvas.height),this.font=e.font,this.visible=!1,this.fontCanvas=this.font.fontCanvas,this.fontCanvasColors=this.font.fontCanvasColors,this.hexNumberCanvas=this.font.hexNumberCanvas,this.resize();for(let e=0;e<2048;e++)this.charData.push(0);this.initEvents(),this.setFontMetrics()}setFontMetrics(){let e=this.font.getDevicePixelRatio();this.fontCharWidth=this.font.fontCharWidth,this.fontCharHeight=this.font.fontCharHeight,this.hexNumberPositions=this.font.hexNumberPositions,this.lineHeight=this.fontCharHeight+6*e,this.blockWidth=19*this.fontCharWidth,this.blockHeight=8*this.lineHeight}initEvents(){this.canvas.addEventListener("mousemove",(e=>{this.mouseMove(e)})),this.canvas.addEventListener("mousedown",(e=>{this.mouseDown(e)})),this.canvas.addEventListener("mouseup",(e=>{this.mouseUp(e)})),this.canvas.addEventListener("mouseleave",(e=>{this.mouseLeave(e)}))}checkVisibility(){}resize(){let e=this.font.getDevicePixelRatio();this.canvas.width=400,this.canvas.height=480,this.holder=document.getElementById("charset-cpu-memory");let t=document.getElementById("cube-memory"),n=document.getElementById("disassembly"),i=document.getElementById("token-canvas");if(window.innerWidth>1300){let i=Math.floor(this.holder.clientWidth-t.width/e-n.width/e-20);this.canvas.width=i*e,this.canvas.height=t.height}else if(window.innerWidth>980){let n=Math.floor(this.holder.clientWidth-t.width/e-10);this.canvas.width=n*e,this.canvas.height=t.height}else if(window.innerWidth>884){let n=i.width;this.canvas.width=n*e,this.canvas.height=t.height}else{let n=this.holder.clientWidth;this.canvas.width=n*e,this.canvas.height=t.height}this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height;let s=Math.floor(this.canvasWidth/e),o=Math.floor(this.canvasHeight/e);this.canvas.style.width=s+"px",this.canvas.style.height=o+"px",this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1;for(var a=0;a<this.imageData.data.length;a++)this.imageData.data[a]=0;this.redrawRequired=!0,this.draw()}xyToChar(e,t){let n=0;return e-=this.charsetX,t-=this.charsetY,n=Math.floor((e-1)/18),n+=Math.floor((t-1)/18)*this.charsAcross,!(n>42)&&n}setRedrawRequired(e){this.redrawRequired=!0}mouseMove(e){let t=e.offsetX,n=e.offsetY;!1!==this.xyToChar(t,n)?(this.highlightedChar=this.xyToChar(t,n),(this.highlightedChar>43||this.highlightedChar<0)&&(this.highlightedChar=this.selectedChar,this.redrawRequired=!0)):(this.highlightedChar=this.selectedChar,this.redrawRequired=!0)}mouseDown(e){let t=e.offsetX,n=e.offsetY,i=this.xyToChar(t,n);!1!==i&&(this.highlightedChar=i,this.selectedChar=this.highlightedChar,this.redrawRequired=!0)}mouseUp(e){}mouseLeave(e){this.highlightedChar=this.selectedChar,this.redrawRequired=!0}setHighlightChar(e){this.highlightedChar=e,this.redrawRequired=!0}setSelectedChar(e){this.selectedChar=e,this.redrawRequired=!0}drawChars(){if(void 0===this.hexNumberPositions)return;let e=this.font.getDevicePixelRatio();this.scale=2*e,this.charsAcross=Math.floor((this.canvas.width-2*this.charsetX-this.scale)/(9*this.scale)),this.charsDown=Math.ceil(43/this.charsAcross),this.context.fillStyle="#111111",this.context.fillRect(0,0,this.canvas.width,this.canvas.height);let t=0,n=0;for(let e=0;e<1024;e++)this.charData[e]=y.cpuRead(8192+e);var i=this.imageData;let s=0;for(let e=0;e<43;e++){var o=e%this.charsAcross,a=Math.floor(e/this.charsAcross);s=8*e;for(let e=0;e<8;e++)for(var d=this.charData[s+e],l=0;l<8;l++){t=1+9*o+l,n=1+9*a+e;var r=4*(t+n*i.width);d&1<<7-l?(i.data[r]=255,i.data[r+1]=255,i.data[r+2]=255,i.data[r+3]=255):(i.data[r]=0,i.data[r+1]=0,i.data[r+2]=0,i.data[r+3]=255)}s+=8}this.offscreenContext.putImageData(i,0,0);let c=9*this.charsAcross+1,h=9*this.charsDown+1;this.context.drawImage(this.offscreenCanvas,0,0,c,h,this.charsetX,this.charsetY,c*this.scale,h*this.scale);let m=0,u=0;if(!1!==this.highlightedChar){m=this.highlightedChar%this.charsAcross*9+1,u=9*Math.floor(this.highlightedChar/this.charsAcross)+1,this.context.beginPath(),this.context.rect(this.charsetX+2*m*e-.5,this.charsetY+2*u*e-.5,17*e,17*e),this.context.strokeStyle="#999",this.context.lineWidth=1,this.context.stroke(),t=0,n=this.charsetY+h*this.scale+30*e;let i=this.canvasWidth-20,s=this.canvasHeight-n-10;i=8*Math.floor(i/8),s=8*Math.floor(s/8),i>s?i=s:s=i,t=Math.floor((this.canvas.width-i)/2),this.context.drawImage(this.offscreenCanvas,m,u,8,8,t,n,i,s)}let p=this.charsetY+h*this.scale+6;this.scale=1,n=p,this.font.drawText(this.context,"CHAR ",t,n),t+=5*this.fontCharWidth,this.font.drawText(this.context,("00"+this.highlightedChar.toString(16)).substr(-2),t,n),t+=3*this.fontCharWidth,this.font.drawText(this.context,"ADDRESS ",t,n),t+=8*this.fontCharWidth;let g=8192+8*this.highlightedChar,f=g>>8&255,v=255&g,b=this.hexNumberPositions[f];m=b.x,u=b.y,this.context.drawImage(this.hexNumberCanvas[0],m,u,2*this.fontCharWidth,this.fontCharHeight,t,p,2*this.fontCharWidth,this.fontCharHeight),b=this.hexNumberPositions[v],m=b.x,u=b.y,this.context.drawImage(this.hexNumberCanvas[0],m,u,2*this.fontCharWidth,this.fontCharHeight,t+2*this.fontCharWidth,p,2*this.fontCharWidth,this.fontCharHeight)}draw(e){this.redrawRequired&&this.drawChars()}}const $=12288;class ee{constructor(e){this.canvas=e.canvas,this.redrawRequired=!0,this.font=e.font,this.fontCanvas=this.font.fontCanvas,this.fontCanvasColors=this.font.fontCanvasColors,this.hexNumberCanvas=this.font.hexNumberCanvas,this.highlightAddress=!1,this.valueSpacing=2,this.blockWidth=200,this.setFontMetrics(),this.setCanvasSize(),this.resize(),this.initEvents()}initEvents(){this.canvas.addEventListener("mousemove",(e=>{this.mouseMove(e)})),this.canvas.addEventListener("mousedown",(e=>{this.mouseDown(e)})),this.canvas.addEventListener("mouseup",(e=>{this.mouseUp(e)})),this.canvas.addEventListener("mouseleave",(e=>{this.mouseLeave(e)}))}resize(){let e=this.font.getDevicePixelRatio();this.canvas.width=690*e,this.canvas.height=485*e,this.canvas.style.width="690px",this.canvas.style.height="485px",this.context=this.canvas.getContext("2d"),this.redrawRequired=!0}setCanvasSize(){}setFontMetrics(){let e=this.font.getDevicePixelRatio();this.fontCharWidth=this.font.fontCharWidth,this.fontCharHeight=this.font.fontCharHeight,this.hexNumberPositions=this.font.hexNumberPositions,this.lineHeight=this.fontCharHeight+6*e,this.blockWidth=19*this.fontCharWidth,this.blockHeight=8*this.lineHeight}setRedrawRequired(e){this.redrawRequired=!0}mouseLeave(e){this.highlightAddress=!1,this.redrawRequired=!0}mouseMove(e){let t=e.offsetX,n=e.offsetY;this.highlightAddress=this.xyToAddress(t,n),this.redrawRequired=!0}mouseDown(e){let t=e.offsetX,n=e.offsetY,i=this.xyToAddress(t,n);if(!1!==i&&i>0&&i<65535){let e=y.cpuRead(i);e=e?0:1,y.cpuWrite(i,e)}this.redrawRequired=!0}mouseUp(e){this.redrawRequired=!0}xyToAddress(e,t){let n=this.font.getDevicePixelRatio();e=(e-10)*n;let i=0;(t=(t-30)*n)>10*this.lineHeight&&(t-=10*this.lineHeight,i+=256);let s=Math.floor(e/this.blockWidth),o=Math.floor((e-s*this.blockWidth)/(2*this.fontCharWidth+this.valueSpacing)),a=Math.floor(t/this.lineHeight);return!(a<0||a>7||o<0||o>7)&&$+64*s+8*a+o+i}drawMemory(){if(!this.redrawRequired)return;let e=this.font.getDevicePixelRatio(),t=this.context;t.fillStyle="#111111",t.fillRect(0,0,this.canvas.width,this.canvas.height);let n=60*e,i=10,s=0,o=0,a=this.fontCharWidth,d=this.fontCharHeight,l=a,r=d,c=10-this.blockWidth,h=$,m=0,u=!1,p=0,g=0;for(let f=0;f<512;f++){if(m=f%64,h=$+64*Math.floor(f/64),f%8==0&&(0==m&&(c+=this.blockWidth,n=f<256?-this.lineHeight+35*e:9*this.lineHeight+30*e),i=c,n+=this.lineHeight,0!=f&&f%256==0&&(c=10,i=10,n=10*this.lineHeight+30*e)),0==m){p=h>>8&255,g=255&h;let e=3;this.highlightAddress>=h&&this.highlightAddress<h+64&&(e=0,p=this.highlightAddress>>8&255,g=255&this.highlightAddress),u=this.hexNumberPositions[p],s=u.x,o=u.y,t.drawImage(this.hexNumberCanvas[e],s,o,2*a,d,i,n-this.lineHeight,2*l,r),i+=2*l,u=this.hexNumberPositions[g],s=u.x,o=u.y,t.drawImage(this.hexNumberCanvas[e],s,o,2*a,d,i,n-this.lineHeight,2*l,r),t.globalAlpha=1,i-=2*l}let v=y.cpuRead(h+m);if(u=this.hexNumberPositions[v],s=u.x,o=u.y,0==v){let e=1;$+f==this.highlightAddress&&(e=2),t.drawImage(this.hexNumberCanvas[e],s,o,2*a,d,i,n,2*l,r)}else{let e=0;$+f==this.highlightAddress&&(e=2),t.drawImage(this.hexNumberCanvas[e],s,o,2*a,d,i,n,2*l,r)}i+=2*l+this.valueSpacing}}draw(e){this.drawMemory(),this.redrawRequired=!1}}const te=10,ne=11,ie=[{opcode:0,cmd:"BRK",addrmode:3,bytes:1},{opcode:1,cmd:"ORA",addrmode:9,bytes:2},{opcode:2,cmd:"???",bytes:1},{opcode:3,cmd:"SLO",bytes:2,illegal:!0,addrmode:9},{opcode:4,cmd:"NOP",bytes:1,illegal:!0,addrmode:2},{opcode:5,cmd:"ORA",addrmode:2,bytes:2},{opcode:6,cmd:"ASL",addrmode:2,bytes:2},{opcode:7,cmd:"SLO",bytes:2,illegal:!0,addrmode:2},{opcode:8,cmd:"PHP",addrmode:3,bytes:1},{opcode:9,cmd:"ORA",addrmode:0,bytes:2},{opcode:10,cmd:"ASL",addrmode:12,bytes:1},{opcode:11,cmd:"ANC",addrmode:0,bytes:2},{opcode:12,cmd:"NOP",bytes:1,illegal:!0,addrmode:1},{opcode:13,cmd:"ORA",addrmode:1,bytes:3},{opcode:14,cmd:"ASL",addrmode:1,bytes:3},{opcode:15,cmd:"SLO",bytes:3,illegal:!0,addrmode:1},{opcode:16,cmd:"BPL",addrmode:ne,bytes:2},{opcode:17,cmd:"ORA",addrmode:te,bytes:2},{opcode:18,cmd:"???",bytes:1},{opcode:19,cmd:"SLO",bytes:2,illegal:!0,addrmode:te},{opcode:20,cmd:"NOP",bytes:1,illegal:!0,addrmode:7},{opcode:21,cmd:"ORA",addrmode:7,bytes:2},{opcode:22,cmd:"ASL",addrmode:7,bytes:2},{opcode:23,cmd:"SLO",bytes:2,illegal:!0,addrmode:7},{opcode:24,cmd:"CLC",addrmode:3,bytes:1},{opcode:25,cmd:"ORA",addrmode:6,bytes:3},{opcode:26,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:27,cmd:"SLO",bytes:3,illegal:!0,addrmode:6},{opcode:28,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:29,cmd:"ORA",addrmode:5,bytes:3},{opcode:30,cmd:"ASL",addrmode:5,bytes:3},{opcode:31,cmd:"SLO",bytes:3,illegal:!0,addrmode:5},{opcode:32,cmd:"JSR",addrmode:1,bytes:3},{opcode:33,cmd:"AND",addrmode:9,bytes:2},{opcode:34,cmd:"???",bytes:1},{opcode:35,cmd:"RLA",bytes:2,illegal:!0},{opcode:36,cmd:"BIT",addrmode:2,bytes:2},{opcode:37,cmd:"AND",addrmode:2,bytes:2},{opcode:38,cmd:"ROL",addrmode:2,bytes:2},{opcode:39,cmd:"RLA",bytes:2,illegal:!0},{opcode:40,cmd:"PLP",addrmode:3,bytes:1},{opcode:41,cmd:"AND",addrmode:0,bytes:2},{opcode:42,cmd:"ROL",addrmode:12,bytes:1},{opcode:43,cmd:"ANC",addrmode:0,bytes:2},{opcode:44,cmd:"BIT",addrmode:1,bytes:3},{opcode:45,cmd:"AND",addrmode:1,bytes:3},{opcode:46,cmd:"ROL",addrmode:1,bytes:3},{opcode:47,cmd:"RLA",bytes:3,illegal:!0},{opcode:48,cmd:"BMI",addrmode:ne,bytes:2},{opcode:49,cmd:"AND",addrmode:te,bytes:2},{opcode:50,cmd:"???",bytes:1},{opcode:51,cmd:"RLA",bytes:2,illegal:!0},{opcode:52,cmd:"NOP",bytes:1,illegal:!0,addrmode:7},{opcode:53,cmd:"AND",addrmode:7,bytes:2},{opcode:54,cmd:"ROL",addrmode:7,bytes:2},{opcode:55,cmd:"RLA",bytes:2,illegal:!0},{opcode:56,cmd:"SEC",addrmode:3,bytes:1},{opcode:57,cmd:"AND",addrmode:6,bytes:3},{opcode:58,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:59,cmd:"RLA",bytes:3,illegal:!0},{opcode:60,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:61,cmd:"AND",addrmode:5,bytes:3},{opcode:62,cmd:"ROL",addrmode:5,bytes:3},{opcode:63,cmd:"RLA",bytes:3,illegal:!0},{opcode:64,cmd:"RTI",addrmode:3,bytes:1},{opcode:65,cmd:"EOR",addrmode:9,bytes:2},{opcode:66,cmd:"???",bytes:1},{opcode:67,cmd:"SRE",bytes:1,illegal:!0,addrmode:te},{opcode:68,cmd:"NOP",bytes:1,illegal:!0,addrmode:2},{opcode:69,cmd:"EOR",addrmode:2,bytes:2},{opcode:70,cmd:"LSR",addrmode:2,bytes:2},{opcode:71,cmd:"SRE",bytes:1,illegal:!0,addrmode:2},{opcode:72,cmd:"PHA",addrmode:3,bytes:1},{opcode:73,cmd:"EOR",addrmode:0,bytes:2},{opcode:74,cmd:"LSR",addrmode:12,bytes:1},{opcode:75,cmd:"ALR",bytes:2,illegal:!0,addrmode:0},{opcode:76,cmd:"JMP",addrmode:1,bytes:3},{opcode:77,cmd:"EOR",addrmode:1,bytes:3},{opcode:78,cmd:"LSR",addrmode:1,bytes:3},{opcode:79,cmd:"SRE",bytes:1,illegal:!0,addrmode:1},{opcode:80,cmd:"BVC",addrmode:ne,bytes:2},{opcode:81,cmd:"EOR",addrmode:te,bytes:2},{opcode:82,cmd:"???",bytes:1},{opcode:83,cmd:"SRE",bytes:1,illegal:!0,addrmode:te},{opcode:84,cmd:"NOP",bytes:1,illegal:!0,addrmode:7},{opcode:85,cmd:"EOR",addrmode:7,bytes:2},{opcode:86,cmd:"LSR",addrmode:7,bytes:2},{opcode:87,cmd:"SRE",bytes:1,illegal:!0,addrmode:7},{opcode:88,cmd:"CLI",addrmode:3,bytes:1},{opcode:89,cmd:"EOR",addrmode:6,bytes:3},{opcode:90,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:91,cmd:"SRE",bytes:1,illegal:!0,addrmode:6},{opcode:92,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:93,cmd:"EOR",addrmode:5,bytes:3},{opcode:94,cmd:"LSR",addrmode:5,bytes:3},{opcode:95,cmd:"SRE",bytes:1,illegal:!0,addrmode:5},{opcode:96,cmd:"RTS",addrmode:3,bytes:1},{opcode:97,cmd:"ADC",addrmode:9,bytes:2},{opcode:98,cmd:"???",bytes:1},{opcode:99,cmd:"RRA",bytes:1,illegal:!0,addrmode:9},{opcode:100,cmd:"NOP",bytes:1,illegal:!0,addrmode:2},{opcode:101,cmd:"ADC",addrmode:2,bytes:2},{opcode:102,cmd:"ROR",addrmode:2,bytes:2},{opcode:103,cmd:"RRA",bytes:1,illegal:!0,addrmode:2},{opcode:104,cmd:"PLA",addrmode:3,bytes:1},{opcode:105,cmd:"ADC",addrmode:0,bytes:2},{opcode:106,cmd:"ROR",addrmode:12,bytes:1},{opcode:107,cmd:"ARR",bytes:1,illegal:!0,addrmode:0},{opcode:108,cmd:"JMP",addrmode:4,bytes:3},{opcode:109,cmd:"ADC",addrmode:1,bytes:3},{opcode:110,cmd:"ROR",addrmode:1,bytes:3},{opcode:111,cmd:"RRA",bytes:1,illegal:!0,addrmode:1},{opcode:112,cmd:"BVS",addrmode:ne,bytes:2},{opcode:113,cmd:"ADC",addrmode:te,bytes:2},{opcode:114,cmd:"???",bytes:1},{opcode:115,cmd:"RRA",bytes:1,illegal:!0,addrmode:te},{opcode:116,cmd:"NOP",bytes:1,illegal:!0,addrmode:7},{opcode:117,cmd:"ADC",addrmode:7,bytes:2},{opcode:118,cmd:"ROR",addrmode:7,bytes:2},{opcode:119,cmd:"RRA",bytes:1,illegal:!0,addrmode:7},{opcode:120,cmd:"SEI",addrmode:3,bytes:1},{opcode:121,cmd:"ADC",addrmode:6,bytes:3},{opcode:122,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:123,cmd:"RRA",bytes:1,illegal:!0,addrmode:6},{opcode:124,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:125,cmd:"ADC",addrmode:5,bytes:3},{opcode:126,cmd:"ROR",addrmode:5,bytes:3},{opcode:127,cmd:"RRA",bytes:1,illegal:!0,addrmode:5},{opcode:128,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:129,cmd:"STA",addrmode:9,bytes:2},{opcode:130,cmd:"NOP",bytes:1,illegal:!0,addrmode:0},{opcode:131,cmd:"SAX",bytes:1,illegal:!0,addrmode:9},{opcode:132,cmd:"STY",addrmode:2,bytes:2},{opcode:133,cmd:"STA",addrmode:2,bytes:2},{opcode:134,cmd:"STX",addrmode:2,bytes:2},{opcode:135,cmd:"SAX",bytes:1,illegal:!0,addrmode:2},{opcode:136,cmd:"DEY",addrmode:3,bytes:1},{opcode:137,cmd:"NOP",bytes:1,illegal:!0,addrmode:0},{opcode:138,cmd:"TXA",addrmode:3,bytes:1},{opcode:139,cmd:"ANE",bytes:1,illegal:!0,addrmode:0},{opcode:140,cmd:"STY",addrmode:1,bytes:3},{opcode:141,cmd:"STA",addrmode:1,bytes:3},{opcode:142,cmd:"STX",addrmode:1,bytes:3},{opcode:143,cmd:"SAX",bytes:1,illegal:!0,addrmode:1},{opcode:144,cmd:"BCC",addrmode:ne,bytes:2},{opcode:145,cmd:"STA",addrmode:te,bytes:2},{opcode:146,cmd:"???",bytes:1},{opcode:147,cmd:"SHA",bytes:1,illegal:!0,addrmode:te},{opcode:148,cmd:"STY",addrmode:7,bytes:2},{opcode:149,cmd:"STA",addrmode:7,bytes:2},{opcode:150,cmd:"STX",addrmode:8,bytes:2},{opcode:151,cmd:"SAX",bytes:1,illegal:!0,addrmode:7},{opcode:152,cmd:"TYA",addrmode:3,bytes:1},{opcode:153,cmd:"STA",addrmode:6,bytes:3},{opcode:154,cmd:"TXS",addrmode:3,bytes:1},{opcode:155,cmd:"SHS",bytes:1,illegal:!0,addrmode:6},{opcode:156,cmd:"SHY",bytes:1,illegal:!0,addrmode:5},{opcode:157,cmd:"STA",addrmode:5,bytes:3},{opcode:158,cmd:"SHX",bytes:1,illegal:!0,addrmode:5},{opcode:159,cmd:"SHA",bytes:1,illegal:!0,addrmode:5},{opcode:160,cmd:"LDY",addrmode:0,bytes:2},{opcode:161,cmd:"LDA",addrmode:9,bytes:2},{opcode:162,cmd:"LDX",addrmode:0,bytes:2},{opcode:163,cmd:"LAX",bytes:2,illegal:!0,addrmode:9},{opcode:164,cmd:"LDY",addrmode:2,bytes:2},{opcode:165,cmd:"LDA",addrmode:2,bytes:2},{opcode:166,cmd:"LDX",addrmode:2,bytes:2},{opcode:167,cmd:"LAX",bytes:2,illegal:!0,addrmode:2},{opcode:168,cmd:"TAY",addrmode:3,bytes:1},{opcode:169,cmd:"LDA",addrmode:0,bytes:2},{opcode:170,cmd:"TAX",addrmode:3,bytes:1},{opcode:171,cmd:"LXA",bytes:1,illegal:!0,addrmode:0},{opcode:172,cmd:"LDY",addrmode:1,bytes:3},{opcode:173,cmd:"LDA",addrmode:1,bytes:3},{opcode:174,cmd:"LDX",addrmode:1,bytes:3},{opcode:175,cmd:"LAX",bytes:3,illegal:!0,addrmode:1},{opcode:176,cmd:"BCS",addrmode:ne,bytes:2},{opcode:177,cmd:"LDA",addrmode:te,bytes:2},{opcode:178,cmd:"???",bytes:1},{opcode:179,cmd:"LAX",bytes:2,illegal:!0,addrmode:te},{opcode:180,cmd:"LDY",addrmode:7,bytes:2},{opcode:181,cmd:"LDA",addrmode:7,bytes:2},{opcode:182,cmd:"LDX",addrmode:7,bytes:2},{opcode:183,cmd:"LAX",bytes:2,illegal:!0,addrmode:7},{opcode:184,cmd:"CLV",addrmode:3,bytes:1},{opcode:185,cmd:"LDA",addrmode:6,bytes:3},{opcode:186,cmd:"TSX",addrmode:3,bytes:1},{opcode:187,cmd:"LAS",bytes:1,illegal:!0,addrmode:6},{opcode:188,cmd:"LDY",addrmode:5,bytes:3},{opcode:189,cmd:"LDA",addrmode:5,bytes:3},{opcode:190,cmd:"LDX",addrmode:5,bytes:3},{opcode:191,cmd:"LAX",bytes:3,illegal:!0,addrmode:5},{opcode:192,cmd:"CPY",addrmode:0,bytes:2},{opcode:193,cmd:"CMP",addrmode:9,bytes:2},{opcode:194,cmd:"NOP",bytes:1,illegal:!0,addrmode:0},{opcode:195,cmd:"DCP",bytes:1,illegal:!0,addrmode:9},{opcode:196,cmd:"CPY",addrmode:2,bytes:2},{opcode:197,cmd:"CMP",addrmode:2,bytes:2},{opcode:198,cmd:"DEC",addrmode:2,bytes:2},{opcode:199,cmd:"DCP",bytes:1,illegal:!0,addrmode:2},{opcode:200,cmd:"INY",addrmode:3,bytes:1},{opcode:201,cmd:"CMP",addrmode:0,bytes:2},{opcode:202,cmd:"DEX",addrmode:3,bytes:1},{opcode:203,cmd:"SBX",bytes:2,illegal:!0,addrmode:0},{opcode:204,cmd:"CPY",addrmode:1,bytes:3},{opcode:205,cmd:"CMP",addrmode:1,bytes:3},{opcode:206,cmd:"DEC",addrmode:1,bytes:3},{opcode:207,cmd:"DCP",bytes:1,illegal:!0,addrmode:1},{opcode:208,cmd:"BNE",addrmode:ne,bytes:2},{opcode:209,cmd:"CMP",addrmode:te,bytes:2},{opcode:210,cmd:"???",bytes:1},{opcode:211,cmd:"DCP",bytes:1,illegal:!0,addrmode:te},{opcode:212,cmd:"NOP",bytes:1,illegal:!0,addrmode:7},{opcode:213,cmd:"CMP",addrmode:7,bytes:2},{opcode:214,cmd:"DEC",addrmode:7,bytes:2},{opcode:215,cmd:"DCP",bytes:1,illegal:!0,addrmode:7},{opcode:216,cmd:"CLD",addrmode:3,bytes:1},{opcode:217,cmd:"CMP",addrmode:6,bytes:3},{opcode:218,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:219,cmd:"DCP",bytes:1,illegal:!0,addrmode:6},{opcode:220,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:221,cmd:"CMP",addrmode:5,bytes:3},{opcode:222,cmd:"DEC",addrmode:5,bytes:3},{opcode:223,cmd:"DCP",bytes:1,illegal:!0,addrmode:5},{opcode:224,cmd:"CPX",addrmode:0,bytes:2},{opcode:225,cmd:"SBC",addrmode:9,bytes:2},{opcode:226,cmd:"NOP",bytes:1,illegal:!0,addrmode:0},{opcode:227,cmd:"ISB",bytes:1,illegal:!0,addrmode:9},{opcode:228,cmd:"CPX",addrmode:2,bytes:2},{opcode:229,cmd:"SBC",addrmode:2,bytes:2},{opcode:230,cmd:"INC",addrmode:2,bytes:2},{opcode:231,cmd:"ISB",bytes:1,illegal:!0,addrmode:1},{opcode:232,cmd:"INX",addrmode:3,bytes:1},{opcode:233,cmd:"SBC",addrmode:0,bytes:2},{opcode:234,cmd:"NOP",addrmode:3,bytes:1},{opcode:235,cmd:"SBC",bytes:1,illegal:!0,addrmode:0},{opcode:236,cmd:"CPX",addrmode:1,bytes:3},{opcode:237,cmd:"SBC",addrmode:1,bytes:3},{opcode:238,cmd:"INC",addrmode:1,bytes:3},{opcode:239,cmd:"ISB",bytes:1,illegal:!0,addrmode:1},{opcode:240,cmd:"BEQ",addrmode:ne,bytes:2},{opcode:241,cmd:"SBC",addrmode:te,bytes:2},{opcode:242,cmd:"???",bytes:1},{opcode:243,cmd:"ISB",bytes:1,illegal:!0,addrmode:te},{opcode:244,cmd:"NOP",bytes:1,illegal:!0,addrmode:2},{opcode:245,cmd:"SBC",addrmode:7,bytes:2},{opcode:246,cmd:"INC",addrmode:7,bytes:2},{opcode:247,cmd:"ISB",bytes:1,illegal:!0,addrmode:7},{opcode:248,cmd:"SED",addrmode:3,bytes:1},{opcode:249,cmd:"SBC",addrmode:6,bytes:3},{opcode:250,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:251,cmd:"ISB",bytes:1,illegal:!0,addrmode:6},{opcode:252,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:253,cmd:"SBC",addrmode:5,bytes:3},{opcode:254,cmd:"INC",addrmode:5,bytes:3}];class se{constructor(e){this.inViewport=!1,this.canvas1=e.canvas,this.canvas2=e.canvas2,this.canvas=this.canvas1,this.font=e.font,this.fontCanvas=this.font.fontCanvas,this.fontCanvasColors=this.font.fontCanvasColors,this.hexNumberCanvas=this.font.hexNumberCanvas,this.cmdCanvas=this.font.colorCmdCanvas,this.setFontMetrics(),this.setCanvasSize(),this.resize(),document.addEventListener("scroll",(()=>{this.checkInViewport()}))}checkInViewport(){if(!this.canvas)return;const e=this.canvas.getBoundingClientRect();this.inViewport=e.bottom>=0&&e.right>=0&&e.top<=(window.innerHeight||document.documentElement.clientHeight)&&e.left<=(window.innerWidth||document.documentElement.clientWidth)}resize(){this.font.getDevicePixelRatio(),window.innerWidth>=1300?this.canvas=this.canvas1:this.canvas=this.canvas2,this.setCanvasSize(),this.context=this.canvas.getContext("2d"),this.checkInViewport()}setFontMetrics(){let e=this.font.getDevicePixelRatio();this.fontCharWidth=this.font.fontCharWidth,this.fontCharHeight=this.font.fontCharHeight,this.hexNumberPositions=this.font.hexNumberPositions,this.cmdPositions=this.font.cmdPositions,this.lineHeight=this.fontCharHeight+6*e,this.cmdPositionX=19*this.fontCharWidth}setCanvasSize(){let e=this.font.getDevicePixelRatio(),t=30*this.fontCharWidth/e+8,n=4+14*this.lineHeight/e+81-28;this.canvas.width=t*e,this.canvas.height=n*e,this.canvas.style.width=t+"px",this.canvas.style.height=n+"px"}draw(){if(!this.inViewport)return;let e=this.context,t=y.getPC(),n=null,i=8,s=4,o=0,a=0,d=this.fontCharWidth,l=this.fontCharHeight,r=0,c=this.fontCharWidth,h=this.fontCharHeight,m=this.fontCharWidth,u=this.fontCharHeight,p=0,g=0;e.fillStyle="#111111",e.fillRect(0,0,this.canvas.width,this.canvas.height);let f=t;for(let t=0;t<17;t++){p=f>>8&255,g=255&f,n=this.hexNumberPositions[p],o=n.x,a=n.y,e.drawImage(this.hexNumberCanvas[1],o,a,2*c,h,i,s,2*m,u),i+=2*m,n=this.hexNumberPositions[g],o=n.x,a=n.y,e.drawImage(this.hexNumberCanvas[1],o,a,2*c,h,i,s,2*m,u),e.globalAlpha=1,i+=2*m,i+=10;let t=255&y.cpuRead(f),T=ie[t],M="";var v=0,b=0;void 0!==T?(M=T.cmd,v=T.bytes,b=T.addrmode):(M="???",v=1);var k=0,w=0;f+1<65535&&(k=255&y.cpuRead(f+1)),f+2<65535&&(w=255&y.cpuRead(f+2));var x=v-1,C="";if(n=this.hexNumberPositions[t],o=n.x,a=n.y,e.drawImage(this.hexNumberCanvas[0],o,a,2*c,h,i,s,2*m,u),i+=2*m,i+=m,x>0&&(n=this.hexNumberPositions[k],o=n.x,a=n.y,e.drawImage(this.hexNumberCanvas[0],o,a,2*c,h,i,s,2*m,u),i+=2*m,i+=m),x>1&&(n=this.hexNumberPositions[w],o=n.x,a=n.y,e.drawImage(this.hexNumberCanvas[0],o,a,2*c,h,i,s,2*m,u),i+=2*m),i=this.cmdPositionX,n=this.cmdPositions[M],void 0!==n?(o=n.x,a=n.y,e.drawImage(this.cmdCanvas,o,a,3*c,h,i,s,3*m,u),i+=3*m):console.log("not found: "+M),r=2,2==x){C+=" ",4==b&&(C+="(");for(var I=(C+="$").length,E=0;E<I;E++)o=C.charCodeAt(E)*d,a=0,c=d,h=l,m=d,u=l,e.drawImage(this.fontCanvasColors[0],o,a,c,h,i,s,m,u),i+=d;n=this.hexNumberPositions[w],o=n.x,a=n.y,e.drawImage(this.hexNumberCanvas[r],o,a,2*c,h,i,s,2*m,u),i+=2*m,n=this.hexNumberPositions[k],o=n.x,a=n.y,e.drawImage(this.hexNumberCanvas[r],o,a,2*c,h,i,s,2*m,u),i+=2*m,C="",5==b&&(C+=",X"),4==b&&(C+=")"),6==b&&(C+=",Y")}if(1==x){if(w=!1,C+=" ",0==b&&(C+="#",r=2),b==ne){var A=k;A>127&&(A-=256);var B=f+A+2;w=B>>8&255,k=255&B}for(b==te&&(C+="("),I=(C+="$").length,E=0;E<I;E++)o=C.charCodeAt(E)*d,a=0,c=d,h=l,m=d,u=l,e.drawImage(this.fontCanvasColors[0],o,a,c,h,i,s,m,u),i+=d;!1!==w&&(n=this.hexNumberPositions[w],o=n.x,a=n.y,e.drawImage(this.hexNumberCanvas[r],o,a,2*c,h,i,s,2*m,u),i+=2*m),n=this.hexNumberPositions[k],o=n.x,a=n.y,e.drawImage(this.hexNumberCanvas[r],o,a,2*c,h,i,s,2*m,u),i+=2*m,C="",b==te&&(C+="),Y"),5!=b&&7!=b||(C+=",X")}for(I=C.length,E=0;E<I;E++)o=C.charCodeAt(E)*d,a=0,c=d,h=l,m=d,u=l,e.drawImage(this.fontCanvasColors[0],o,a,c,h,i,s,m,u),i+=d;f+=1+x,s+=this.lineHeight,i=8}}}class oe{constructor(e){this.canvas1=e.canvas,this.canvas2=e.canvas2,this.canvas=this.canvas1,this.font=e.font,this.fontCanvas=this.font.fontCanvas,this.fontCanvasColors=this.font.fontCanvasColors,this.hexNumberCanvas=this.font.hexNumberCanvas,this.cmdCanvas=this.font.cmdCanvas,this.setFontMetrics(),this.resize()}resize(){this.font.getDevicePixelRatio(),window.innerWidth>=1300?this.canvas=this.canvas1:this.canvas=this.canvas2,this.setCanvasSize(),this.context=this.canvas.getContext("2d")}setFontMetrics(){let e=this.font.getDevicePixelRatio();this.fontCharWidth=this.font.fontCharWidth,this.fontCharHeight=this.font.fontCharHeight,this.hexNumberPositions=this.font.hexNumberPositions,this.cmdPositions=this.font.cmdPositions,this.lineHeight=this.fontCharHeight+6*e,this.cmdPositionX=23*this.fontCharWidth,this.cyclesPositionX=19*this.fontCharWidth,this.opCodePositionX=this.breakpointColWidth+4*this.fontCharWidth+20}setCanvasSize(){let e=this.font.getDevicePixelRatio(),t=2*this.lineHeight/e,n=30*this.fontCharWidth/e+8;this.canvas.width=n*e,this.canvas.height=t*e,this.canvas.style.width=n+"px",this.canvas.style.height=t+"px"}draw(){let e=this.context;e.fillStyle="#111111",e.fillRect(0,0,this.canvas.width,this.canvas.height);let t="PC     A  X  Y  SP   NV-BDIZC",n=4;this.font.drawText(e,t,8,n),n+=this.lineHeight,t="",t+=("0000"+y.getPC().toString(16)).substr(-4),t+="   ",t+=("00"+y.getRegA().toString(16)).substr(-2),t+=" ",t+=("00"+y.getRegX().toString(16)).substr(-2),t+=" ",t+=("00"+y.getRegY().toString(16)).substr(-2),t+=" ",t+=("00"+y.getRegX().toString(16)).substr(-2),t+="   ",y.getFlagN()?t+="1":t+="0",y.getFlagV()?t+="1":t+="0",t+="-",y.getFlagB()?t+="1":t+="0",y.getFlagD()?t+="1":t+="0",y.getFlagI()?t+="1":t+="0",y.getFlagZ()?t+="1":t+="0",y.getFlagC()?t+="1":t+="0",this.font.drawText(e,t,8,n)}}class ae{daySeconds=86400;canvasScale=1;borderWidth=32;borderHeight=42;highlightChar=!1;selectedChar=!1;interfaceReady=!1;sidVisualiser=null;charsetVisualiser=null;cubeMemory=null;disassembly=null;registers=null;isFullscreen=!1;controlsTimer=0;volume=80;saveVolume=80;loading=!1;trackMouseVolume=!1;loaded=!1;tokenId=!1;currentModes=0;displayedMode=0;versionRunning="normal";minted=[];m64Running=!0;patchUnlocked=!1;pal=1;filterResonanceRouting=135;filterModeMainVolume=31;filterDeltaAddress=172;filterCurrentDeltaAddress=43;filterDeltasAddress=3255;filterStartHigh=3251;filterDirection=40;filterCounter=169;sidShadow=112;sidFilterCutoffLowAddress=133;sidFilterCutoffHighAddress=134;sidFilterResonanceAddress=135;sidFilterModeVolumeAddress=136;filterCounterLow=41;filterCounterHigh=42;modePosition=108;seedPosition=3242;xorPosition=2697;fontLoaded(e){let t=new K({font:e});this.sidVisualiser=new Z({font:t,canvas:document.getElementById("sid"),canvas2:document.getElementById("sid-2")}),this.charsetVisualiser=new J({font:t,canvas:document.getElementById("charset")}),this.cubeMemory=new ee({font:t,canvas:document.getElementById("cube-memory")}),this.registers=new oe({font:t,canvas:document.getElementById("registers"),canvas2:document.getElementById("registers-2")}),this.disassembly=new se({font:t,canvas:document.getElementById("disassembly"),canvas2:document.getElementById("disassembly-2")}),this.interfaceReady=!0}init(e){this.token=e.token,this.index=e.index,this.m64_height=272,this.onscreen_canvas=document.getElementById("token-canvas"),this.onscreen_canvas.width=2*y.getPixelBufferWidth(),this.onscreen_canvas.height=2*this.m64_height,this.onscreen_context=this.onscreen_canvas.getContext("2d"),this.onscreen_context.imageSmoothingEnabled=!1,document.getElementById("token-unlock-text").style.display="none",document.getElementById("token-settings").style.display="none",document.getElementById("download-connected").style.display="none",document.getElementById("download-not-connected").style.display="block",this.initEvents(),this.audio_started=!1,document.addEventListener("click",(()=>{this.audio_started||y.start_audio()}))}initEvents(){this.startOverlay=document.getElementById("start-overlay"),this.startOverlay.addEventListener("click",(e=>{y.start_audio(),this.startWithAudio()})),document.getElementById("downloadPRG").addEventListener("click",(e=>{e.preventDefault(),this.downloadPRG()})),document.getElementById("token-prev").addEventListener("click",(e=>{e.preventDefault(),this.prev()})),document.getElementById("token-next").addEventListener("click",(e=>{e.preventDefault(),this.next()})),document.getElementById("set-mode-default").addEventListener("click",(e=>{e.preventDefault();let t=parseInt(document.getElementById("mode-default").value,10);this.setDefaultMode(t)})),window.addEventListener("resize",(e=>{this.resize()})),document.getElementById("token-canvas-holder").addEventListener("webkitfullscreenchange",(e=>{document.fullscreenElement||document.webkitFullscreenElement||(this.isFullscreen=!1,document.getElementById("token-canvas-holder").style.alignItems="flex-start"),this.resize(),setTimeout((()=>{this.resize()}),800)})),document.addEventListener("webkitfullscreenchange",(e=>{document.fullscreenElement||document.webkitFullscreenElement||(this.isFullscreen=!1,document.getElementById("token-canvas-holder").style.alignItems="flex-start"),this.resize(),setTimeout((()=>{this.resize()}),800)})),document.getElementById("token-canvas-holder").addEventListener("fullscreenchange",(e=>{document.fullscreenElement||document.webkitFullscreenElement||(this.isFullscreen=!1,document.getElementById("token-canvas-holder").style.alignItems="flex-start"),this.resize(),setTimeout((()=>{this.resize()}),800)})),document.addEventListener("fullscreenchange",(e=>{document.fullscreenElement||document.webkitFullscreenElement||(this.isFullscreen=!1,document.getElementById("token-canvas-holder").style.alignItems="flex-start"),this.resize(),setTimeout((()=>{this.resize()}),800)})),document.getElementById("token-canvas").addEventListener("dblclick",(e=>{e.preventDefault(),this.isFullscreen?this.exitFullscreen():this.fullscreen()})),document.getElementById("token-canvas").addEventListener("mousemove",(e=>{this.mouseMoveCanvas(e)})),document.getElementById("token-canvas").addEventListener("mousedown",(e=>{this.mouseDownCanvas(e)})),document.getElementById("token-canvas").addEventListener("mouseup",(e=>{this.mouseUpCanvas(e)})),document.getElementById("token-canvas").addEventListener("mouseleave",(e=>{this.mouseLeaveCanvas(e)})),document.getElementById("token-patch-text").addEventListener("click",(e=>{e.preventDefault(),e.target.classList.contains("version-link")&&("patched"==e.target.getAttribute("data-version")?this.loadPatchedPRG():this.loadPRG())})),document.getElementById("token-controls").addEventListener("mousemove",(e=>{this.mouseMoveCanvas(e)})),document.getElementById("token-fullscreen-icon").addEventListener("click",(e=>{e.preventDefault(),this.fullscreen()})),document.getElementById("token-fullscreen-exit-icon").addEventListener("click",(e=>{e.preventDefault(),this.exitFullscreen()})),document.getElementById("token-download-image").addEventListener("click",(e=>{e.preventDefault(),this.downloadImage()})),document.getElementById("download-connect").addEventListener("click",(e=>{this.index.connect()})),this.volumeOffElement=document.getElementById("volume-off-icon"),this.volumeUpElement=document.getElementById("volume-up-icon"),this.volumeDownElement=document.getElementById("volume-down-icon"),document.getElementById("volume-bar-holder").addEventListener("mousedown",(e=>{this.volumeTrackMouse(e),this.showControls()})),this.volumeOffElement.addEventListener("click",(e=>{this.toggleVolume()})),this.volumeUpElement.addEventListener("click",(e=>{this.toggleVolume()})),this.volumeDownElement.addEventListener("click",(e=>{this.toggleVolume()})),document.getElementById("tokenSetDefaultVersion")&&document.getElementById("tokenSetDefaultVersion").addEventListener("click",(e=>{let t=parseInt(document.getElementById("tokenDefaultVerion").value,10);this.setDefaultVersion(t)})),document.getElementById("m64-play").addEventListener("click",(()=>{this.m64Play()})),document.getElementById("m64-step").addEventListener("click",(()=>{this.m64Step()})),document.getElementById("sid-filter-manual").addEventListener("click",(e=>{this.setFilterManual(document.getElementById("sid-filter-manual").checked)})),document.getElementById("sid-filter-manual-2").addEventListener("click",(e=>{this.setFilterManual(document.getElementById("sid-filter-manual-2").checked)})),document.getElementById("sid-filter-value").addEventListener("change",(e=>{document.getElementById("sid-filter-value-2").value=document.getElementById("sid-filter-value").value,this.setFilterValueFromControl(e.target)})),document.getElementById("sid-filter-value").addEventListener("input",(e=>{document.getElementById("sid-filter-value-2").value=document.getElementById("sid-filter-value").value,this.setFilterValueFromControl(e.target)})),document.getElementById("sid-filter-value-2").addEventListener("change",(e=>{document.getElementById("sid-filter-value").value=document.getElementById("sid-filter-value-2").value,this.setFilterValueFromControl(e.target)})),document.getElementById("sid-filter-value-2").addEventListener("input",(e=>{document.getElementById("sid-filter-value").value=document.getElementById("sid-filter-value-2").value,this.setFilterValueFromControl(e.target)})),document.getElementById("sid-filter-type-low").addEventListener("click",(e=>{document.getElementById("sid-filter-type-low-2").checked=document.getElementById("sid-filter-type-low").checked,this.setFilterType()})),document.getElementById("sid-filter-type-low-2").addEventListener("click",(e=>{document.getElementById("sid-filter-type-low").checked=document.getElementById("sid-filter-type-low-2").checked,this.setFilterType()})),document.getElementById("sid-filter-type-band").addEventListener("click",(e=>{document.getElementById("sid-filter-type-band-2").checked=document.getElementById("sid-filter-type-band").checked,this.setFilterType()})),document.getElementById("sid-filter-type-band-2").addEventListener("click",(e=>{document.getElementById("sid-filter-type-band").checked=document.getElementById("sid-filter-type-band-2").checked,this.setFilterType()})),document.getElementById("sid-filter-type-high").addEventListener("click",(e=>{document.getElementById("sid-filter-type-high-2").checked=document.getElementById("sid-filter-type-high").checked,this.setFilterType()})),document.getElementById("sid-filter-type-high-2").addEventListener("click",(e=>{document.getElementById("sid-filter-type-high").checked=document.getElementById("sid-filter-type-high-2").checked,this.setFilterType()})),document.getElementById("sid-filter-voice-1").addEventListener("click",(e=>{document.getElementById("sid-filter-voice-1-2").checked=document.getElementById("sid-filter-voice-1").checked,this.setFilterRouting()})),document.getElementById("sid-filter-voice-1-2").addEventListener("click",(e=>{document.getElementById("sid-filter-voice-1").checked=document.getElementById("sid-filter-voice-1-2").checked,this.setFilterRouting()})),document.getElementById("sid-filter-voice-2").addEventListener("click",(e=>{document.getElementById("sid-filter-voice-2-2").checked=document.getElementById("sid-filter-voice-2").checked,this.setFilterRouting()})),document.getElementById("sid-filter-voice-2-2").addEventListener("click",(e=>{document.getElementById("sid-filter-voice-2").checked=document.getElementById("sid-filter-voice-2-2").checked,this.setFilterRouting()})),document.getElementById("sid-filter-voice-3").addEventListener("click",(e=>{document.getElementById("sid-filter-voice-3-2").checked=document.getElementById("sid-filter-voice-3").checked,this.setFilterRouting()})),document.getElementById("sid-filter-voice-3-2").addEventListener("click",(e=>{document.getElementById("sid-filter-voice-3").checked=document.getElementById("sid-filter-voice-3-2").checked,this.setFilterRouting()})),document.getElementById("unlockModes").addEventListener("click",(e=>{this.unlockModes()})),document.getElementById("unlockPatch").addEventListener("click",(e=>{this.unlockPatch()})),document.getElementById("tokenMode").addEventListener("click",(e=>{y.joystickPush(1,16),this.continueWithAudio(),setTimeout((function(){y.joystickRelease(1,16)}),200)})),window.addEventListener("mousemove",(e=>{this.mouseMove(e)})),window.addEventListener("mouseup",(e=>{this.mouseUp(e)})),document.getElementById("prgFilter_normal").addEventListener("click",(e=>{this.setDownloadFilterType("normal")})),document.getElementById("prgFilter_disabled").addEventListener("click",(e=>{this.setDownloadFilterType("disabled")})),document.getElementById("prgFilter_custom").addEventListener("click",(e=>{this.setDownloadFilterType("custom")})),document.getElementById("downloadVideo").addEventListener("click",(e=>{this.downloadVideo()})),this.setVolume(80)}m64Play(){this.m64Running=!this.m64Running,y.setRunning(this.m64Running);let e=document.getElementById("m64-play-play-icon"),t=document.getElementById("m64-play-pause-icon"),n=document.getElementById("m64-step");this.m64Running?(e.style.display="none",t.style.display="block",n.disabled=!0):(e.style.display="block",t.style.display="none",n.disabled=!1)}m64Step(){this.m64Running||(y.step(),y.draw(this.onscreen_context,this.onscreen_canvas.width,this.onscreen_canvas.height))}async setDefaultMode(e){if(e<0||e>3)return void this.showError("Invalid mode");let t=await this.token.getModes(this.tokenId);if(!1===t||e>t)return void this.showError("You have not unlocked this mode yet");let n=document.getElementById("set-mode-default");n.innerHTML='<img src="../images/spinner.svg" style="height: 16px;margin-right: 6px"/>Setting Default Mode...',n.setAttribute("disabled","disabled"),this.token.setDefaultMode(this.tokenId,e).on("error",(e=>{this.showError(e.message),n.innerHTML="Set Default Mode",n.removeAttribute("disabled"),this.checkAvailableModes()})).then((()=>{this.token.requestCheckChanges(this.tokenId),n.innerHTML="Set Default Mode",n.removeAttribute("disabled")}))}async setDefaultVersion(e){this.token.setDefaultVersion(this.tokenId,e)}showError(e){let t=document.getElementById("token-mode-error");t?(t.innerHTML='<span class="token-error-message"><span class="token-error-label">Error</span> '+e+"</span>",setTimeout((()=>{t.innerHTML=""}),4e3)):console.log("no error element!")}async unlockPatch(){if(!await this.token.isOwner(this.tokenId))return void this.showError("You need to be connected with an account which owns this ORAAND to unlock settings");if(this.patchUnlocked=await this.token.getPatchUnlocked(this.tokenId),this.patchUnlocked)return void this.showError("Patch already unlocked");if(!await this.token.checkCanUnlockPatch(this.tokenId))return void this.showError("Sorry, unlock criteria not yet met");let e=document.getElementById("token-mode-error"),t=document.getElementById("unlockPatch");t.innerHTML='<img src="../images/spinner.svg"/>Unlocking...',t.setAttribute("disabled","disabled"),this.token.unlockPatch(this.tokenId).on("error",(e=>{this.showError(e.message),this.checkAvailableModes()})).then((()=>{e.innerHTML="",t.removeAttribute("disabled"),t.style.display="none",this.loadPatchedPRG(),this.checkAvailableModes(),document.getElementById("token-unlock-complete-text").innerHTML="Patch Unlocked!",document.getElementById("token-unlock-complete-text").style.display="block"}))}getUnlockTime(e){let t="",n=0,i=0;if(e>this.daySeconds&&(n=Math.floor(e/this.daySeconds)),i=Math.ceil(e%this.daySeconds/3600),24==i&&(i=0,n++),t+=n+" day",1!=n&&(t+="s"),i>0&&(t+=", "+i+" hour",1!=i&&(t+="s")),0==n&&0==i){let n=Math.ceil(e/60);t+=n+" minute",1!=n&&(t+="s")}return t}downloadURL(e,t){document.getElementById("downloadVideo").innerHTML='<img style="height: 16px" src="../images/spinner.svg"/>&nbsp;Downloading...',document.getElementById("downloadVideo").setAttribute("disabled","disabled");var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(){var e=(window.URL||window.webkitURL).createObjectURL(this.response),n=document.createElement("a");n.href=e,n.target="_blank",n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),document.getElementById("downloadVideo").innerHTML="Download",document.getElementById("downloadVideo").removeAttribute("disabled","disabled")},n.onerror=e=>{},n.send()}downloadVideo(){let e="";console.log("patched = "),console.log(document.getElementById("video_version_patched").checked),document.getElementById("video_version_patched").checked&&(e="-patched");let t=0;for(let e=0;e<=3;e++){let n=document.getElementById("download-mode-"+e);if(n&&n.checked){t=e;break}}let n="original";document.getElementById("video_aspect_square").checked&&(n="square");let i="oraand-"+this.tokenId+"-mode"+t+e;"square"==n&&(i+="-sq"),i+=".mp4",this.downloadURL("https://oraand-video.nopsta.com/"+this.tokenId+"/"+i,i)}async checkAvailableModes(){console.log("check available modes!!!!!!!!!!!!!");let e=await this.token.getTimeSinceLastTransfer(this.tokenId);console.log("since last transfer = "+e);let t=await this.token.isOwner(this.tokenId);if(this.availableModes=0,this.currentModes=await this.token.getModes(this.tokenId),0==this.currentModes)document.getElementById("download-video-version").style.display="none",document.getElementById("download-mode").style.display="none",document.getElementById("download-aspect").style.display="none",document.getElementById("download-video-button-holder").style.display="none";else{let e="";for(let t=0;t<=this.currentModes;t++)e+='<label><input type="radio" name="download-mode" id="download-mode-'+t+'" ',0==t&&(e+=' checked="checked"'),e+=">Mode "+t+"</label>";document.getElementById("download-video-version").style.display="flex",document.getElementById("download-mode").style.display="flex",document.getElementById("download-aspect").style.display="flex",document.getElementById("download-modes").innerHTML=e,document.getElementById("download-video-button-holder").style.display="block"}if(this.updateModeText(),console.log("call get patch unlocked"),this.patchUnlocked=await this.token.getPatchUnlocked(this.tokenId),this.updatePatchText(),!1===e)return document.getElementById("token-unlock-text").style.display="none",document.getElementById("token-settings").style.display="none",document.getElementById("download-connected").style.display="none",void(document.getElementById("download-not-connected").style.display="block");let n="",i=!1,s=!1;if(t&&this.currentModes>0?(document.getElementById("token-settings").style.display="block",document.getElementById("mode-default").max=this.currentModes):document.getElementById("token-settings").style.display="none",this.patchUnlocked?document.getElementById("download-version").style.display="flex":(document.getElementById("download-version").style.display="none",document.getElementById("prgVersion_standard").checked=!0),this.currentModes>=3)document.getElementById("unlockModes").style.display="none",document.getElementById("token-unlock-text").innerHTML="",document.getElementById("token-unlock-text").style.display="none";else{if(e>8*this.daySeconds)this.availableModes=1;else{n="Mode 1 can be unlocked in ";let t=8*this.daySeconds-e;n+=this.getUnlockTime(t),n+=".<br/>Unlocking modes is free and will only cost the gas for the transaction. The unlock timer will reset if the token is transferred. Once a mode is unlocked, it will remain unlocked forever."}if(e>16*this.daySeconds)this.availableModes=2;else if(""==n){n="Mode 2 can be unlocked in ";let t=16*this.daySeconds-e;n+=this.getUnlockTime(t),n+=". <br/>Unlocking modes is free and will only cost the gas for the transaction. The unlock timer will reset if the token is transferred.  Once a mode is unlocked, it will remain unlocked forever."}if(e>32*this.daySeconds)this.availableModes=3;else if(""==n){n="Mode 3 can be unlocked in ";let t=32*this.daySeconds-e;n+=this.getUnlockTime(t),n+=". <br/>Unlocking modes is free and will only cost the gas for the transaction. The unlock timer will reset if the token is transferred.  Once a mode is unlocked, it will remain unlocked forever."}let o=this.currentModes+1,a="Unlock Mode "+this.availableModes;o<this.availableModes&&(a="Unlock Modes "+o+" to "+this.availableModes),s=!1,this.availableModes==this.currentModes?(a="",document.getElementById("unlockModes").style.display="none",document.getElementById("unlockModes").innerHTML=a):(t?(document.getElementById("unlockModes").innerHTML=a,document.getElementById("unlockModes").removeAttribute("disabled")):(a="",document.getElementById("unlockModes").style.display="none",document.getElementById("unlockModes").innerHTML=a,this.availableModes>0&&(n="Connect with the account which owns this token to unlock "+this.availableModes+" Mode",1!=this.availableModes&&(n+="s"))),0==this.availableModes||""==a?document.getElementById("unlockModes").style.display="none":(i=!0,s=!0,""!=a&&(document.getElementById("unlockModes").style.display="flex"))),""!=a&&(n=""),""!=n&&(i=!0),document.getElementById("token-unlock-text").innerHTML=n,document.getElementById("token-unlock-text").style.display=""==n?"none":"block"}this.patchUnlocked=await this.token.getPatchUnlocked(this.tokenId);let o=document.getElementById("patchUnlockControls");if(document.getElementById("unlockPatch").style.display="flex",document.getElementById("unlockPatch").innerHTML="Unlock Patch",document.getElementById("unlockPatch").removeAttribute("disabled"),this.patchUnlocked||!t)o.style.display="none";else if(e>64*this.daySeconds)o.style.display="block",i=!0,s=!0;else if(o.style.display="none",t&&e>31*this.daySeconds){n="A patch will be available in ";let t=64*this.daySeconds-e;n+=this.getUnlockTime(t),n+=". This patch will be free and only cost gas. We hope this patch will solve any issues experienced.",document.getElementById("token-unlock-text").innerHTML=n,document.getElementById("token-unlock-text").style.display="block",i=!0}document.getElementById("mode-controls-holder").style.display=i?"flex":"none",document.getElementById("unlock-buttons").style.display=s?"flex":"none"}updateModeText(){let e="Mode "+this.modeDisplayed;this.currentModes>0&&(e+=" of "+this.currentModes),e+='<img src="/images/next.svg">',document.getElementById("tokenMode").innerHTML=e}updatePatchText(){let e=document.getElementById("token-patch-text");if(this.patchUnlocked){let t="";t="standard"==this.versionRunning?'<span class="version-active">Standard Version</span><span class="version-separator">/</span><a href="#" class="version-link" data-version="patched">Patched Version (May contain flashing images)</a>':'<a href="#" class="version-link" data-version="standard">Standard Version</a><span class="version-separator">/</span><span class="version-active">Patched Version</span>',e.style.display="block",e.innerHTML=t,document.getElementById("download-video-version").style.display="flex"}else e.innerHTML="",e.style.display="none",document.getElementById("download-video-version").style.display="none"}async unlockModes(){if(!await this.token.isOwner(this.tokenId))return void this.showError("You need to be connected with an account which owns this token to unlock settings");if(this.currentModes=await this.token.getModes(this.tokenId),this.currentModes>=3)return;if(this.currentModes>=this.availableModes)return void this.showError("All available modes have been unlocked");let e=this.availableModes;if(e=parseInt(e,10),isNaN(e)||e<0||e>3)return void this.showError("Invalid Mode");if(this.currentModes>=e)return void this.showError("Mode already unlocked");if(!await this.token.checkCanUnlockModes(this.tokenId,e))return void this.showError("Sorry, unlock criteria not yet met");let t=document.getElementById("token-mode-error"),n=document.getElementById("unlockModes");n.innerHTML='<img src="../images/spinner.svg"/>Unlocking...',n.setAttribute("disabled","disabled"),this.token.unlockModes(this.tokenId,e).on("error",(e=>{this.showError(e.message),this.checkAvailableModes()})).then((()=>{t.innerHTML="",n.removeAttribute("disabled"),n.style.display="none",this.setTokenId(this.tokenId),this.token.requestCheckChanges(this.tokenId),document.getElementById("token-unlock-complete-text").innerHTML="New Mode Unlocked!",document.getElementById("token-unlock-complete-text").style.display="block",document.getElementById("token-controls-text").innerHTML="You can use the spacebar to change mode, or on real hardware the button on a joystick plugged into port 2"}))}setFilterType(){console.log("set filter type");let e=15;document.getElementById("sid-filter-type-low").checked&&(e|=16),document.getElementById("sid-filter-type-band").checked&&(e|=32),document.getElementById("sid-filter-type-high").checked&&(e|=64),console.log(e.toString(16)),y.cpuWrite(this.sidFilterModeVolumeAddress,e)}setFilterRouting(){let e=240;document.getElementById("sid-filter-voice-1").checked&&(e|=1),document.getElementById("sid-filter-voice-2").checked&&(e|=2),document.getElementById("sid-filter-voice-3").checked&&(e|=4),y.cpuWrite(this.sidFilterResonanceAddress,e)}setFilterValue(e){let t=7&e,n=(4088&e)>>3;y.cpuWrite(this.sidFilterCutoffLowAddress,t),y.cpuWrite(this.sidFilterCutoffHighAddress,n)}setFilterValueFromControl(){let e=document.getElementById("sid-filter-value").value;this.setFilterValue(e)}initSaveFilterValues(){console.log("init save filter values"),this.saveResonanceRouting=!1,this.saveFilterDeltaAddress=!1,this.saveFilterCurrentDeltaAddress=!1,document.getElementById("sid-filter-manual").checked=!1,this.setFilterManual(!1)}saveFilterValues(){this.saveResonanceRouting=y.cpuRead(this.filterResonanceRouting),console.log(" ssverrr "+this.saveResonanceRouting),this.saveFilterCurrentDeltaAddress=y.cpuRead(this.filterCurrentDeltaAddress)}resetFilter(){if(void 0===this.prg_data||0==this.prg_data.length)return;let e=122==this.prg_data[1353];switch(console.log(this.prg_data[1353].toString(16)),console.log("reset filter:"+e+"."),console.log("rst filt,,"),this.saveResonanceRouting=244,y.cpuWrite(this.filterResonanceRouting,this.saveResonanceRouting),e?(y.cpuWrite(this.filterCounter,1),y.cpuWrite(this.filterCounterLow,100),y.cpuWrite(this.filterCounterHigh,1),y.cpuWrite(this.filterDirection,1),y.cpuWrite(this.sidFilterCutoffLowAddress,133)):(y.cpuWrite(this.filterDirection,1),y.cpuWrite(this.filterCounter,1),y.cpuWrite(120,this.sidFilterCutoffLowAddress)),y.cpuWrite(this.filterDeltasAddress,this.saveFilterDeltasAddress0),y.cpuWrite(this.filterDeltasAddress+1,this.saveFilterDeltasAddress1),y.cpuWrite(this.filterDeltasAddress+2,this.saveFilterDeltasAddress2),y.cpuWrite(this.filterDeltasAddress+3,this.saveFilterDeltasAddress3),y.cpuWrite(this.filterStartHigh,this.saveFilterStartHigh0),y.cpuWrite(this.filterStartHigh+1,this.saveFilterStartHigh1),y.cpuWrite(this.filterStartHigh+2,this.saveFilterStartHigh2),y.cpuWrite(this.filterStartHigh+3,this.saveFilterStartHigh3),this.modeDisplayed){case 0:y.cpuWrite(this.sidFilterCutoffHighAddress,this.saveFilterStartHigh0),y.cpuWrite(this.filterDeltaAddress,this.saveFilterDeltasAddress0);break;case 1:console.log(" mods"),y.cpuWrite(this.sidFilterCutoffHighAddress,this.saveFilterStartHigh1),y.cpuWrite(this.filterDeltaAddress,this.saveFilterDeltasAddress1);break;case 2:y.cpuWrite(this.sidFilterCutoffHighAddress,this.saveFilterStartHigh2),y.cpuWrite(this.filterDeltaAddress,this.saveFilterDeltasAddress2);break;case 3:y.cpuWrite(this.sidFilterCutoffHighAddress,this.saveFilterStartHigh3),y.cpuWrite(this.filterDeltaAddress,this.saveFilterDeltasAddress3)}}setFilterManual(e){document.getElementById("sid-filter-manual").checked=e,document.getElementById("sid-filter-manual-2").checked=e,console.log("set filter manuas "+e);let t=document.getElementById("sid-manual-controls"),n=document.getElementById("sid-manual-controls-2");e?(t.style.display="flex",t.style.flexDirection="column",n.style.display="flex",n.style.flexDirection="column",this.firstTimeSwitchedToManualFiltering&&(document.getElementById("sid-filter-voice-1").checked=!1,document.getElementById("sid-filter-voice-2").checked=!1,document.getElementById("sid-filter-voice-3").checked=!0,document.getElementById("sid-filter-voice-1-2").checked=!1,document.getElementById("sid-filter-voice-2-2").checked=!1,document.getElementById("sid-filter-voice-3-2").checked=!0,this.firstTimeSwitchedToManualFiltering=!1,document.getElementById("sid-filter-type-low").checked=!0,document.getElementById("sid-filter-type-band").checked=!1,document.getElementById("sid-filter-type-high").checked=!1,document.getElementById("sid-filter-type-low-2").checked=!0,document.getElementById("sid-filter-type-band-2").checked=!1,document.getElementById("sid-filter-type-high-2").checked=!1),this.setFilterType(),this.saveFilterValues(),this.setFilterRouting(),console.log("set delta values to zaer"),y.cpuWrite(this.filterDeltaAddress,0),y.cpuWrite(this.filterCurrentDeltaAddress,0),y.cpuWrite(this.filterDeltasAddress,0),y.cpuWrite(this.filterDeltasAddress+1,0),y.cpuWrite(this.filterDeltasAddress+2,0),y.cpuWrite(this.filterDeltasAddress+3,0),this.setFilterValueFromControl()):(t.style.display="none",n.style.display="none",this.resetFilter(),console.log("turn off manual control"))}showControls(){document.getElementById("token-controls").style.opacity=1,this.controlsTimer=1e3}hideControls(){document.getElementById("token-controls").style.opacity=0}mouseMoveCanvas(e){let t=e.target.getBoundingClientRect(),n=(e.clientX-t.left)/this.canvasScale-this.borderWidth,i=e.clientY-t.top;if(i=(e.clientY-t.top)/this.canvasScale-this.borderHeight,n=Math.floor(n/8),i=Math.floor(i/8)+1,n>=0&&n<40&&i>=0&&i<25){let e=n+40*i,t=(y.cpuRead(93)<<8)+e,s=y.cpuRead(t);this.charsetVisualiser.setHighlightChar(s),this.highlightChar=s}else this.highlightChar=!1;this.showControls()}mouseDownCanvas(e){!1!==this.highlightChar&&(this.selectedChar=this.highlightChar,this.charsetVisualiser.setSelectedChar(this.highlightChar))}mouseUpCanvas(e){}mouseLeaveCanvas(e){!1!==this.selectedChar&&(this.charsetVisualiser.setSelectedChar(this.selectedChar),this.charsetVisualiser.setHighlightChar(this.selectedChar))}exitFullscreen(){this.isFullscreen=!1,document.exitFullscreen?document.exitFullscreen():void 0!==document.webkitCancelFullScreen&&document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),this.resize()}fullscreen(){this.isFullscreen=!0;var e=document.getElementById("token-canvas-holder");e.style.alignItems="center",void 0!==e.requestFullscreen&&e.requestFullscreen?e.requestFullscreen():void 0!==e.webkitRequestFullscreen&&e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),this.resize(),setTimeout((()=>{this.isFullscreen=!0,this.resize()}),800)}downloadImage(){y.downloadImage("ORAAND"+this.tokenId+".png")}volumeTrackMouse(e){this.trackMouseVolume=!0,this.mouseMove(e)}mouseMove(e,t){if(this.trackMouseVolume){let t=document.getElementById("volume-bar-holder").getBoundingClientRect(),n=e.clientX-t.x;n<0&&(n=0),n>100&&(n=100),this.setVolume(n),this.showControls()}}mouseUp(e){this.trackMouseVolume=!1}toggleVolume(){0!=this.volume?(this.saveVolume=this.volume,this.setVolume(0)):this.setVolume(this.saveVolume)}setVolume(e){0==e?(this.volumeOffElement.style.display="block",this.volumeUpElement.style.display="none",this.volumeDownElement.style.display="none"):e<50?(this.volumeOffElement.style.display="none",this.volumeUpElement.style.display="none",this.volumeDownElement.style.display="block"):(this.volumeOffElement.style.display="none",this.volumeUpElement.style.display="block",this.volumeDownElement.style.display="none");let t=e;document.getElementById("volume-bar-value").style.width=t+"px",t-=5,document.getElementById("volume-value").style.left=t+"px",this.volume=e,y.setVolume(e/100)}resize(){window.devicePixelRatio,this.canvasScale=2;let e=document.getElementById("token-controls"),t=document.getElementById("token-canvas-holder"),n=void 0!==t.requestFullscreen||void 0!==t.webkitRequestFullscreen;if(n||(document.getElementById("token-fullscreen-icon").style.display="none",document.getElementById("token-fullscreen-exit-icon").style.display="none"),this.isFullscreen){let e=t.clientWidth,o=t.clientHeight;var i=e/y.getPixelBufferWidth(),s=o/this.m64_height;this.scale=i>s?s:i,this.scale=Math.floor(this.scale),n&&(document.getElementById("token-fullscreen-icon").style.display="none",document.getElementById("token-fullscreen-exit-icon").style.display="block"),this.onscreen_canvas.width=y.getPixelBufferWidth()*this.scale,this.onscreen_canvas.height=this.m64_height*this.scale,this.onscreen_canvas.style.width=this.onscreen_canvas.width+"px",this.onscreen_canvas.style.height=this.onscreen_canvas.height+"px",this.onscreen_context=this.onscreen_canvas.getContext("2d"),this.onscreen_context.imageSmoothingEnabled=!1}else{if(e.style.bottom="0",this.scale=2,window.innerWidth<392){let e=y.getPixelBufferWidth(),t=this.m64_height,n=window.innerWidth,i=t*n/e;this.onscreen_canvas.width=y.getPixelBufferWidth(),this.onscreen_canvas.height=this.m64_height,this.onscreen_canvas.style.width=n+"px",this.onscreen_canvas.style.height=i+"px",this.onscreen_context=this.onscreen_canvas.getContext("2d"),this.onscreen_context.imageSmoothingEnabled=!1}else if(window.innerWidth<1300){let e=document.getElementById("token-view-holder"),t=e.clientWidth,o=e.clientHeight,a=y.getPixelBufferWidth(),d=this.m64_height;i=Math.floor(t/a),s=o/d,this.scale=i,this.scale>2&&(this.scale=i>s?s:i),this.scale=Math.floor(this.scale),0==this.scale&&(this.scale=1),n&&(document.getElementById("token-fullscreen-icon").style.display="block",document.getElementById("token-fullscreen-exit-icon").style.display="none"),this.onscreen_canvas.width=y.getPixelBufferWidth()*this.scale,this.onscreen_canvas.height=this.m64_height*this.scale,this.onscreen_canvas.style.width=this.onscreen_canvas.width+"px",this.onscreen_canvas.style.height=this.onscreen_canvas.height+"px",this.onscreen_context=this.onscreen_canvas.getContext("2d"),this.onscreen_context.imageSmoothingEnabled=!1}else this.scale=2,n&&(document.getElementById("token-fullscreen-icon").style.display="block",document.getElementById("token-fullscreen-exit-icon").style.display="none"),e.style.left=0,e.style.right=0,this.onscreen_canvas.width=y.getPixelBufferWidth()*this.scale,this.onscreen_canvas.height=this.m64_height*this.scale,this.onscreen_canvas.style.width=this.onscreen_canvas.width+"px",this.onscreen_canvas.style.height=this.onscreen_canvas.height+"px",this.onscreen_context=this.onscreen_canvas.getContext("2d"),this.onscreen_context.imageSmoothingEnabled=!1;this.sidVisualiser&&this.sidVisualiser.resize(),this.disassembly&&(this.disassembly.resize(),this.registers.resize()),this.cubeMemory&&this.cubeMemory.resize(),this.charsetVisualiser&&this.charsetVisualiser.resize()}y.isReady()&&y.draw(this.onscreen_context,this.onscreen_canvas.width,this.onscreen_canvas.height);let o=document.getElementById("volume-bar-holder");o&&(window.innerWidth>431?o.style.display="block":o.style.display="none")}async connectedStatusChanged(){if(!1===this.tokenId)return!1;await this.checkOwner(),this.checkAvailableModes();let e=this.index.getConnectedStatus(),t=this.index.getConnectedStatus();"connected"==e||1==t?(document.getElementById("download-connected").style.display="block",document.getElementById("download-not-connected").style.display="none"):(document.getElementById("download-connected").style.display="none",document.getElementById("download-not-connected").style.display="block")}async next(){let e=this.tokenId;e<await this.token.getTokenCount()-1?e++:e=0,this.index.gotoURL("/oraand/"+e)}async prev(){let e=this.tokenId;e>0?e--:e=await this.token.getTokenCount()-1,this.index.gotoURL("/oraand/"+e)}getData(){}setDownloadFilterType(e){document.getElementById("download-custom-settings").style.display="custom"==e?"block":"none"}async downloadPRG(){let e="oraand"+this.tokenId,t=document.getElementById("prgPALNTSC_PAL").checked,n="normal";this.patchUnlocked&&document.getElementById("prgVersion_patched").checked&&(n="patched"),e+=t?"-pal":"-ntsc";let i=244,s=31;if(document.getElementById("prgFilter_disabled").checked&&(i=240,s=31),document.getElementById("prgFilter_custom").checked){i=0,document.getElementById("prgDownloadFilter1").checked&&(i|=1),document.getElementById("prgDownloadFilter2").checked&&(i|=2),document.getElementById("prgDownloadFilter3").checked&&(i|=4);let e=document.getElementById("prgDownloadResonance").value;e=parseInt(e,10),isNaN(e)||(i|=e<<4),s=15,document.getElementById("prgDownloadLowpass").checked&&(s|=16),document.getElementById("prgDownloadBandpass").checked&&(s|=32),document.getElementById("prgDownloadHighpass").checked&&(s|=64)}let o=document.getElementById("downloadPRG");if(o.innerHTML='<img src="../images/spinner.svg" height="16"> downloading...',o.setAttribute("disabled","disabled"),"normal"==n){e+=".prg";let n=await this.token.getData(this.tokenId,t,i,s);(0,g.L)(n,e.toLowerCase(),"application/prg")}else{e+="-patched",e+=".prg";let n=await this.token.getPatchedPRG(this.tokenId,t,i,s);(0,g.L)(n,e.toLowerCase(),"application/prg")}o.innerHTML="Download",o.removeAttribute("disabled","disabled")}async loadPatchedPRG(){if(await this.token.getPatchUnlocked(this.tokenId))if(this.showLoadingOverlay(),this.prg_data=await this.token.getPatchedPRG(this.tokenId,this.pal,this.filterResonanceRouting,this.filterModeMainVolume),this.hideLoadingOverlay(),0!=this.prg_data){this.prg_data_original=new Uint8Array(this.prg_data.length);for(let e=0;e<this.prg_data.length;e++)this.prg_data_original[e]=this.prg_data[e];this.startWithAudio(),this.hideLoadingOverlay(),this.versionRunning="patched",this.updatePatchText()}else this.displayNotReady();else this.showError("Patch not unlocked")}continueWithAudio(){y.start_audio()}startWithAudio(){y.start_audio(),y.set_prg(this.prg_data,(()=>{this.cubeMemory&&this.cubeMemory.setRedrawRequired(!0),setTimeout((()=>{this.cubeMemory&&this.cubeMemory.setRedrawRequired(!0)}),200)})),this.resize(),setTimeout((()=>{this.resize()}),200)}reset(){y.reset()}async loadPRG(e){if(void 0!==e&&!1!==e){this.prg_data=e,this.seed=this.prg_data[this.seedPosition-2047],this.xor=this.prg_data[this.xorPosition-2047];let t="0x"+("00"+this.seed.toString(16)).substr(-2)+" 0x"+("00"+this.xor.toString(16)).substr(-2);document.getElementById("token-parameters").innerHTML=t}else this.showLoadingOverlay(),this.prg_data=await this.token.getData(this.tokenId,1,0,0),this.hideLoadingOverlay();if(0!=this.prg_data){this.prg_data_original=new Uint8Array(this.prg_data.length);for(let e=0;e<this.prg_data.length;e++)this.prg_data_original[e]=this.prg_data[e];this.startWithAudio(),this.hideLoadingOverlay(),this.versionRunning="standard",this.updatePatchText(),this.cubeMemory&&this.cubeMemory.setRedrawRequired(!0),this.saveFilterStartHigh0=this.prg_data[this.filterStartHigh-2049+2],console.log("lll "+this.saveFilterStartHigh0),this.saveFilterStartHigh1=this.prg_data[this.filterStartHigh+1-2049+2],this.saveFilterStartHigh2=this.prg_data[this.filterStartHigh+2-2049+2],this.saveFilterStartHigh3=this.prg_data[this.filterStartHigh+3-2049+2],this.saveFilterDeltasAddress0=this.prg_data[this.filterDeltasAddress-2049+2],console.log("jj "+this.saveFilterDeltasAddress0),this.saveFilterDeltasAddress1=this.prg_data[this.filterDeltasAddress+1-2049+2],this.saveFilterDeltasAddress2=this.prg_data[this.filterDeltasAddress+2-2049+2],this.saveFilterDeltasAddress3=this.prg_data[this.filterDeltasAddress+3-2049+2]}else this.displayNotReady()}startLoadToken(e){document.getElementById("mode-controls-holder").style.display="none";let t=document.getElementById("token-ownership-status");t.innerHTML="";let n=!1;-1==this.minted.indexOf(e)&&(n=this.index.mint.getMintData(e),this.minted.push(e));let i=document.getElementById("token-mint-information");if(!1===n)i.innerHTML="",i.style.display="none",t.style.display="block";else{t.style.display="block";let s="";s+='<div class="token-minted-heading">Congratulations, you have minted ORAAND '+e+"!</div>",s+='<div class="mint-status-row">',s+='  <div class="mint-status-heading">Transaction Hash</div>',s+='  <div class="mint-status-value"><a href="https://etherscan.io/tx/'+n.transactionHash+'" target="_blank">'+n.transactionHash+"</a></div>",s+="</div>",s+='<div class="mint-status-row">',s+='  <div class="mint-status-heading">Block Number</div>',s+='  <div class="mint-status-value"><a target="_blank" href="https://etherscan.io/block/'+n.blockNumber+'">'+n.blockNumber+"</a></div>",s+="</div>",i.innerHTML=s,i.style.display="block"}}async setTokenId(e){if(this.isOwner=!1,this.ownerBalance=0,this.loaded=!1,e=parseInt(e,10),document.getElementById("token-unlock-complete-text").innerHTML="",document.getElementById("token-unlock-complete-text").style.display="none",e<0)return this.hideLoadingOverlay(),void this.index.showNotFound();if(e>=await this.token.getTokenCount())return this.hideLoadingOverlay(),void this.index.showNotFound();this.showLoadingOverlay(),this.hideControls(),await this.token.setTokenId(e),this.tokenId=e;let t=await this.token.getData(e,1,0,0);const n=t;n[647].toString(16),n[1192].toString(16),this.loadPRG(t),this.name="ORAAND "+e,document.getElementById("page-title").innerHTML=this.name;let i='<p>This page contains an <a href="https://github.com/nopsta/minimal64" target="_blank">emulator</a> running the 2048 byte Commodore 64 PRG for '+this.name+".</p>";i+="<p>The PRG for each ORAAND is generated on the Ethereum blockchain and can be downloaded from this page ",i+=' or as a Base 64 encoded string by calling the \'<a href="https://etherscan.io/address/0xf21ab54111eb5049e42f4794d2724658baa42fc1#readContract#F12" target="_blank">getTokenPRGBase64</a>\' function of the ORAAND Contract.',i+='<br/>The PRG can be run on Commodore 64 computers and emulators such as <a href="https://vice-emu.sourceforge.io/" target="_blank">VICE</a>.',i+="When viewed on marketplaces such as OpenSea, the PRG will be displayed using an emulator which is stored on the Ethereum blockchain.",i+="</p>",document.getElementById("token-description").innerHTML=i,document.getElementById("video_version_standard").checked=!0,this.sidVisualiser&&this.sidVisualiser.resize(),this.loaded=!0,this.initSaveFilterValues(),this.firstTimeSwitchedToManualFiltering=!0,this.checkAvailableModes(),this.checkOwner(),this.modeDisplayed=0,this.updateModeText(),this.cubeMemory&&this.cubeMemory.setRedrawRequired(),this.charsetVisualiser.setHighlightChar(2),this.charsetVisualiser.setSelectedChar(2),this.selectedChar=2,this.charsetVisualiser.setRedrawRequired(),this.sidVisualiser.checkInViewport(),this.disassembly.checkInViewport(),this.connectedStatusChanged()}checkVideo(){}showLoadingOverlay(){document.getElementById("loading-message").innerHTML='<img src="../images/spinner.svg" height="16"> loading...',document.getElementById("loading-overlay").style.display="flex",this.loading=!0}hideLoadingOverlay(){this.loading=!1,document.getElementById("loading-overlay").style.display="none"}async checkOwner(){let e=document.getElementById("token-ownership-status");this.isOwner=await this.token.isOwner(this.tokenId);let t="";if(this.isOwner)t='<div class="token-is-owner">You Own This</div>';else{let e=await this.token.getTokenOwner(this.tokenId);void 0!==e&&e&&(t='Owned by <span class="text-highlight">'+e+"</span>")}t+='<div style="margin-top: 10px; display: flex">',t+='<a href="https://opensea.io/assets/ethereum/0xf21ab54111eb5049e42f4794d2724658baa42fc1/'+this.tokenId+'" target="_blank" class="button" style="display: flex; justify-content: center; width: 130px; height: 40px; padding: 0; margin-right: 10px">OpenSea</a>',t+='<a href="https://nopsta.com/oraand/i/'+this.tokenId+'.png" target="_blank" class="button" download="oraand-'+this.tokenId+'"  style="display: flex;  justify-content: center; width: 130px; height: 40px; padding: 0">Download Image</a>',t+="</div>",e.innerHTML=t,this.timeOwned=await this.token.getTimeSinceLastTransfer(this.tokenId);let n=document.getElementById("token-since-last-transfer"),i=Math.floor(this.timeOwned/86400);if(0==i){let e='<span class="text-highlight">'+this.timeOwned;e+=" second",1!=e&&(e+="s"),e+="</span>",e+=" since last transfer",n.innerHTML=e}else i='<span class="text-highlight">'+i,i+=" day",1!=i&&(i+="s"),i+="</span>",i+=" since last transfer",n.innerHTML=i}displayParams(){}checkSettings(){let e=!1,t=7&y.cpuRead(87);this.filterRouting!==t&&(this.filterRouting=t,e=!0),t=255&y.cpuRead(48),this.filterValue!==t&&(this.filterValue=t,e=!0),t=255&y.cpuRead(49),this.filterMode!==t&&(this.filterMode=t,e=!0),t=255&y.cpuRead(51),this.detuneMode!==t&&(this.detuneMode=t,e=!0),t=255&y.cpuRead(52),this.rootNoteMode!==t&&(this.rootNoteMode=t,e=!0),t=255&y.cpuRead(53),this.journeyMode!==t&&(this.journeyMode=t,e=!0),this.journeyMode||(t=15&y.cpuRead(50),this.colorOffset!==t&&(this.colorOffset=t,e=!0)),e&&this.settingsUpdated()}update(e,t){if(this.interfaceReady){this.m64Running&&y.update(t)&&y.draw(this.onscreen_context,this.onscreen_canvas.width,this.onscreen_canvas.height);var n=y.cpuRead(this.modePosition);let e=document.getElementById("sid-filter-manual").checked;e&&y.cpuWrite(this.filterDeltaAddress,0),n!=this.modeDisplayed&&(this.modeDisplayed=n,this.updateModeText(),y.cpuWrite(this.filterDeltaAddress,0),this.setFilterManual(e),console.log("mode c"+n)),3==this.modeDisplayed&&this.cubeMemory.setRedrawRequired(!0),this.disassembly.draw(),this.registers.draw(),this.sidVisualiser.draw(t),this.charsetVisualiser.draw(t),this.cubeMemory.draw(t),this.controlsTimer>0&&(this.controlsTimer-=t,this.controlsTimer<0&&(this.controlsTimer=0,this.hideControls())),y.get_audio_playing()||this.loading?this.startOverlay.style.display="none":this.startOverlay.style.display="flex"}}}class de{index=null;token=null;numberMinted=0;maxTokens=1024;mintCounter=0;currentMintIndex=0;mintData=[];sessionMints={};mintInProgress=!1;tokenPRGLoaded=!1;init(e){this.index=e.index,this.token=e.token,this.mintData=[],this.initEvents()}initEvents(){document.getElementById("mint-button").addEventListener("click",(e=>{this.mint()})),document.getElementById("mint-connect").addEventListener("click",(e=>{this.index.connect()})),document.getElementById("mint-result").addEventListener("click",(e=>{e.target.classList.contains("token-mint-link")&&(e.preventDefault(),this.index.gotoURL(e.target.href))})),document.getElementById("mint-switch").addEventListener("click",(e=>{this.token.switchToMainnet()})),this.connectElement=document.getElementById("mint-connect"),this.mintElement=document.getElementById("mint-mint"),this.switchElement=document.getElementById("mint-switch")}setNumberMinted(e){this.numberMinted=e,e==this.maxTokens&&(document.getElementById("mint-mint").innerHTML="All Tokens have been minted")}async show(){document.getElementById("mint-result").innerHTML="",document.getElementById("mint-status").innerHTML="",this.index.loadMintPrice(),this.index.loadNumberMinted(),this.mintInProgress=!1,console.log("show"),this.checkBrowser()?this.token.isConnected()?(await this.token.checkAccounts(),this.connected(),this.checkNumberMinted(),this.checkBalance()):"switch"==this.index.getConnectedStatus()?this.wrongNetwork():this.disconnected():(this.connectElement.style.display="none",this.mintElement.style.display="none")}checkBrowser(){let e=document.getElementById("browser-check-message");return void 0===window.ethereum?(e.innerHTML='<div>To Mint tokens you will need to install <a href="https://metamask.io/" target="_blank">MetaMask</a> and connect a wallet</div>',!1):(e.innerHTML="",!0)}connected(){console.log("connected!"),this.connectElement.style.display="none",this.mintElement.style.display="block",this.switchElement.style.display="none",this.showMintControls()}disconnected(){console.error("disconnected"),this.connectElement.style.display="block",this.mintElement.style.display="none",this.switchElement.style.display="none",this.hideMintControls()}wrongNetwork(){console.log("wrong network!"),this.connectElement.style.display="none",this.mintElement.style.display="none",this.switchElement.style.display="block"}hideMintControls(){this.mintInProgress=!0,document.getElementById("mint-button").innerHTML='<img src="../images/spinner.svg"/>Minting...',document.getElementById("mint-button").setAttribute("disabled","disabled")}showMintControls(){this.mintInProgress=!1,document.getElementById("mint-button").innerHTML="Mint New Token (0.0256 eth)",document.getElementById("mint-button").style.display="flex",document.getElementById("mint-button").removeAttribute("disabled")}async checkNumberMinted(){this.numberMinted=await this.token.getTokenCount(),this.numberMinted==this.maxTokens?(document.getElementById("mint-button").style.display="none",document.getElementById("mint-status").innerHTML='<span style="font-weight: bold; font-size: 20px">All Tokens Minted</span>'):(document.getElementById("mint-button").style.display="flex",document.getElementById("mint-status").innerHTML="")}async checkBalance(){this.balance=await this.token.checkBalance();let e="",t=document.getElementById("mint-account-balance");this.balance>0?(e="You currently own "+this.balance+" ORAAND Token",1!=this.balance&&(e+="s"),this.balance>8&&(e+="<p><strong>You cannot mint if your account holds more than 16 tokens</strong></p>"),t.style.display="block"):t.style.display="none",t.innerHTML=e,this.balance>=16?(document.getElementById("mint-button").style.display="none",document.getElementById("mint-status").innerHTML='<span style="font-weight: bold; font-size: 20px">Sorry, you cannot mint if your wallet holds 16 or more ORAAND tokens</span>'):(document.getElementById("mint-button").style.display="flex",document.getElementById("mint-status").innerHTML="")}async mint(){if(!this.checkBrowser())return;if(this.mintInProgress)return;if(document.getElementById("mint-result").innerHTML="",await this.token.connect(),!this.token.isConnected())return void alert("please connect");if(await this.checkNumberMinted(),this.numberMinted==this.maxTokens)return;let e=this.mintCounter;this.mintData[e]={lastStatus:"",transactionHash:"",blockHash:"",blockNumber:"",confirmations:0},this.currentMintIndex=e,this.mintCounter++,this.confirmationCount=0,this.hideMintControls(),this.mintReceipt=!1,y.start_audio(),y.reset(),this.tokenPRGLoaded=!1,this.token.mint().once("sending",(t=>{this.updateStatus(e,"Sending...",t)})).once("sent",(t=>{this.updateStatus(e,"Sent",t)})).once("transactionHash",(t=>{this.updateStatus(e,"Transaction Hash",t)})).once("receipt",(t=>{this.updateStatus(e,"Receipt",t)})).on("confirmation",((t,n,i)=>{this.updateStatus(e,"Confirmation",{confNumber:t,receipt:n,blockHash:i})})).on("error",(t=>{this.showMintControls(),this.displayMintError(e,t)})).then((e=>{this.mintReceipt=e,this.displayMintStatus(this.currentMintIndex)}))}displayMintError(e,t){let n='<span class="token-error-label">Error</span> '+t.message;document.getElementById("mint-result").innerHTML=n,this.mintData[this.currentMintIndex].lastStatus="Error",this.displayMintStatus(this.currentMintIndex)}updateStatus(e,t,n){document.getElementById("mint-button").innerHTML="Sending..."==t?'<img src="../images/spinner.svg"/>'+t:'<img src="../images/spinner.svg"/>Waiting for Confirmation',this.mintData[e].lastStatus=t,"Transaction Hash"==t&&(this.mintData[e].transactionHash=n),"Receipt"==t&&(this.mintData[e].blockHash=n.blockHash,this.mintData[e].blockNumber=n.blockNumber),"Confirmation"==t&&(this.mintData[e].confirmations=n.confNumber,this.mintData[e].blockHash=n.blockHash),this.displayMintStatus(this.currentMintIndex)}clearStatus(){}getMintData(e){return!!this.sessionMints.hasOwnProperty("token"+e)&&this.sessionMints["token"+e]}displayMintStatus(e){let t="";this.mintData[e].transactionHash&&(t+='<div class="mint-status-row">',t+='  <div class="mint-status-heading">Transaction Hash</div>',t+='  <div class="mint-status-value"><a href="https://etherscan.io/tx/'+this.mintData[e].transactionHash+'" target="_blank">'+this.mintData[e].transactionHash+"</a></div>",t+="</div>");let n=this.mintData[e].blockNumber;void 0===n&&(n=""),""!=n&&(t+='<div class="mint-status-row">',t+='  <div class="mint-status-heading">Block Number</div>',t+='  <div class="mint-status-value"><a target="_blank" href="https://etherscan.io/block/'+n+'">'+n+"</a></div>",t+="</div>");let i=!1,s=!1;this.mintReceipt&&(i=this.mintReceipt.events.Transfer.returnValues.tokenId,this.mintReceipt.events.Transfer.returnValues.to),this.confirmationCount=this.mintData[e].confirmations,document.getElementById("mint-status").innerHTML=t,this.confirmationCount>0&&!1!==this.transferTokenId&&(this.sessionMints.hasOwnProperty("token"+i)||(this.sessionMints["token"+i]={transactionHash:this.mintData[e].transactionHash,blockNumber:this.mintData[e].blockNumber},this.tokenPRGLoaded=!0,this.token.requestCheckChanges(i),this.index.gotoURL("/oraand/"+i)))}}class le{token=null;index=null;account=!1;init(e){this.token=e.token,this.index=e.index,this.collectionAccountElement=document.getElementById("collection-account"),this.connectMessage=document.getElementById("collection-connect-message"),this.collectionContainer=document.getElementById("collection-container"),document.getElementById("collection-connect").addEventListener("click",(e=>{e.preventDefault(),this.index.connect()})),this.collectionContainer.addEventListener("click",(e=>{e.preventDefault(),e.target.classList.contains("catalog-item")&&this.index.gotoURL(e.target.href)}))}show(){this.index.lazyLoad(),this.account=this.token.getAccount(),0==this.account?this.disconnected():this.connected()}showConnectMessage(){this.collectionContainer.style.display="none",this.connectMessage.style.display="block"}connected(){this.account=this.token.getAccount(),this.collectionAccountElement.innerHTML="Collection of "+this.account,this.balance()}disconnected(){this.collectionAccountElement.innerHTML="",this.showConnectMessage()}async balance(){this.connectMessage.style.display="none",this.collectionContainer.style.display="block";let e=await this.token.balanceOf(this.account),t="";for(let n=0;n<e;n++){let i=await this.token.tokenOfOwnerByIndex(this.account,n);t+=this.index.catalog.getCatalogTokenHTML(i);let s=e-n;this.collectionContainer.innerHTML='<h3 class="collection-loading-heading" style="flex: 1; width: 100%; margin-bottom: 10px"><img style="width: 16px" src="../images/spinner.svg"/> Loading '+s+' ...</h3><div class="catalog">'+t+"</div>",this.index.updateLazyLoadList(),this.index.lazyLoad()}this.collectionContainer.innerHTML='<div class="catalog">'+t+"</div>",this.index.updateLazyLoadList(),this.index.lazyLoad()}}class re{init(e){this.index=e.index,this.font=null,this.prgData=this.base64ToArrayBuffer("AQgLCAAAnjIwNjIAAAAAeKk1hQGpf40N3I0N3a0N3K0N3aksjfr/qQqN+/+pAY0a0KkYjRHQqf+N/v+pCY3//6L9jhLQqQCdADCd/DCd+TGVAZ3/H6kAnf/XnfzYnfnZneravb4MnQ8gvfYMnScjytDTqTyFW6nojRjQoLSpA4VgqQCFVrnyC4hIKT+dAHDoaCnABVZKSoVWxmDQ6J0AcOiY0NkgEA+iII4wNIZmokiGZae4jQA0GL0ANGkInQE0vTA0aQCdMTTo4C7Q6qQ4vgBwvQA0hWGFZ70wNIViqSOFaL4icL0ANIVjvTA0hWSgB7FnSf8xYxFhkWWIEPOpCKJlIPMJ5jilOMki0MCpAIVsIOIKogOp7I3/WakAjT9avc8KjT8KjVAKjVgKvdUKjUQKvdYKjVYKvdQKhZa90wqFl73aCoWYvd4KhZmGVqIrhpui/oadoACiAaWZIC0K6OAJ0Piml4aWohmGm6IChp2iByAtCsrQ+qZWyhCZqQONINCNIdCpH4WIqfSFh1ivANzFL/A7hS8pBNAC5leKKQjQAsZXiikB0AilWMkI8ALmWIopAtAGpVjwAsZYiikQ0A/mbKVsyQQwBKkAhWwg4gqmbPAavewLjesJve8LjewJpW3dqAwwB6kAhW0gtQog8gpMjQkYdQCVAJAC9gGmnmBIikiYSKn/jRnQIEoN5m2lXvAUpVuFXUkEhVutGNBJEI0Y0KkAhV5oqGiqaEBAhpwYZZZISBilm2WdhZuFmmiZAFBIGGn/wB0QBuSc0AKp/5kAUWhIGGn4mQBSaBhlmEgYuf9ZZZqZAFq5P1ppAJlAWqkChZpoyMrQxWimnGCtpwzwAwqQAkkrjacMYKkwhVGpAIVQqUCFN6AAsVCFVqAHs1ClVpFQhlaIEPWpCKJQIPMJxjfQ4mDGbjAC0ASpCIVuYBilWGkByQnQAqkAhVhgAECAwAEI//gBCP/5CQf3+AhHN6kIhVipZIVtqQCFbiBHDWClXvAC6mClW4VRogSgAJiFUJFQiND75lHK0PGlVykDqr3PCo1hC413C42EC6VY0APmXmCFNqkAhVSpMIVVqT6FMKVbhTGlbvAExTbQAyBbCzilMOkohTCwAsYxqUCiVCDzCcY20N/mXmCiAOrq6rwAULFU8HoYvQBaZTCFUL1AWmUxhVG8AFGxVMD/0AKpAIUzvABSsVSFMoZgoACzUL1EcOAA8ArJCdAGpjPwAqkBkVDIs1C9b3DgAPAKyQ/QBqYy8AKpAZFQoCixUPAGqQOmM9ACqQKRUMipBJFQoFCzUL2acJFQyLNQvcVwkVCmYOjgQPADTF0LYAAHDsG2iwoKCqEfoAiICKEgn13cn1/f4qEeXl7g3giICAiIH0jdnEjIKoeHWVqY6pmZWambmliXVkdHRwdH2VibGlmHB1eWFQdS0qeUFFNoKKhT51IS0lISklNSEU8TFFERUVIG0U8PBiZmo6Yl5I4Ozg7OjqRmTSXkTY0MzA7NDAqJzgzFSQqFxVzfXVaVU1VQxwRCiwiFhAINyAVEwQeGAwEHhwZFhQVISAiICAeHBwdHxwZGhgZFhQVFRX4AKAoFAAoKBQIECBRQKBQyUFCgCgAAFIBAIBCIRCIRgEAgEIhEIhEBAgQIESJEiAECBAgQIECAgEAgEAgEAgGIRCIRCAQCAREiRIgQIECAAQMHDx8/f/+AwODw+Pz+//9/Px8PBwMB//78+PDgwICW4S2FtMFaLS3BWgpogrRaLcFaCmiCtFoCAwUGCAcEBQUHCg0RDwgKBQcKDREPCApMdA6kbMYkxqnQCqmAhamlKEkBhSilKNAKpayihSDzCUx1DTilheWshYWwAsaGGKV/ZbyFf8TP8ASlJNAtpac5Yg7QJiB9Ctm7DKkAsAMgfQqFvKUk0BMgfQrJZCkIhc+5VA6wA7lYDoWtogKGqBilpz1lDmUk0AUgfQqVtbzqC7l0AMlR8Dm1udAaGLlyAH2wDJlyAJAOuXMAaQApD9AC9rmZcwC1ufAaOLlyAP2wDJlyALAOuXMA6QApD9AC1rmZcwClJNAdtRgpBxh1tfYYqr0AYJlwAL0AYZlxAKaota2ZdAClJNWh0Ai5dAAp/pl0AMowA0yzDaUk0AalqoUk5qeiGLVwnQDUyhD4YBFBQUEVUUFRiZzdhonZAx8PHz9/boxuAggIDAwECAoPogAgfQopH8kYEPeouRcNxbPw74WznQBguS8NnQBhytDhohSpAJUDhafgAxBTIH0KlRipQZWtpGy5rAyFqrzqC5ZzqRCZdQC9Xw6ZdgClbNAYqf+FqqkRla2p8Jl1AL1cDpl2AL1oDtAVyQHQBb1rDtAMyQLQBb1uDtADvXEOlaHKEKCpAYUkhamFKKRsqXiFhbmzDIWGubcMhaxgIH0KKQeFtCB9CikHaQ6FnNAGpZwpA9AXqTCFUSB9CikD0ALmUSB9CinbGGkAhVAgfQoltKogfQqlnCkDqLncD4VfIOAPxpzQyakHhZygA6IHvQAwnTgwyhD3qQhIIM8PaDitZQ/pCI1lD4gQ4qkgIM8PGK1lD2lgjWUPkAPuZg/GnBDJqUCFnKADogS5ADCdADDoiBD2GK2dD2kIjZ0PkAPung8YraAPaQiNoA+QA+6hD8ac0NKpCI2rDI2vDGAYbWIPjWIPkAPuYw9gAAEIQKAAqQGRUIaepV+iUCDzCcoQ8GAAAAAAAAAAAAAAAAA="),this.prgCanvas=null,this.memoryCanvas=null,this.offscreenPrgCanvas=null}base64ToArrayBuffer(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=t.charCodeAt(s);return i}fontLoaded(e){this.font=e,null==this.offscreenPrgCanvas&&(this.offscreenPrgCanvas=document.createElement("canvas")),console.log("prg canvas = "),console.log(this.offscreenPrgCanvas),this.drawPRGData(),this.resizeAboutPRGCanvas(),this.resizeMemoryCanvas(),window.addEventListener("resize",(e=>{this.resize()}))}resize(){this.resizeAboutPRGCanvas(),this.resizeMemoryCanvas()}resizeAboutPRGCanvas(){this.prgCanvas||(this.prgCanvas=document.getElementById("about-prg-data")),window.innerWidth>this.offscreenPrgCanvas.width?(this.prgCanvas.width=this.offscreenPrgCanvas.width,this.prgCanvas.height=this.offscreenPrgCanvas.height):(this.prgCanvas.width=window.innerWidth-20,this.prgCanvas.height=Math.floor(this.offscreenPrgCanvas.height*this.prgCanvas.width/this.offscreenPrgCanvas.width)),this.prgContext=this.prgCanvas.getContext("2d"),this.prgContext.drawImage(this.offscreenPrgCanvas,0,0,this.prgCanvas.width,this.prgCanvas.height)}drawPRGData(){this.hexByteWidth=18,this.hexByteHeight=12,this.fontPx=9,this.offscreenPrgCanvas.width=40*this.hexByteWidth+20-4,this.offscreenPrgCanvas.height=Math.ceil(51.2)*this.hexByteHeight+20-4,this.offscreenPrgContext=this.offscreenPrgCanvas.getContext("2d"),this.offscreenPrgContext.fillStyle="#111",this.offscreenPrgContext.fillRect(0,0,this.offscreenPrgCanvas.width,this.offscreenPrgCanvas.height),this.offscreenPrgContext.font=this.fontPx+'px "'+this.font.family+'", Courier, monospace',this.offscreenPrgContext.fillStyle="#eee";let e=10,t=6;for(let n=0;n<2048;n++){n%40==0&&(e=10,t+=this.hexByteHeight);let i=("00"+this.prgData[n].toString(16)).substr(-2);this.offscreenPrgContext.fillText(i,e,t),e+=this.hexByteWidth}}resizeMemoryCanvas(){this.memoryCanvas||(this.memoryCanvas=document.getElementById("about-memory")),window.innerWidth>this.offscreenPrgCanvas.width?this.memoryCanvas.width=600:this.memoryCanvas.width=window.innerWidth-20,this.memoryCanvas.height=80,this.memoryContext=this.memoryCanvas.getContext("2d"),this.memoryContext.fillStyle="#111",this.memoryContext.fillRect(0,0,this.prgCanvas.width,this.prgCanvas.height),this.memoryContext.font=this.fontPx+'px "'+this.font.family+'", Courier, monospace',this.memoryContext.fillStyle="#eee",this.drawMemory()}drawMemory(){let e=this.memoryCanvas.width-20;this.memoryContext.font=this.fontPx+'px "'+this.font.family+'", Courier, monospace';let t=Math.round(2049*e/65535),n=(Math.round(4096*e/65535),Math.round(2048*e/65535));this.memoryContext.fillRect(t+.5,26.5,n,30),this.memoryContext.strokeStyle="#ddd",this.memoryContext.beginPath(),this.memoryContext.moveTo(t+.5,56),this.memoryContext.lineTo(t+.5,61),this.memoryContext.stroke(),this.memoryContext.strokeStyle="#ddd",this.memoryContext.beginPath(),this.memoryContext.rect(10.5,26.5,e,30),this.memoryContext.stroke(),this.memoryContext.beginPath(),this.memoryContext.moveTo(10.5,21),this.memoryContext.lineTo(10.5,26),this.memoryContext.stroke(),this.memoryContext.beginPath(),this.memoryContext.moveTo(10+e+.5,21),this.memoryContext.lineTo(10+e+.5,26),this.memoryContext.stroke(),this.memoryContext.fillText("0x0000",10,16),this.memoryContext.fillText("0xffff",10+e-32,16),this.memoryContext.fillText("0x0801",t,72)}}let ce=new class{c64Display=null;token=null;lastUpdate=!1;setup=!1;catalog=null;viewToken=null;about=null;processKeyEvents=!0;connectedStatus="";collection="";url=!1;lazyLoadElements=[];lazyFadeElements=[];constructor(){this.initEvents(),this.setupHome(),document.getElementById("content").style.display="block"}async doSetup(){y.setup(),this.headerElement=document.getElementById("header"),this.token=new j,this.token.init({index:this}),this.mint=new de,this.mint.init({index:this,token:this.token}),this.catalog=new G,this.catalog.init({index:this,token:this.token}),this.viewToken=new ae,this.viewToken.init({token:this.token,index:this}),this.collection=new le,this.collection.init({token:this.token,index:this}),this.about=new re,this.about.init({token:this.token,index:this});var e=new FontFace("Roboto Mono","url(/fonts/RobotoMono-Regular.woff2)");document.fonts.add(e),e.loaded.then((()=>{this.viewToken.fontLoaded(e),this.about.fontLoaded(e)})),e.load(),await this.tryConnect(),this.processURL()}processURL(){this.url=window.location.pathname;let e=window.location.pathname.split("/");for(;e.length>0&&""===e[0].trim();)e.shift();y.stop_audio();let t=document.getElementById("token-nav-holder");if(t.style.display="none",e.length>0&&"oraand"==e[0]&&e.length>1){if("mint"==e[1])return this.showMint(),void this.setTitle("ORAAND - Mint");if("collection"==e[1])return this.showCollection(),void this.setTitle("ORAAND - Collection");if("about"==e[1])return this.showAbout(),void this.setTitle("ORAAND - About");{let n=parseInt(e[1],10);if(!isNaN(n)){t.style.display="flex";let i="ORAAND "+n;return this.setTitle(i,!0),void("gallery"==e[2]?this.showToken(n,!0):this.showToken(n))}}}this.setTitle("ORAAND"),this.showHome(),this.url="/"}initEvents(){document.getElementById("connect").addEventListener("click",(e=>{e.preventDefault(),this.connect()})),document.getElementById("switch-to-mainnet").addEventListener("click",(e=>{e.preventDefault(),this.token.switchToMainnet()})),document.getElementById("menu-items").addEventListener("click",(e=>{y.start_audio(),e.preventDefault(),e.target.classList.contains("menu-link")&&this.gotoURL(e.target.href),e.target.classList.contains("external-link")&&window.open(e.target.href)}));let e=document.getElementsByClassName("internal-link");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(e=>{e.preventDefault(),this.gotoURL(e.target.href)}));document.getElementById("home-buttons").addEventListener("click",(e=>{y.start_audio(),e.preventDefault(),e.target.classList.contains("external-link")?window.open(e.target.href):this.gotoURL(e.target.href)})),document.getElementById("connect-status").addEventListener("click",(e=>{e.preventDefault(),e.target.classList.contains("collection-link")&&this.gotoURL(e.target.href)})),document.addEventListener("keydown",(e=>{this.keyDown(e)})),document.addEventListener("keyup",(e=>{this.keyUp(e)})),document.addEventListener("scroll",(e=>{this.scroll(e)})),window.addEventListener("resize",(e=>{this.scroll(e)}))}scroll(e){this.lazyLoad();let t=window.scrollY/100;t>1&&(t=1),this.headerElement&&(this.headerElement.style.boxShadow="0 0 2px 1px rgba(10, 10, 10, "+t+")")}updateLazyLoadList(){let e=document.getElementsByClassName("lazy-load");this.lazyLoadElements=[];for(let t=0;t<e.length;t++)this.lazyLoadElements.push(e[t]);this.lazyFadeElements=[];let t=document.getElementsByClassName("lazy-fade");for(let e=0;e<t.length;e++)this.lazyFadeElements.push(t[e])}lazyLoad(){let e=!1,t=window.innerHeight;for(let n=0;n<this.lazyLoadElements.length;n++){let i=this.lazyLoadElements[n];i&&i.getBoundingClientRect().top-20<t&&(e=!0,i.src=i.getAttribute("data-src"),i.classList.remove("lazy-load"))}for(let n=0;n<this.lazyFadeElements.length;n++){let i=this.lazyFadeElements[n];i&&i.getBoundingClientRect().top<t&&(e=!0,i.style.opacity=1,i.classList.remove("lazy-fade"))}e&&this.updateLazyLoadList()}keyDown(e){if(this.processKeyEvents&&y.ready){let t=e.key.toLowerCase(),n=e.keyCode;switch(t){case"arrowleft":e.preventDefault(),y.joystickPush(1,4);break;case"arrowright":e.preventDefault(),y.joystickPush(1,8);break;case"arrowup":e.preventDefault(),y.joystickPush(1,1),n=11;break;case"arrowdown":e.preventDefault(),y.joystickPush(1,2),n=10;break;case" ":e.preventDefault(),y.joystickPush(1,16),n=32}y.start_audio(),y.keyPush(n),y.setScreenDelay(0)}}keyUp(e){if(this.processKeyEvents&&y.ready){let t=e.key.toLowerCase(),n=e.keyCode;switch(t){case"arrowleft":e.preventDefault(),y.joystickRelease(1,4);break;case"arrowright":e.preventDefault(),y.joystickRelease(1,8);break;case"arrowup":e.preventDefault(),y.joystickRelease(1,1);break;case"arrowdown":e.preventDefault(),y.joystickRelease(1,2);break;case" ":e.preventDefault(),y.joystickRelease(1,16)}y.keyRelease(n)}}setProcessKeyEvents(e){this.processKeyEvents=e}setupHome(){document.getElementById("catalog").addEventListener("click",(e=>{e.preventDefault(),e.target.classList.contains("token-link")&&this.gotoURL(e.target.href)}),!1)}gotoURL(e){y.start_audio(),y.reset();const t=e;window.history.pushState({},"ORAAND",t);let n=[];for(!1!==this.url&&(n=this.url.split("/"));n.length>0&&""===n[0].trim();)n.shift();let i=t.split("/");for(;i.length>0&&""===i[0].trim();)i.shift();this.processURL()}loadNumberMinted(){this.token.getTokenCount().then((e=>{let t=document.getElementsByClassName("number-minted");for(let n=0;n<t.length;n++)t[n].innerHTML=e}))}loadMintPrice(){this.token.getMintPrice().then((e=>{let t=document.getElementsByClassName("mint-price");for(let n=0;n<t.length;n++)t[n].innerHTML=e}))}getConnectedStatus(){return this.connectedStatus}setConnectedStatus(e,t){let n=document.getElementById("connect"),i=document.getElementById("switch-to-mainnet"),s=this.token.getCurrentAccount();switch(s||(s="",e="disconnected"),this.connectedStatus=e,e){case"connecting":break;case"connected":n.innerHTML="Connected",s='<a class="collection-link" href="/oraand/collection">'+this.token.getCurrentAccount()+"</a>",this.loadNumberMinted(),this.loadMintPrice(),!1!==this.url&&this.catalog.showCatalog(),this.mint.connected(),n.style.display="none",i.style.display="none";break;case"disconnected":this.mint.disconnected(),n.innerHTML="Connect",n.style.display="block",i.style.display="none",s="";break;case"switch":console.log("call wrong network"),this.mint.wrongNetwork(),n.style.display="none",i.style.display="flex",s=""}document.getElementById("connect-status").innerHTML=s,document.getElementById("mint-account").innerHTML=s,this.viewToken.connectedStatusChanged()}async tryConnect(){this.token&&await this.token.tryConnect()}async connect(){this.token&&(this.token.getCurrentAccount(),await this.token.connect())}showToken(e,t){this.showContent("token"),this.viewToken.reset(),this.viewToken.showLoadingOverlay(),this.viewToken.startLoadToken(e),this.viewToken.setTokenId(e).then((()=>{void 0!==t&&t&&this.viewToken.showGallery()})),window.scrollTo(0,0)}showMint(){this.mint.show(),this.showContent("mint"),window.scrollTo(0,0)}showAbout(){this.showContent("about"),window.scrollTo(0,0)}showCollection(){this.showContent("collection"),this.collection.show(),window.scrollTo(0,0)}setTitle(e,t){document.title=e,document.getElementById("page-title").innerHTML=e}showNotFound(){this.showContent("notfound"),window.scrollTo(0,0),this.setTitle("ORAAND - Not Found")}showHome(){y.stop_audio(),this.loadNumberMinted(),this.loadMintPrice(),this.showContent("index"),this.catalog.showCatalog(),window.scrollTo(0,0)}showContent(e){const t=document.getElementsByClassName("content");this.headerElement.style.display="flex";for(let n=0;n<t.length;n++)t[n].id!==e?t[n].style.display="none":t[n].style.display="block"}update(e){if(!1!==this.lastUpdate){var t=e-this.lastUpdate;t>200&&(t=16.666),y.ready&&(this.setup||(this.doSetup(),this.setup=!0),"/"==this.url||("/petarp/mint"==this.url?this.mint.update(e,t):this.viewToken.update(e,t)))}this.lastUpdate=e}};!function e(t){ce.update(t),requestAnimationFrame(e)}(!1)})()})();