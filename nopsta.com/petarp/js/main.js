(()=>{"use strict";var e={426:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(81),i=n.n(s),o=n(645),r=n.n(o)()(i());r.push([e.id,'html, body {\r\n  overflow-x: hidden;\r\n}\r\n\r\nbody {\r\n  background-color: #1a1a1a;\r\n  color: #ccc; /* dbdbdb; */\r\n  margin: 0;\r\n  padding: 0;\r\n  font-family: Arial, Helvetica, sans-serif;\r\n}\r\n\r\n.text-highlight {\r\n  color: #ffffff;\r\n  font-weight: 500;\r\n}\r\n.button, button {\r\n  margin: 0;\r\n  background-color: transparent;\r\n  border: 1px solid #fff;\r\n  border-radius: 0;\r\n  color: #fff;\r\n  padding: 14px 10px;\r\n  cursor: pointer;\r\n  text-transform: uppercase;\r\n  font-size: 12px;\r\n  line-height: 12px;\r\n  transition: all 0.2s;\r\n  white-space: nowrap;\r\n  text-decoration: none;\r\n}\r\n\r\n.button:hover, button:hover {\r\n  text-decoration: none;\r\n  background-color: #fff;\r\n  color: #000 !important;\r\n}\r\n\r\n.button:disabled, button:disabled {\r\n  background-color: #999;\r\n  color: #555;\r\n  border: 1px solid #555;\r\n}\r\n\r\n.content {\r\n  display: none;\r\n  padding: 40px 40px;\r\n  max-width: 1440px;\r\n  margin: 80px auto 0 auto;\r\n}\r\n\r\na {\r\n  text-decoration: underline;\r\n  color: #fff;\r\n}\r\n\r\na:hover {\r\n  text-decoration: underline;\r\n  color: #ddd !important;\r\n}\r\n\r\na:visited {\r\n  color: #fff;\r\n}\r\n\r\n#header {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 120px;\r\n  background-color: #1a1a1a;\r\n  z-index: 100;\r\n}\r\n\r\n#page-title-holder {\r\n  display: flex;\r\n}\r\n\r\n#header-items {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n#header-content {\r\n  width: 100%;\r\n  max-width: 1440px;\r\n  margin: 0 auto;\r\n  padding: 8px 40px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n#connect-status .collection-link {\r\n  text-decoration: underline;\r\n}\r\n\r\n#petarp-collection-connect-message {\r\n  margin-top: 40px;\r\n}\r\n\r\n#petarp-collection-account {\r\n  margin: 20px 0;\r\n}\r\n\r\n.connect-holder {\r\n  display: flex;\r\n}\r\n\r\nh1, h2, h3 {\r\n  font-weight: 400;\r\n}\r\n\r\nh2 {\r\n  font-size: 50px;\r\n}\r\n\r\n.home-section h2 {\r\n  margin: 0;\r\n}\r\n\r\n.home-content {\r\n  max-width: 800px;\r\n  line-height: 30px;\r\n}\r\n\r\n#header h1 {\r\n  margin: 6px 0 4px 0;\r\n  font-weight: 400;\r\n  font-size: 46px;\r\n  letter-spacing: 1px;\r\n  line-height: 50px;\r\n  height: 50px;\r\n  text-transform: uppercase;\r\n  white-space: nowrap;\r\n}\r\n\r\n#petarp-prev {\r\n  margin-left: 14px;\r\n}\r\n\r\n#petarp-nav-holder {\r\n  display: flex;\r\n  align-items: center;\r\n  margin: 6px 0 4px 0;\r\n}\r\n\r\n.petarp-nav img {\r\n  width: 38px;\r\n  height: 38px;\r\n}\r\n\r\n.petarp-nav:hover {\r\n  opacity: 0.8;\r\n}\r\n\r\n#menu-items {\r\n  font-size: 14px;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.3px;\r\n  display: flex;\r\n}\r\n\r\n.menu-link-separator {\r\n  margin: 0 8px;\r\n}\r\n\r\n#petarp-title-bar {\r\n  display: flex;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n#petarp-title {\r\n  font-size: 48px;\r\n  line-height: 48px;\r\n}\r\n\r\n#petarp-ownership-status {\r\n  margin-bottom: 6px;\r\n  font-size: 14px;\r\n}\r\n\r\n\r\n\r\n#petarp-date-details {\r\n  display: flex;\r\n  margin: 8px 0;\r\n}\r\n\r\n#petarp-mint-date {\r\n  margin-right: 20px;\r\n}\r\n\r\n#petarp-mint-date, #petarp-last-transfer {\r\n  font-size: 14px;\r\n  line-height: 26px;\r\n}\r\n\r\n\r\n.petarp-is-owner {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  line-height: 14px;\r\n}\r\n\r\n\r\n\r\n#petarp-page-info {\r\n  margin-bottom: 20px;\r\n  font-size: 14px;\r\n  line-height: 26px;\r\n}\r\n\r\n\r\n.petarp-links {\r\n  display: flex;\r\n  margin: 12px 0 12px 0;\r\n}\r\n\r\n.petarp-links .button {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.petarp-info {\r\n  font-size: 14px;\r\n  line-height: 28px;\r\n}\r\n\r\n#videoLink, #petarp-opensea, #petarp-gallery-button {\r\n  display: flex;\r\n  margin-left: 14px;\r\n}\r\n#home-c64 {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.home-section {\r\n  margin: 20px auto;\r\n  text-align: center;\r\n}\r\n\r\n.home-about-buttons {\r\n  display: flex;\r\n  justify-content: center;\r\n  \r\n}\r\n\r\n.home-about-buttons .button {\r\n  display: flex;\r\n  margin: 0 5px;\r\n}\r\n\r\n\r\n#petarp-params {\r\n  margin: 0 0 0 0;\r\n  display: flex;\r\n  height: 16px;\r\n\r\n}\r\n\r\n#petarp-params .petarp-param {\r\n  margin-right: 10px;\r\n}\r\n\r\n.petarp-unlock-button,\r\n#petarp-edit-bytes {\r\n  padding: 8px;\r\n  font-size: 12px;\r\n  height: 30px;\r\n}\r\n\r\n#petarp-edit-bytes {\r\n  margin-right: 10px;\r\n}\r\n\r\n#petarp-byte-editor-back {\r\n  padding-left: 6px;\r\n}\r\n\r\n.petarp-byte-editor-buttons {\r\n  display: flex;\r\n  width: 260px;\r\n  justify-content: space-between;\r\n}\r\n\r\n.petarp-byte-editor-buttons button {\r\n  height: 32px;\r\n  display: flex;\r\n  padding: 0 12px;\r\n  align-items: center;\r\n  justify-content: center;  \r\n}\r\n\r\n.petarp-byte-editor-step {  \r\n  font-size: 14px;\r\n  background-color: #222;\r\n  padding: 6px;\r\n}\r\n\r\n#petarp-save-bytes-error {\r\n  margin: 8px;\r\n\r\n}\r\n\r\nbutton:hover img {\r\n  filter: invert(1);\r\n}\r\n\r\n.noselect {\r\n  -webkit-touch-callout: none;\r\n    -webkit-user-select: none;\r\n     -khtml-user-select: none;\r\n       -moz-user-select: none;\r\n        -ms-user-select: none;\r\n            user-select: none;\r\n\r\n  -webkit-user-drag: none;\r\n  -khtml-user-drag: none;\r\n  -moz-user-drag: none;\r\n  -o-user-drag: none;\r\n  user-drag: none;            \r\n}\r\n\r\n.petarp-catalog {\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n  margin: 0 -10px;\r\n}\r\n\r\n.petarp-catalog .petarp-catalog-item {\r\n margin: 10px;\r\n display: flex;\r\n flex-direction: column;\r\n background-color: #181818;\r\n padding: 8px;\r\n transition: opacity 0.8s;\r\n opacity: 0;\r\n text-decoration: none;\r\n}\r\n\r\n.petarp-catalog-item:hover  {\r\n  background-color: #111;\r\n}\r\n\r\n.petarp-title {\r\n  margin: 10px 0 0 0;\r\n  font-size: 16px;\r\n  text-align: left;\r\n  color: #bbbbbb !important;\r\n  transition: 0.4s;\r\n  letter-spacing: 0.6px;\r\n  transition: all 0.4s;\r\n}\r\n\r\n.petarp-catalog-item:hover .petarp-title {\r\n  color: #ffffff !important;\r\n  letter-spacing: 0.8px;\r\n}\r\n\r\n.petarp-image-holder {\r\n  position: relative;\r\n  width: 392px;\r\n  height: 272px;\r\n  pointer-events: none;\r\n}\r\n\r\n.petarp-catalog-item img {\r\n  width: 392px;\r\n  height: 272px;\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  transition: opacity 0.4s;\r\n}\r\n\r\n.petarp-catalog-item .petarp-anim {\r\n  opacity: 0;\r\n}\r\n\r\n\r\n.petarp-catalog-item:hover .petarp-anim {\r\n  opacity: 1 !important;\r\n}\r\n\r\n\r\n#petarp-mint {\r\n  font-size: 16px;\r\n  line-height: 30px;\r\n}\r\n\r\n.petarp-number-minted, \r\n.petarp-mint-price,\r\n.petarp-mint-total,\r\n.petarp-contract-link {\r\n  display: inline;\r\n}\r\n\r\n.petarp-number-minted {\r\n  \r\n}\r\n.petarp-mint-price,\r\n.petarp-mint-number-minted,\r\n.petarp-mint-total {\r\n  color: #fff;\r\n  font-weight: 600;\r\n}\r\n\r\n.petarp-mint-minted {\r\n  margin: 20px 0;\r\n}\r\n\r\n.petarp-mint-mint-price {\r\n  margin: 20px 0;\r\n}\r\n\r\n#petarp-mint-account {\r\n  display: inline;\r\n}\r\n\r\n.petarp-mint-status-row {\r\n  display: flex;\r\n}\r\n\r\n.petarp-mint-section {\r\n  margin: 20px 0;\r\n}\r\n\r\n#mint-status {\r\n  margin: 40px 0;\r\n}\r\n.petarp-mint-status-row .petarp-mint-status-heading {\r\n  width: 200px;\r\n  padding: 10px;\r\n  border-bottom: 1px solid #aaa;\r\n}\r\n\r\n.petarp-mint-status-row .petarp-mint-status-value {\r\n  width: 570px;\r\n  padding: 10px;\r\n  border-bottom: 1px solid #aaa;\r\n}\r\n\r\n.petarp-mint-status-link {\r\n  padding: 10px;\r\n}\r\n\r\n#mint-button {\r\n  margin-top: 20px;\r\n}\r\n\r\n\r\n\r\n.c64-debug {\r\n  display: flex;\r\n}\r\n\r\n.petarp-cpu {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-right: 10px;\r\n}\r\n\r\n.petarp-cpu .registers {\r\n  width: 258px;\r\n  height: 40px;\r\n}\r\n\r\n.petarp-cpu .disassembly {\r\n  width: 258px;\r\n  height: 330px;\r\n}\r\n\r\n#petarp-canvas-holder {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: flex-start;\r\n  position: relative;\r\n}\r\n\r\n.petarp-holder {\r\n  position: relative;\r\n  display: flex;\r\n}\r\n\r\n#petarp-start-overlay, #petarp-loading-overlay {\r\n  background-color: rgba(0,0,0,0.4);\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n#petarp-start-overlay {\r\n  display: cursor;\r\n}\r\n\r\n#petarp-controls {\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  height: 50px;\r\n  background: rgb(0,0,0);\r\n  background: linear-gradient(0deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 65%, rgba(0,0,0,0) 100%);\r\n  opacity: 0;\r\n  transition: opacity 0.4s;\r\n}\r\n\r\n#petarp-fullscreen-icon {\r\n  position: absolute;\r\n  right: 10px;\r\n  bottom: 10px;\r\n  cursor: pointer;\r\n  opacity: 0.7;\r\n}\r\n\r\n#petarp-fullscreen-icon:hover {\r\n  opacity: 1;\r\n}\r\n\r\n#petarp-fullscreen-exit-icon {\r\n  position: absolute;\r\n  right: 10px;\r\n  bottom: 10px;\r\n  cursor: pointer;\r\n  display: none;\r\n  opacity: 0.7;\r\n}\r\n\r\n#petarp-fullscreen-exit-icon:hover {\r\n  opacity: 1;\r\n}\r\n\r\n.petarp-volume-icon {\r\n  position: absolute;\r\n  left: 10px;\r\n  bottom: 10px;\r\n  cursor: pointer;\r\n  opacity: 0.7;\r\n}\r\n\r\n.petarp-volume-icon:hover {\r\n  opacity: 1;\r\n}\r\n\r\n#petarp-volume-bar-holder {\r\n  position: absolute;\r\n  left: 46px;\r\n  width: 100px;\r\n  bottom: 10px;\r\n  height: 20px;\r\n  cursor: pointer;\r\n}\r\n\r\n#petarp-volume-bar {\r\n  position: absolute;\r\n  left: 0px;\r\n  bottom: 10px;\r\n  width: 100%;\r\n  height: 3px;\r\n  cursor: pointer;\r\n  opacity: 0.5;\r\n  background-color: #aaa;\r\n  transition: opacity 0.4s;\r\n}\r\n\r\n#petarp-volume-bar-value {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: 30%;\r\n  background-color: #fff;\r\n}\r\n\r\n#petarp-volume-value {\r\n  position: absolute;\r\n  left: calc(30% - 5px);\r\n  bottom: -4px;\r\n  width: 10px;\r\n  height: 10px;\r\n  background-color: #fff;\r\n  border-radius: 50%;\r\n}\r\n\r\n#petarp-volume-bar-holder:hover #petarp-volume-bar {\r\n  opacity: 1;\r\n}\r\n\r\n#petarp-tone-bar-holder {\r\n  position: absolute;\r\n  left: 208px;\r\n  width: 100px;\r\n  bottom: 10px;\r\n  height: 20px;\r\n  cursor: pointer;\r\n}\r\n\r\n#petarp-tone-label {\r\n  position: absolute;\r\n  left: -40px;\r\n  top: 3px;\r\n  font-size: 10px;\r\n  color: #fff;\r\n}\r\n#petarp-tone-bar {\r\n  position: absolute;\r\n  left: 0px;\r\n  bottom: 10px;\r\n  width: 100%;\r\n  height: 3px;\r\n  cursor: pointer;\r\n  opacity: 0.5;\r\n  background-color: #aaa;\r\n  transition: opacity 0.4s;\r\n}\r\n\r\n#petarp-tone-bar-value {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: 30%;\r\n  background-color: #fff;\r\n}\r\n\r\n#petarp-tone-value {\r\n  position: absolute;\r\n  left: calc(30% - 5px);\r\n  bottom: -4px;\r\n  width: 10px;\r\n  height: 10px;\r\n  background-color: #fff;\r\n  border-radius: 50%;\r\n}\r\n\r\n#petarp-tone-bar-holder:hover #petarp-tone-bar {\r\n  opacity: 1;\r\n\r\n}\r\n\r\n\r\n\r\n\r\n#petarp-reverb-bar-holder {\r\n  position: absolute;\r\n  left: 383px;\r\n  width: 100px;\r\n  bottom: 10px;\r\n  height: 20px;\r\n  cursor: pointer;\r\n}\r\n\r\n#petarp-reverb-label {\r\n  position: absolute;\r\n  left: -55px;\r\n  top: 3px;\r\n  font-size: 10px;\r\n  color: #fff;\r\n}\r\n#petarp-reverb-bar {\r\n  position: absolute;\r\n  left: 0px;\r\n  bottom: 10px;\r\n  width: 100%;\r\n  height: 3px;\r\n  cursor: pointer;\r\n  opacity: 0.5;\r\n  background-color: #aaa;\r\n  transition: opacity 0.4s;\r\n}\r\n\r\n#petarp-reverb-bar-value {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  width: 30%;\r\n  background-color: #fff;\r\n}\r\n\r\n#petarp-reverb-value {\r\n  position: absolute;\r\n  left: calc(30% - 5px);\r\n  bottom: -4px;\r\n  width: 10px;\r\n  height: 10px;\r\n  background-color: #fff;\r\n  border-radius: 50%;\r\n}\r\n\r\n#petarp-reverb-bar-holder:hover #petarp-reverb-bar {\r\n  opacity: 1;\r\n\r\n}\r\n\r\n\r\n.petarp-section-settings h3 {\r\n  font-size: 18px;\r\n  margin: 10px 0 4px 0;\r\n}\r\n\r\n.petarp-settings-headings {\r\n  display: flex;\r\n  font-size: 14px;\r\n  margin: 6px 0;\r\n}\r\n\r\n.petarp-settings-headings .petarp-setting {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 140px;\r\n  min-width: 140px;\r\n}\r\n\r\n.petarp-settings-headings .petarp-setting-key {\r\n  width: 60px;\r\n  \r\n  align-items: center;\r\n}\r\n\r\n.petarp-settings-row {\r\n  display: flex;\r\n  font-size: 14px;\r\n  padding: 6px 0;\r\n  border-top: 1px solid #aaa;\r\n}\r\n\r\n.petarp-error-message {\r\n  color: #b23;\r\n}\r\n\r\n.petarp-settings-unlock-error {\r\n  margin-left: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.petarp-settings-row .petarp-setting {\r\n  display: flex;\r\n  width: 140px;\r\n  min-width: 140px;\r\n  align-items: center;\r\n}\r\n\r\n.petarp-settings-row .petarp-setting-key {\r\n  width: 60px;\r\n  min-width: 60px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.petarp-settings-row .petarp-setting-value {\r\n  display: flex;\r\n}\r\n\r\n.petarp-filter-on, .petarp-filter-off {\r\n  display: flex;\r\n  border: 1px solid #ccc;\r\n  padding: 2px;\r\n  width: 14px;\r\n  height: 14px;\r\n  margin-right: 4px;\r\n}\r\n\r\n.petarp-filter-on::after {\r\n  content: "";\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #ccc;\r\n}\r\n\r\n.petarp-unlock-criteria {\r\n  color: #777777;\r\n}\r\n\r\n#petarp-save-settings-message {\r\n  margin: 8px 0;\r\n  font-size: 14px;\r\n}\r\n\r\n.petarp-save-settings-row {\r\n  display: flex;\r\n}\r\n\r\n#save-settings-status {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-left: 10px;\r\n  font-size: 14px;\r\n  line-height: 20px;\r\n}\r\n#sid-holder {\r\n  position: relative;\r\n  display: flex;\r\n}\r\n\r\n#sid-controls {\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  height: 50px;\r\n  background: rgb(0,0,0);\r\n  background: linear-gradient(0deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 65%, rgba(0,0,0,0) 100%);\r\n  opacity: 0;\r\n  transition: opacity 0.4s;\r\n}\r\n\r\n#sid-fullscreen-icon {\r\n  position: absolute;\r\n  right: 10px;\r\n  bottom: 10px;\r\n  cursor: pointer;\r\n  opacity: 0.7;\r\n}\r\n\r\n#sid-fullscreen-icon:hover {\r\n  opacity: 1;\r\n}\r\n\r\n#sid-fullscreen-exit-icon {\r\n  position: absolute;\r\n  right: 10px;\r\n  bottom: 10px;\r\n  cursor: pointer;\r\n  display: none;\r\n  opacity: 0.7;\r\n}\r\n\r\n#sid-fullscreen-exit-icon:hover {\r\n  opacity: 1;\r\n}\r\n\r\n\r\n.petarp-canvas-info {\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n#petarp-info {\r\n  padding: 0 0 0 20px;\r\n}\r\n\r\n.petarp-sid-debug {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  margin-top: 10px;\r\n}\r\n\r\n#memory {\r\n  width: 482px;\r\n}\r\n\r\n#petarp-gallery-back {\r\n  position: fixed;\r\n  z-index: 100;\r\n}\r\n\r\n#petarp-gallery-content {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n}\r\n\r\n#petarp-gallery-sizes, #petarp-gallery-description {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 14px;\r\n  line-height: 18px;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.petarp-gallery-image {\r\n  position: relative;\r\n  background-color: #111;\r\n  padding: 5px;\r\n  margin: 20px;\r\n  display: flex;\r\n}\r\n\r\n.petarp-gallery-download-shadow {\r\n  filter: invert(0.8);\r\n  position: absolute;\r\n  bottom: 13px;\r\n  right: 15px;\r\n  width: 26px;\r\n  height: 25px;\r\n  cursor: pointer;\r\n  opacity: 0;\r\n  transition: opacity 0.4s;\r\n}\r\n\r\n.petarp-gallery-download {\r\n  position: absolute;\r\n  bottom: 14px;\r\n  right: 16px;\r\n  cursor: pointer;\r\n  opacity: 0;\r\n  transition: opacity 0.4s;\r\n}\r\n\r\n.petarp-gallery-image:hover .petarp-gallery-download-shadow {\r\n  opacity: 0.8;\r\n}\r\n\r\n\r\n\r\n.petarp-gallery-image:hover .petarp-gallery-download {\r\n  opacity: 0.6;\r\n}\r\n\r\n.petarp-gallery-image:hover .petarp-gallery-download:hover {\r\n  opacity: 1;\r\n}\r\n\r\n\r\n#petarp-about {\r\n  font-size: 16px;\r\n  line-height: 30px;\r\n  letter-spacing: 0.3px;\r\n  color: #dddddd;\r\n}\r\n\r\n#petarp-about h2 {\r\n  font-size: 28px;\r\n  margin: 60px 0 10px 0;\r\n  color: #f1f1f1;\r\n}\r\n\r\n#petarp-about h3 {\r\n  font-size: 20px;\r\n  margin: 20px 0 6px 0;\r\n  color: #f1f1f1;\r\n}\r\n\r\n#petarp-about h2:first-child {\r\n  margin-top: 20px;\r\n}\r\n\r\n#petarp-about pre {\r\n  margin: 30px 0 30px 20px;\r\n}\r\n\r\n.petarp-argments-table {\r\n  margin-left: 20px;\r\n}\r\n\r\n.petarp-argments-table th, .petarp-argments-table td {\r\n  text-align: left;\r\n  padding-right: 20px;\r\n}\r\n\r\n.petarp-settings-table {\r\n  font-size: 14px;\r\n  margin-top: 20px;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n\r\n.petarp-settings-table td, .petarp-settings-table th {\r\n  margin: 0;\r\n  border-bottom: 1px solid #ccc;\r\n  text-align: left;\r\n  line-height: 20px;\r\n  padding: 6px 20px 6px 0;\r\n}\r\n\r\n.petarp-settings-key {\r\n  white-space: nowrap;\r\n}\r\n\r\n.petarp-about-image {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  margin: 20px 0;\r\n}\r\n\r\n.petarp-about-image-caption {\r\n  color: #aaaaaa;\r\n  text-align: center;\r\n}\r\n\r\n.petarp-about-image-attribution {\r\n  font-size: 12px;\r\n}\r\n\r\n.petarp-c64-specifications {\r\n  font-size: 14px;\r\n  margin: 0 auto 20px auto;\r\n}\r\n\r\n.petarp-c64-specifications th {\r\n  text-align: left;\r\n  display: flex;\r\n}\r\n\r\n#petarp-bytes-editor-owner, \r\n.petarp-bytes-editor-instructions {\r\n  margin-bottom: 12px;\r\n  font-size: 14px;\r\n}\r\n\r\n.petarp-byte-editor-header h3 {\r\n  margin: 0 0 10px 0;\r\n}\r\n.petarp-bytes-holder {\r\n  display: flex;\r\n  position: relative;\r\n  overflow: hidden;\r\n  justify-content: left;\r\n}\r\n\r\n.petarp-byte-link.clickable, .petarp-byte-slot-label.clickable {\r\n  cursor: pointer;\r\n}\r\n\r\n.byte-editor-instructions {\r\n  line-height: 1.5;\r\n  margin-top: 10px;\r\n  font-size: 14px;\r\n}\r\n\r\n#petarp-byte-value {\r\n  border-radius: 0;\r\n  width: 22px;\r\n  height: 20px;\r\n  position: absolute; \r\n  border: 0;\r\n  padding: 1px; \r\n  display: none; \r\n}\r\n\r\n.petarp-bytes-table-holder {\r\n  margin-left: 10px;\r\n  max-width: 280px;\r\n}\r\n\r\n.petarp-bytes-table {\r\n  min-width: 272px;\r\n  margin-bottom: 20px;\r\n}\r\n.petarp-bytes-table td,\r\n.petarp-bytes-table th {\r\n  background-color: #222;\r\n  text-align: left;;\r\n\r\n}\r\n\r\n.petarp-bytes-table th {\r\n  padding: 4px;\r\n}\r\n\r\n.petarp-byte-address,\r\n.petarp-byte-value {\r\n  width: calc(100% - 8px);\r\n  height: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 4px;\r\n}\r\n\r\n.petarp-byte-remove-cell {\r\n  width: 18px;\r\n  text-align: center;\r\n\r\n}\r\n\r\n.petarp-byte-slot {\r\n  margin-right: 6px;\r\n}\r\n\r\n@media only screen and (max-width: 1300px) {\r\n  .petarp-canvas-info {\r\n    flex-direction: column;\r\n  }\r\n\r\n  #petarp-canvas-holder {\r\n    margin-top: 0px;\r\n  }\r\n\r\n  #petarp-info {\r\n    padding: 0;\r\n    margin-top: 20px;\r\n  }\r\n\r\n  .petarp-sid-debug {\r\n    flex-direction: column;\r\n    align-items: center;\r\n    margin-top: 20px;\r\n\r\n  }\r\n  \r\n  #sid {\r\n    width: 784px;\r\n  }\r\n\r\n  .c64-debug {\r\n    margin-top: 7px;\r\n    width: 784px;\r\n    justify-content: space-between;\r\n  }\r\n\r\n\r\n  #petarp-ownership {\r\n    max-width: 780px;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n  }\r\n\r\n  #petarp-ownership,\r\n  #petarp-last-transfer,\r\n  #petarp-page-info,\r\n  .petarp-links {\r\n    \r\n    text-align: center;\r\n    justify-content: center;\r\n  }\r\n\r\n  .petarp-section-settings {\r\n    margin-top: 20px;\r\n    max-width: 780px;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n  }\r\n\r\n  .petarp-byte-editor-header h3 {\r\n    text-align: center;\r\n  }\r\n\r\n  #petarp-bytes-editor-owner,\r\n  .petarp-bytes-editor-instructions {\r\n    text-align: center;\r\n  }\r\n\r\n  .petarp-bytes-holder {\r\n    justify-content: center;\r\n  }\r\n\r\n  .petarp-bytes-table-holder {\r\n    margin-left: 40px;\r\n  }\r\n\r\n}\r\n\r\n.home-mint-button-section {\r\n  text-align: center;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.home-mint-button-section button, .home-mint-button-section .button {\r\n  margin: 0 10px 0 0;\r\n  display: flex;\r\n  height: 100%;\r\n\r\n}\r\n\r\n\r\n\r\n@media only screen and (max-width: 803px) {\r\n  #disassembly, #registers {\r\n    display: none;\r\n  }\r\n\r\n  .c64-debug {\r\n    flex-direction: column;\r\n    align-items: center;\r\n  }\r\n\r\n  .home-section h2 {\r\n    font-size: 34px;\r\n    line-height: 38px;\r\n    text-align: center;\r\n  }  \r\n\r\n  .petarp-about-image img {\r\n    width: 100%;  \r\n  }\r\n}\r\n\r\n@media only screen and (max-width: 784px) {\r\n  #sid {\r\n    width: 392px;\r\n  }\r\n\r\n  #connect-status .collection-link {\r\n    font-size: 13px;\r\n  }\r\n\r\n\r\n}\r\n\r\n@media only screen and (max-width: 714px) {\r\n  #header h1 {\r\n    font-size: 40px;\r\n  }\r\n\r\n  #connect-status .collection-link {\r\n    font-size: 13px;\r\n    position: absolute;\r\n    right: 10px;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    width: 180px;\r\n  }\r\n\r\n  #header-content {\r\n    padding-left: 20px;\r\n    padding-right: 20px;\r\n  }\r\n\r\n  .content {\r\n    padding-left: 20px;\r\n    padding-right: 20px;\r\n  }\r\n\r\n  .c64-debug {\r\n    flex-direction: column;\r\n  }\r\n\r\n}\r\n\r\n@media only screen and (max-width: 520px) {\r\n  #connect-status .collection-link {\r\n    font-size: 13px;\r\n    width: 80px;\r\n  }\r\n\r\n  #petarp-gallery-description { \r\n    margin-top: 30px;\r\n  }\r\n}\r\n\r\n@media only screen and (max-width: 435px) {\r\n\r\n  #header h1 {\r\n    font-size: 46px;\r\n  }\r\n\r\n  #header-content {\r\n    padding-left: 10px;\r\n    padding-right: 10px;\r\n  }\r\n\r\n  #menu-items {\r\n    font-size: 15px;\r\n  }\r\n\r\n  .menu-link-separator {\r\n    margin: 0 9px;\r\n  }\r\n\r\n  .connect-holder {\r\n    display: none;\r\n  }\r\n  \r\n  .content {\r\n    padding-left: 10px;\r\n    padding-right: 10px;\r\n  }\r\n\r\n  .home-section {\r\n    font-size: 13px;\r\n    line-height: 24px;\r\n    text-align: left;\r\n    margin: 12px 0;\r\n  }\r\n\r\n  .home-section h2 {\r\n    font-size: 28px;\r\n    line-height: 36px;\r\n    text-align: center;\r\n  }\r\n\r\n  .home-about-buttons, .home-mint-button-section {\r\n    margin: 20px 0;\r\n  }\r\n\r\n\r\n  .petarp-catalog-item.petarp-link {\r\n    width: 100%;\r\n    height: 75vw;\r\n    margin: 0 0 10px 0;\r\n    padding: 8px;\r\n  }\r\n\r\n  .petarp-image-holder {\r\n    width: 100%;\r\n    \r\n  }\r\n\r\n  .petarp-catalog-item img {\r\n    width: calc(100vw - 16px);\r\n    height: calc((100vw - 16px) * 0.6939);\r\n  }\r\n\r\n  #petarp-volume-bar-holder {\r\n    display: none;\r\n  }\r\n\r\n  .petarp-section-settings {\r\n    display: none;\r\n  }\r\n\r\n  .petarp-canvas-info {\r\n    flex-direction: column;\r\n  }\r\n\r\n  #petarp-canvas-holder {\r\n    margin-bottom: 20px;\r\n  }\r\n\r\n  #petarp-params .petarp-param {\r\n    font-size: 14px;\r\n  }\r\n\r\n  .desktop-only {\r\n    display: none;\r\n  }\r\n\r\n  .petarp-links {\r\n    justify-content: space-between;\r\n  }\r\n  \r\n  .petarp-links .button, .petarp-links button {\r\n    font-size: 11px;\r\n  }\r\n\r\n  #petarp {\r\n    padding: 20px 10px;\r\n  }\r\n  \r\n}\r\n\r\n\r\n@media only screen and (max-width: 400px) {\r\n\r\n  #menu-items {\r\n    font-size: 15px;\r\n  }\r\n\r\n  .menu-link-separator {\r\n    margin: 0 7px;\r\n  }\r\n}\r\n\r\n@media only screen and (max-width: 340px) {\r\n  #header h1 {\r\n    font-size: 38px;\r\n  }\r\n\r\n  #menu-items {\r\n    font-size: 14px;\r\n  }  \r\n\r\n  #petarp-params .petarp-param {\r\n    font-size: 12px;\r\n  }  \r\n}',""]);const a=r},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",s=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),s&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),s&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,s,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(s)for(var a=0;a<this.length;a++){var d=this[a][0];null!=d&&(r[d]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);s&&r[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,s=0;s<t.length;s++)if(t[s].identifier===e){n=s;break}return n}function s(e,s){for(var o={},r=[],a=0;a<e.length;a++){var d=e[a],l=s.base?d[0]+s.base:d[0],c=o[l]||0,h="".concat(l," ").concat(c);o[l]=c+1;var p=n(h),m={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==p)t[p].references++,t[p].updater(m);else{var u=i(m,s);s.byIndex=a,t.splice(a,0,{identifier:h,updater:u,references:1})}r.push(h)}return r}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var o=s(e=e||[],i=i||{});return function(e){e=e||[];for(var r=0;r<o.length;r++){var a=n(o[r]);t[a].references--}for(var d=s(e,i),l=0;l<o.length;l++){var c=n(o[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=d}}},569:e=>{var t={};e.exports=function(e,n){var s=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var s="";n.supports&&(s+="@supports (".concat(n.supports,") {")),n.media&&(s+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(s+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),s+=n.css,i&&(s+="}"),n.media&&(s+="}"),n.supports&&(s+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},749:(e,t,n)=>{var s;n.d(t,{L:()=>i}),e=n.hmd(e),s=function(){return function(e,t,n){var s=window,i="application/octet-stream",o=n||i,r=e,a=document,d=a.createElement("a"),l=function(e){return String(e)},c=s.Blob||s.MozBlob||s.WebKitBlob||l;c=c.call?c.bind(s):Blob;var h,p,m=t||"download";if("true"===String(this)&&(o=(r=[r,o])[0],r=r[1]),String(r).match(/^data\:[\w+\-]+\/[\w+\-]+[,;]/))return navigator.msSaveBlob?navigator.msSaveBlob(function(e){for(var t=e.split(/[:;,]/),n=t[1],s=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),i=s.length,o=0,r=new Uint8Array(i);o<i;++o)r[o]=s.charCodeAt(o);return new c([r],{type:n})}(r),m):u(r);function u(e,t){if("download"in d)return d.href=e,d.setAttribute("download",m),d.innerHTML="downloading...",a.body.appendChild(d),setTimeout((function(){d.click(),a.body.removeChild(d),!0===t&&setTimeout((function(){s.URL.revokeObjectURL(d.href)}),250)}),66),!0;if("undefined"!=typeof safari)return e="data:"+e.replace(/^data:([\w\/\-\+]+)/,i),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=a.createElement("iframe");a.body.appendChild(n),t||(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,i)),n.src=e,setTimeout((function(){a.body.removeChild(n)}),333)}if(h=r instanceof c?r:new c([r],{type:o}),navigator.msSaveBlob)return navigator.msSaveBlob(h,m);if(s.URL)u(s.URL.createObjectURL(h),!0);else{if("string"==typeof h||h.constructor===l)try{return u("data:"+o+";base64,"+s.btoa(h))}catch(e){return u("data:"+o+","+encodeURIComponent(h))}(p=new FileReader).onload=function(e){u(this.result)},p.readAsDataURL(h)}return!0}},"function"==typeof define&&n.amdO?define([],s):"object"==typeof exports?e.exports=s():window.dnload=s();let i=window.dnload},506:(e,t,n)=>{var s=n(379),i=n.n(s),o=n(795),r=n.n(o),a=n(569),d=n.n(a),l=n(565),c=n.n(l),h=n(216),p=n.n(h),m=n(589),u=n.n(m),y=n(426),g={};g.styleTagTransform=u(),g.setAttributes=c(),g.insert=d().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=p(),i()(y.Z,g),y.Z&&y.Z.locals&&y.Z.locals;var b=n(749);let f=M64({});f.ready=!1,f.init=f.cwrap("m64_init",null,["number","number"]),f.reset=f.cwrap("m64_reset"),f.injectPrg=f.cwrap("m64_injectPrg",null,["array","number","number"]),f.keyPush=f.cwrap("m64_keyPush",null,["number"]),f.keyRelease=f.cwrap("m64_keyRelease",null,["number"]),f.joystickPush=f.cwrap("m64_joystickPush",null,["number","number"]),f.joystickRelease=f.cwrap("m64_joystickRelease",null,["number","number"]),f.getPixelBuffer=f.cwrap("m64_getPixelBuffer","number"),f.getPixelBufferWidth=f.cwrap("m64_getPixelBufferWidth","number"),f.getPixelBufferHeight=f.cwrap("m64_getPixelBufferHeight","number"),f.update=f.cwrap("m64_update","number",["number"]),f.audioInit=f.cwrap("m64_audioInit",null,["number","number"]),f.getAudioBuffer=f.cwrap("m64_getAudioBuffer","number"),f.getAudioBufferLength=f.cwrap("m64_getAudioBufferLength","number"),f.setChannelBuffersEnabled=f.cwrap("m64_setChannelBuffersEnabled",null,["number"]),f.getAudioBufferCh=f.cwrap("m64_getAudioBufferCh","number"),f.cpuRead=f.cwrap("m64_cpuRead","number"),f.cpuWrite=f.cwrap("m64_cpuWrite",null,["number","number"]),f.getPC=f.cwrap("m64_getPC"),f.getSP=f.cwrap("m64_getSP"),f.getRegX=f.cwrap("m64_getRegX"),f.getRegY=f.cwrap("m64_getRegY"),f.getRegA=f.cwrap("m64_getRegA"),f.getFlagN=f.cwrap("m64_getFlagN"),f.getFlagC=f.cwrap("m64_getFlagC"),f.getFlagD=f.cwrap("m64_getFlagD"),f.getFlagZ=f.cwrap("m64_getFlagZ"),f.getFlagV=f.cwrap("m64_getFlagV"),f.getFlagI=f.cwrap("m64_getFlagI"),f.getFlagU=f.cwrap("m64_getFlagU"),f.getFlagB=f.cwrap("m64_getFlagB");var v=null,k=null,w=null,x=null,C=!1,B=!1,I=0,T=[];f.onRuntimeInitialized=function(){f.start_audio(),f.setChannelBuffersEnabled(1),f.init(0),f.ready=!0},f.isReady=function(){return f.ready},f.get_audio_playing=function(){return C};var E=0,S=0;f.setup=function(){if(v||(v=document.createElement("canvas")),E=f.getPixelBufferWidth(),S=f.getPixelBufferHeight(),v.width=E,v.height=S,k=v.getContext("2d"),w=k.getImageData(0,0,v.width,v.height),0==T.length)for(var e=0;e<22;e++){let e=document.createElement("canvas");e.width=E,e.height=S;let t=e.getContext("2d").getImageData(0,0,e.width,e.height);T.push(t)}},f.downloadImage=function(e){null==x&&((x=document.createElement("canvas")).width=2160,x.height=2160);let t=x.getContext("2d");t.imageSmoothingEnabled=!1,t.drawImage(v,88,28,216,216,0,0,2160,2160);let n=x.toDataURL("image/png");(0,b.L)(n,e,"image/png")},f.set_prg=function(e){f.stop_audio(),f.init(1,1),f.injectPrg(e,e.length,1),f.start_audio(),f.audioInit(A,L.sampleRate)},f.setScreenDelay=function(e){},f.draw=function(e,t,n){var s=f.getPixelBuffer(),i=E*S*4,o=new Uint8Array(f.HEAPU8.subarray(s,s+i));w.data.set(o),k.putImageData(w,0,0),e.drawImage(v,0,0,v.width,v.height,0,0,t,n),I=(I+1)%22};var A=4096,L=!1;let P=!1,R=.9,M=0,D=0,N=0,H=0;var O=0,_=0;function X(){if(L.currentTime-O>2*A/H)return O=L.currentTime,void(_=10);if(O=L.currentTime,_>0)_--;else if(_=0,!(L.currentTime+2*N<D||(D+=N,B))){var e=L.createBufferSource();e.addEventListener("ended",(e=>{X()}));var t=L.createBuffer(1,A,H);e.connect(P);var n=f.getAudioBuffer(),s=t.getChannelData(0),i=new Float32Array(f.HEAPF32.subarray(n>>2,(n>>2)+A));s.set(i),e.buffer=t,e.start(D)}}function F(){X();var e=L.createBufferSource();e.addEventListener("ended",(e=>{F()}));var t=L.createBuffer(1,A/4,H);e.connect(L.destination),e.buffer=t,e.start(L.currentTime)}function z(){"running"==L.state&&(P||(P=L.createGain(),P.gain.value=R,P.connect(L.destination),D=L.currentTime+3*N,F(),setInterval(X,4)),"running"==L.state&&(f.audioInit(A,L.sampleRate),f.setVolume(R),C=!0))}f.stop_audio=function(){B=!0},f.start_audio=function(){var e=window.AudioContext||window.webkitAudioContext||!1;if(e){L&&"running"!=L.state&&L.resume(),B&&(B=!1,D=L.currentTime+3*N);try{if(L||(L=new e,H=L.sampleRate,N=A/H,L.onstatechange=()=>{z()}),"running"!=L.state&&L.resume(),"running"!=L.state)return}catch(e){console.log("ERRR"),console.log(e)}}},f.setVolume=function(e){R=e,P&&(P.gain.value=e)},f.volumeToggle=function(){0!=R?(M=R,m64_setVolume(0)):m64_setVolume(M)};const U=45;let Y={};function W(e,t,n){return"keydown"==n?f.keyPush(U):f.keyRelease(U),"keyup"==n&&(e=Y["kc"+t]),e}function V(e){return f.keyRelease(U),f.keyRelease(56),e}f.keyCodeToMatrixIndex=function(e,t){var n=t.type.toLowerCase(),s=!1;if("keydown"==n&&(t.shiftKey?f.keyPush(U):38!=e&&37!=e&&(f.keyRelease(56),f.keyRelease(U)),void 0!==Y["kc"+e]&&!1!==Y["kc"+e]))return!1;if(t.preventDefault(),void 0!==t.key)switch(t.key.toLowerCase()){case"enter":s=43;break;case" ":s=59;break;case"`":s=0;break;case"~":s=29,"keyup"==n&&(s=Y["kc"+e]);break;case"1":s=1;break;case"2":s=2;break;case"3":s=3;break;case"4":s=4;break;case"5":s=5;break;case"6":s=6;break;case"7":s=7;break;case"8":s=8;break;case"9":s=9;break;case"0":s=10;break;case"\\":s=13;break;case"-":s=12;break;case"backspace":case"delete":s=15;break;case"tab":s=16;break;case"control":case"capslock":s=44;break;case"q":s=17;break;case"w":s=18;break;case"e":s=19;break;case"r":s=20;break;case"t":s=21;break;case"y":s=22;break;case"u":s=23;break;case"i":s=24;break;case"o":s=25;break;case"p":s=26;break;case"escape":s=30;break;case"a":s=31;break;case"s":s=32;break;case"d":s=33;break;case"f":s=34;break;case"g":s=35;break;case"h":s=36;break;case"j":s=37;break;case"k":s=38;break;case"l":s=39;break;case":":s=V(40);break;case";":s=41;break;case"[":s=40,"keydown"==n?f.keyPush(U):f.keyRelease(U),"keyup"==n&&(s=Y["kc"+e]);break;case"]":s=41,"keydown"==n?f.keyPush(U):f.keyRelease(U),"keyup"==n&&(s=Y["kc"+e]);break;case"=":s=42;break;case"z":s=46;break;case"x":s=47;break;case"c":s=48;break;case"v":s=49;break;case"b":s=50;break;case"n":s=51;break;case"m":s=52;break;case"<":case",":s=53;break;case">":case".":s=54;break;case"/":case"?":s=55;break;case"arrowup":s=57,"keydown"==n?f.keyPush(U):f.keyRelease(U),"keyup"==n&&(s=Y["kc"+e]);break;case"arrowdown":s=57;break;case"arrowleft":s=58,"keydown"==n?f.keyPush(U):f.keyRelease(U),"keyup"==n&&(s=Y["kc"+e]);break;case"arrowright":s=58;break;case"!":s=W(1,e,n);break;case'"':s=W(2,e,n);break;case"#":s=W(3,e,n);break;case"$":s=W(4,e,n);break;case"%":s=W(5,e,n);break;case"&":s=W(6,e,n);break;case"'":s=W(7,e,n);break;case"(":s=W(8,e,n);break;case")":s=W(9,e,n);break;case"@":s=V(27);break;case"^":s=V(29);break;case"*":s=V(28);break;case"+":s=V(11);break;case"f1":s=60;break;case"f2":s=60,"keydown"==n?f.keyPush(U):f.keyRelease(U),"keyup"==n&&(s=Y["kc"+e]);break;case"f3":s=61;break;case"f4":s=61,"keydown"==n?f.keyPush(U):f.keyRelease(U),"keyup"==n&&(s=Y["kc"+e]);break;case"f5":s=62;break;case"f6":s=62,"keydown"==n?f.keyPush(U):f.keyRelease(U);break;case"f7":s=63;break;case"f8":s=63,"keydown"==n?f.keyPush(U):f.keyRelease(U);break;case"shift":s=45}return Y["kc"+e]="keydown"==n&&s,s},f.keyDown=function(e,t){var n=f.keyCodeToMatrixIndex(e,t);!1!==n&&f.keyPush(n)},f.keyUp=function(e,t){var n=f.keyCodeToMatrixIndex(e,t);!1!==n&&f.keyRelease(n)};let j={address:"0x7d6433b77285cfdb2f91179f73588210fc53d3d8",abi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"byteIndex",type:"uint256"},{indexed:!1,internalType:"uint16",name:"bytePosition",type:"uint16"},{indexed:!1,internalType:"uint8",name:"byteValue",type:"uint8"}],name:"ByteSet",type:"event"},{inputs:[],name:"mintToken",outputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],stateMutability:"payable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"baseURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"byteIndex",type:"uint256"},{internalType:"uint16",name:"bytePosition",type:"uint16"},{internalType:"uint8",name:"byteValue",type:"uint8"}],name:"setByte",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"byteIndex",type:"uint256"},{internalType:"uint16",name:"bytePosition",type:"uint16"},{internalType:"uint8",name:"byteValue",type:"uint8"},{internalType:"uint24",name:"userData",type:"uint24"}],name:"setByteAndUserData",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint16[8]",name:"bytePositions",type:"uint16[8]"},{internalType:"uint8[8]",name:"byteValues",type:"uint8[8]"}],name:"setBytes",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"price",type:"uint256"}],name:"setMintPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint24",name:"userData",type:"uint24"}],name:"setTokenUserData",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"unlockIndex",type:"uint256"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"byteIndex",type:"uint256"},{internalType:"uint16",name:"bytePosition",type:"uint16"}],name:"checkCanSetByte",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkCanSetUserData",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"unlockIndex",type:"uint256"}],name:"checkCanUnlock",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getSecondsSinceLastTransfer",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"byteIndex",type:"uint256"}],name:"getTokenCustomByte",outputs:[{internalType:"uint16",name:"position",type:"uint16"},{internalType:"uint8",name:"value",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getTokenCustomBytes",outputs:[{internalType:"uint16[8]",name:"position",type:"uint16[8]"},{internalType:"uint8[8]",name:"value",type:"uint8[8]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getTokenParams",outputs:[{internalType:"uint8",name:"p0",type:"uint8"},{internalType:"uint8",name:"p1",type:"uint8"},{internalType:"uint8",name:"p2",type:"uint8"},{internalType:"uint8",name:"p3",type:"uint8"},{internalType:"uint8",name:"p4",type:"uint8"},{internalType:"uint8",name:"p5",type:"uint8"},{internalType:"uint8",name:"p6",type:"uint8"},{internalType:"uint8",name:"p7",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bool",name:"unmodified",type:"bool"}],name:"getTokenPRG",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getTokenSeed",outputs:[{internalType:"uint64",name:"p",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getTokenUnlocks",outputs:[{internalType:"uint8",name:"u0",type:"uint8"},{internalType:"uint8",name:"u1",type:"uint8"},{internalType:"uint8",name:"u2",type:"uint8"},{internalType:"uint8",name:"u3",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getTokenUserData",outputs:[{internalType:"uint24",name:"userData",type:"uint24"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"mintPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint16",name:"",type:"uint16"}],name:"positionUsed",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}]};class q{index=null;token=null;accounts=[];mintPriceWei=256e13;web3=null;server="https://nopsta.com/a/petarp/";networkId=!1;cachedTokenId=!1;cachedTokenData=null;v=0;init(e){this.index=e.index,void 0!==window.ethereum?(window.ethereum.on("connect",(e=>{console.log("connect event!")})),window.ethereum.on("disconnect",(e=>{console.log("disconnect.."),this.index.setConnectedStatus("disconnected"),this.accounts=[],this.token=null,this.networkId=!1})),window.ethereum.on("accountsChanged",(e=>{console.log("accounts changed: "),console.log(e),0==e.length?(this.index.setConnectedStatus("disconnected"),this.accounts=[],this.token=null,this.networkId=!1):(this.tryConnect(),this.index.setConnectedStatus("connected")),this.accounts=e})),window.ethereum.on("chainChanged",(e=>{console.log("chain CHANGED! newtowk id = "+e),"0x1"!=e?this.networkId=!1:this.connect(),this.checkNetwork()})),window.ethereum.on("networkChanged",(e=>{console.log("NETWORK CHANGED! newtowk id = "+e),this.networkId=e,!1!==e&&(this.networkId=parseInt(e,10),isNaN(this.networkId)&&(this.networkId=!1)),this.checkNetwork()}))):document.getElementById("connect").style.display="none"}getAccount(){return 0!=this.accounts.length&&this.accounts[0]}getContractLink(){if(void 0!==j){let e=j.address;return'<a href="https://etherscan.io/address/'+e+'" target="_blank">'+e+"</a>"}return""}getOpenSeaLink(e){return void 0!==j?'<a class="button" href="https://opensea.io/assets/'+j.address+"/"+e+'" target="_blank"><span class="desktop-only">View on&nbsp;</span>OpenSea</a>':""}checkNetwork(){if(!1===this.networkId&&(this.token=null,this.index.setConnectedStatus("disconnected")),1===this.networkId){let e=j.address;this.token=new this.web3.eth.Contract(j.abi,e),this.index.setConnectedStatus("connected")}else this.index.setConnectedStatus("switch")}async tryConnect(){try{if(void 0===window.ethereum)return void console.log("install meta mask!");let e=window.ethereum;if(this.web3=new Web3(e),this.networkId=await this.web3.eth.net.getId(),this.networkId=parseInt(this.networkId,10),isNaN(this.networkId)&&(this.networkId=!1),"private"==await this.web3.eth.net.getNetworkType()&&(this.networkId=!1),console.log("network id = "+this.networkId),this.accounts=await this.web3.eth.getAccounts(),console.log("accounts = "),console.log(this.accounts),0==this.accounts.length)return void(this.networkId=!1);if(1!=this.networkId)return await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x1"}]}),void(this.token=null);if(void 0!==j){let e=j.address;this.token=new this.web3.eth.Contract(j.abi,e)}else{let e=PETARP.networks[netId].address;this.token=new this.web3.eth.Contract(PETARP.abi,e)}this.index.setConnectedStatus("connected")}catch(e){console.error(e),this.index.setConnectedStatus("disconnected"),console.log(e.message)}}async connect(){try{if(this.index.setConnectedStatus("connecting"),void 0===window.ethereum)return void console.log("install meta mask!");let e=window.ethereum;if(this.web3=new Web3(e),this.networkId=await this.web3.eth.net.getId(),this.networkId=parseInt(this.networkId,10),isNaN(this.networkId)&&(this.networkId=!1),"private"==await this.web3.eth.net.getNetworkType()&&(this.networkId=!1),await window.ethereum.request({method:"eth_requestAccounts"}),this.accounts=await this.web3.eth.getAccounts(),1!=this.networkId)return await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x1"}]}),void(this.token=null);if(void 0!==j){let e=j.address;this.token=new this.web3.eth.Contract(j.abi,e)}else{let e=PETARP.networks[netId].address;this.token=new this.web3.eth.Contract(PETARP.abi,e)}this.index.setConnectedStatus("connected")}catch(e){console.error(e),this.index.setConnectedStatus("disconnected"),console.log(e.message)}}async switchToMainnet(){await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x1"}]})}async checkAccounts(){await window.ethereum.request({method:"eth_requestAccounts"}),this.accounts=await this.web3.eth.getAccounts(),this.index.setConnectedStatus("connected")}mint(){if(null!=this.token)return this.token.methods.mintToken().send({from:this.accounts[0],value:this.mintPriceWei})}isConnected(){return null!==this.token}async getMintPrice(){if(null==this.token||1!==this.networkId){let e=await fetch(this.server+"mint-price");return(await e.json()).value}let e=await this.token.methods.mintPrice().call();return this.mintPriceWei=e,this.mintPrice=this.web3.utils.fromWei(e),this.mintPrice}async getTokenCount(){if(null==this.token||1!==this.networkId){let e=await fetch(this.server+"token-count");return(await e.json()).value}return await this.token.methods.totalSupply().call()}async getTokenVersions(){let e=await fetch(this.server+"versions");return(await e.json()).value}async setTokenId(e){if(null!=this.token&&1==this.networkId)this.cachedTokenId=!1;else{let t=await fetch(this.server+e);if(console.log("set token id response "),console.log(t),void 0===t)return this.cachedTokenId=!1,this.cachedTokenData=null,!1;let n=await t.json();if(void 0!==n.value.success&&0==n.value.success)return!1;console.log("data = "),console.log(n),this.cachedTokenId=e,this.cachedTokenData=n.value,0!==this.cachedTokenData.owner.indexOf("0x")&&(this.cachedTokenData.owner="0x"+this.cachedTokenData.owner)}let t=this.server+e+"/video",n=await fetch(t),s=await n.json(),i=s.value.status;return this.v=s.value.v,"Generated"==i?(this.videoPath=s.value.path,this.videoStatus="Generated"):(this.videoPath=!1,this.videoStatus="Not Generated"),!0}async getMintDate(e){if(!1===e)return!1;if(null==this.token||1!==this.networkId)return e==this.cachedTokenId?this.cachedTokenData.mintDate:"";let t=(await this.token.getPastEvents("Transfer",{fromBlock:0,toBlock:"latest",filter:{tokenId:e,from:"0x0000000000000000000000000000000000000000"}}))[0].blockNumber;console.log("block number = "+t);let n=(await this.web3.eth.getBlock(t)).timestamp,s=new Date(1e3*n),i=s.getUTCFullYear(),o=s.getUTCMonth()+1;o=("00"+o).slice(-2);let r=s.getUTCDate();return r=("00"+r).slice(-2),i+"-"+o+"-"+r}getVersion(){return this.v}getVideoLink(){return this.videoPath}async getTokenOwner(e){if(!1===e)return!1;if(null==this.token||1!==this.networkId)return e==this.cachedTokenId&&this.cachedTokenData.owner;let t=await this.token.methods.ownerOf(e).call();return 0!==t.indexOf("0x")&&(t="0x"+t),t}async balanceOf(e){return null==this.token||1!==this.networkId?0:await this.token.methods.balanceOf(e).call()}async tokenOfOwnerByIndex(e,t){return null==this.token||1!==this.networkId?"":await this.token.methods.tokenOfOwnerByIndex(e,t).call()}async isOwner(e){return null!=this.token&&1===this.networkId&&(0!==this.accounts.length?await this.getTokenOwner(e)===this.accounts[0]:void 0)}hexToBytes(e){let t=[];for(let n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t}async getUnmodifiedPRG(e){return fetch("https://nopsta.com/petarp/prgs/"+e+"_unmodified.prg")}async getData(e){if(e=parseInt(e,10),null==this.token||1!==this.networkId){if(e==this.cachedTokenId){let e=this.hexToBytes(this.cachedTokenData.prg);return new Uint8Array(e)}return!1}if(!(e>=await this.getTokenCount())){try{console.log("get data ...");let t=await this.token.methods.getTokenPRG(e,!1).call(),n=this.web3.utils.hexToBytes(t);return n=new Uint8Array(n),await this.token.methods.tokenURI(e).call(),n}catch(e){console.error(e),console.log(e.message)}return!1}console.log("not minted yet!")}async getTimeSinceLastTransfer(e){return!1===e?0:null==this.token||1!==this.networkId?e==this.cachedTokenId&&this.cachedTokenData.timeSinceTransfer:await this.token.methods.getSecondsSinceLastTransfer(e).call()}async getLastTransferDate(e){if(null==this.token||1!==this.networkId)return;let t=await this.token.getPastEvents("Transfer",{filter:{tokenId:e},fromBlock:0,toBlock:"latest"},((e,t)=>{console.log("results = "),console.log(t)}));return console.log(t),t}async checkCanSetByte(e,t,n){try{await this.token.methods.checkCanSetByte(this.accounts[0],e,t,n).call()}catch(e){let t=!1,n=e.message,s=n.indexOf('"reason":');if(-1!==s){s+=10;let e=n.indexOf('"',s+4);-1!==e&&(t=n.substr(s,e-s).trim().replace(/\"/g,""),console.log("reason = "+t))}return console.log(e.message),console.log(e),!1}return!0}transfer(e,t,n){console.log("transfer "+e+" from: "+t+" to: "+n),this.token.methods.transferFrom(t,n,e).send({from:this.accounts[0],value:0})}setByte(e,t,n,s){if(this.isOwner(e))return e=parseInt(e,10),null==this.token||1!==this.networkId?(console.log("no token"),[]):this.token.methods.setByte(e,t,n,s).send({from:this.accounts[0],value:0})}setBytes(e,t,n){if(this.isOwner(e))return e=parseInt(e,10),null==this.token||1!==this.networkId?(console.log("no token"),[]):(console.log("petarp token set bytes"),console.log(t),console.log(n),this.token.methods.setBytes(e,t,n).send({from:this.accounts[0],value:0}))}async getAllCustomBytes(){let e=Date.now(),t=await fetch(this.server+"/custom-bytes?t="+e);return(await t.json()).value}async getCustomBytes(e){return null==this.token||1!==this.networkId?e==this.cachedTokenId?this.cachedTokenData.customBytes:[]:this.token.methods.getTokenCustomBytes(e).call()}async getUserData(e){let t=0;if(null==this.token||1!==this.networkId){if(e!=this.cachedTokenId)return{};t=this.cachedTokenData.userData}else t=await this.token.methods.getTokenUserData(e).call();let n={};return n.filterRouting=7&t,n.filterValue=t>>3&31,0==n.filterValue?n.filterValue=176:n.filterValue=8*(n.filterValue-1),n.filterMode=t>>8&7,n.colorOffset=t>>11&15,n.detuneMode=t>>15&7,n.rootNoteMode=t>>18&3,n.journeyMode=t>>20&1,n.customBytes=t>>21&1,0==n.customBytes?n.customBytes=1:n.customBytes=0,n}async checkCanSetUserData(e){if(null==this.token||1!==this.networkId)return!1;try{await this.token.methods.checkCanSetUserData(this.accounts[0],e).call()}catch(e){let t=!1,n=e.message,s=n.indexOf('"reason":');if(-1!==s){s+=10;let e=n.indexOf('"',s+4);-1!==e&&(t=n.substr(s,e-s).trim().replace(/\"/g,""),console.log("reason = "+t))}return console.log(e.message),console.log(e),!1}return console.log("can set user data"),!0}setUserData(e,t,n,s,i,o,r,a,d){if(null==this.token||1!==this.networkId)return;(s-=3)<0&&(s+=7);let l=7&t^7|(31&(n=176==n?0:Math.floor(n/8)+1))<<3|(7&s)<<8|(15&i)<<11|(7&o)<<15|(3&r)<<18|(1&a)<<20|(1&(d=0==d?1:0))<<21;return this.token.methods.setTokenUserData(e,l).send({from:this.accounts[0],value:0})}async requestCheckChanges(e){let t=Date.now(),n=await fetch(this.server+e+"/request-check?t="+t);console.log(n)}async checkCanUnlock(e,t){console.log("check can unlock");try{await this.token.methods.checkCanUnlock(this.accounts[0],e,t).call()}catch(e){let t=!1,n=e.message,s=n.indexOf('"reason":');if(-1!==s){s+=10;let e=n.indexOf('"',s+4);-1!==e&&(t=n.substr(s,e-s).trim().replace(/\"/g,""),console.log("reason = "+t))}return console.log(e.message),console.log(e),!1}return console.log("can unlock!"),!0}unlock(e,t){return e=parseInt(e,10),null==this.token||1!==this.networkId?(console.log("no token"),[]):this.token.methods.unlock(e,t).send({from:this.accounts[0],value:0})}async getUnlocks(e){return(e=parseInt(e,10))>=await this.getTokenCount()?(console.log("not minted yet!"),[]):null!=this.token&&1===this.networkId||e!=this.cachedTokenId?await this.token.methods.getTokenUnlocks(e).call():this.cachedTokenData.unlocks}async getParams(e){if(e=parseInt(e,10),null==this.token||1!==this.networkId){if(e==this.cachedTokenId){let e=this.cachedTokenData.params;return{p0:e[0],p1:e[1],p2:e[2],p3:e[3],p4:e[4],p5:e[5],p6:e[6],p7:e[7]}}return!1}return e>=await this.getTokenCount()?(console.log("not minted yet!"),[]):await this.token.methods.getTokenParams(e).call()}}const G=["ANE","SHY","SHX","RRA","ISB","SHA","LXA","DCP","SAX","LAS","SRE","SHS","ADC","AND","ANC","ASL","ALR","BCC","BCS","BEQ","BIT","BMI","BNE","BPL","BRK","BVC","BVS","CLC","CLD","CLI","CLV","CMP","CPX","CPY","DEC","DEX","DEY","EOR","INC","INX","INY","JMP","JSR","LAX","LDA","LDX","LDY","LSR","NOP","ORA","PHA","PHP","PLA","PLP","RLA","ROL","ROR","RTI","RTS","SBC","SBX","SEC","SED","SEI","SLO","STA","STX","STY","TAX","TAY","TSX","TXA","TXS","TYA","???"];class K{constructor(e){this.fontFace=e.font,this.debuggerFont=null,this.fontCanvas=null,this.fontCanvasColors=[],this.fontSize=14,this.fontCharWidth=10,this.fontCharHeight=18,this.hexNumberCanvas=[],this.hexNumberPositions=[],this.cmdPositions={},this.retinaFont=!0,this.cmdCanvas=null,this.colorCmdCanvas=null,this.fontsCreated=!1,this.hex2Digit=[],this.fontColorList=["#57a259","#889aff","#ff4411"],this.numberColorList=["#ffffff","#aaaaaa","#57a259","#777777","#aaffaa"];for(var t=0;t<256;t++){var n=("00"+t.toString(16)).substr(-2),s=[];s.push(n.charCodeAt(0)),s.push(n.charCodeAt(1)),this.hex2Digit.push(s)}this.createFonts()}createFonts(){this.fontsCreated||(this.initDebuggerFont(),this.initHexNumberCanvas(),this.initCmdCanvas(),this.initColorCmdCanvas(),this.fontsCreated=!0)}setFontSize(e){this.fontSize=e,this.fontsCreated&&(this.fontsCreated=!1,this.initDebuggerFont(),this.createFonts())}getDevicePixelRatio(){let e=Math.floor(window.devicePixelRatio);return(isNaN(e)||e<1)&&(e=1),e}initDebuggerFont(){let e=this.getDevicePixelRatio();this.retinaFont?this.fontPx=this.fontSize*e:this.fontPx=this.fontSize,this.font=this.fontPx+'px "'+this.fontFace.family+'", Courier, monospace',null==this.fontCanvas&&(this.fontCanvas=document.createElement("canvas"),this.fontCanvas.style.position="absolute",this.fontCanvas.style.top="-100px",this.fontCanvas.style.left="0px",this.fontCanvas.style.display="none",document.body.appendChild(this.fontCanvas)),this.fontCanvas.width=3*this.fontPx,this.fontCanvas.height=3*this.fontPx;var t=this.fontCanvas.getContext("2d");t.font=this.font,t.clearRect(0,0,this.fontCanvas.width,this.fontCanvas.height);var n=0;t.fillStyle="#ffffff";for(var s=0;s<128;s++){var i=String.fromCharCode(s),o=t.measureText(i);o.width>n&&(n=o.width),t.fillText(i,0,2*this.fontPx)}for(var r=this.fontCanvas.width,a=this.fontCanvas.height,d=!1,l=!1,c=t.getImageData(0,0,this.fontCanvas.width,this.fontCanvas.height),h=0;h<a;h++){for(var p=!1,m=0;m<r;m++){var u=h*r*4+4*m;c.data[u]>100&&(p=!0)}!1===d&&p&&(d=h),!1===d||!1!==l||p||(l=h)}for(this.fontCharHeight=l-d+3,this.fontCharWidth=Math.ceil(n),this.baseLine=l-2*this.fontPx,this.fontCanvas.width=128*this.fontCharWidth,this.fontCanvas.height=this.fontCharHeight+6,(t=this.fontCanvas.getContext("2d")).font=this.font,t.clearRect(0,0,this.fontCanvas.width,this.fontCanvas.height),t.fillStyle="#ffffff",s=0;s<128;s++)i=String.fromCharCode(s),t.fillText(i,s*this.fontCharWidth,this.fontCharHeight-this.baseLine);for(var y=this.fontColorList,g=0;g<y.length;g++)for(this.fontCanvasColors.length<=g&&(this.fontCanvasColors[g]=document.createElement("canvas")),this.fontCanvasColors[g].width=128*this.fontCharWidth,this.fontCanvasColors[g].height=this.fontCharHeight+6,(t=this.fontCanvasColors[g].getContext("2d")).font=this.font,t.fillStyle="#111111",t.clearRect(0,0,this.fontCanvas.width,this.fontCanvas.height),t.fillStyle=y[g],s=0;s<128;s++)i=String.fromCharCode(s),t.fillText(i,s*this.fontCharWidth,this.fontCharHeight-this.baseLine)}initCmdCanvas(){var e=G.length;null==this.cmdCanvas&&(this.cmdCanvas=document.createElement("canvas")),this.cmdCanvas.width=3*this.fontCharWidth,this.cmdCanvas.height=e*this.fontCharHeight;let t=this.cmdCanvas.getContext("2d");t.font=this.font,t.fillStyle="#ffffff";for(var n=this.fontCharWidth,s=this.fontCharHeight,i=0,o=0,r=!1,a=0;a<e;a++){i=0;var d=G[a];this.cmdPositions[d]={x:i,y:o};for(var l=d.length,c=0;c<l;c++)r=String.fromCharCode(d.charCodeAt(c)),t.fillText(r,i,o+s-this.baseLine),i+=n;i=0,o+=s}}initColorCmdCanvas(){var e=G.length;null==this.colorCmdCanvas&&(this.colorCmdCanvas=document.createElement("canvas")),this.colorCmdCanvas.width=3*this.fontCharWidth,this.colorCmdCanvas.height=e*this.fontCharHeight;let t=this.colorCmdCanvas.getContext("2d");t.font=this.font,t.fillStyle="#b294bb";for(var n=this.fontCharWidth,s=this.fontCharHeight,i=0,o=0,r=!1,a=0;a<e;a++){i=0;var d=G[a];this.cmdPositions[d]={x:i,y:o};for(var l=d.length,c=0;c<l;c++)r=String.fromCharCode(d.charCodeAt(c)),t.fillText(r,i,o+s-this.baseLine),i+=n;i=0,o+=s}}drawText(e,t,n,s){for(var i=this.fontCharWidth,o=this.fontCharHeight,r=t.length,a=0;a<r;a++){let r=t.charCodeAt(a)*i,d=0,l=i,c=o,h=i,p=o;e.drawImage(this.fontCanvas,r,d,l,c,n+a*i,s,h,p)}}initHexNumberCanvas(){for(var e=this.numberColorList,t=0;t<e.length;t++){this.hexNumberCanvas.length<=t&&(this.hexNumberCanvas[t]=document.createElement("canvas")),this.hexNumberCanvas[t].width=32*this.fontCharWidth,this.hexNumberCanvas[t].height=16*this.fontCharHeight;var n=this.hexNumberCanvas[t].getContext("2d");n.clearRect(0,0,this.hexNumberCanvas[t].width,this.hexNumberCanvas[t].height),n.font=this.font,n.fillStyle=e[t];for(var s=this.fontCharWidth,i=this.fontCharHeight,o=0,r=0,a=!1,d=0;d<256;d++){0!==d&&d%16==0&&(o=0,r+=i);var l=this.hex2Digit[d];this.hexNumberPositions[d]={x:o,y:r};for(var c=0;c<2;c++)a=String.fromCharCode(l[c]),n.fillText(a,o,r+i-this.baseLine),o+=s}}}}const J=10,Z=11,$=[{opcode:0,cmd:"BRK",addrmode:3,bytes:1},{opcode:1,cmd:"ORA",addrmode:9,bytes:2},{opcode:2,cmd:"???",bytes:1},{opcode:3,cmd:"SLO",bytes:2,illegal:!0,addrmode:9},{opcode:4,cmd:"NOP",bytes:1,illegal:!0,addrmode:2},{opcode:5,cmd:"ORA",addrmode:2,bytes:2},{opcode:6,cmd:"ASL",addrmode:2,bytes:2},{opcode:7,cmd:"SLO",bytes:2,illegal:!0,addrmode:2},{opcode:8,cmd:"PHP",addrmode:3,bytes:1},{opcode:9,cmd:"ORA",addrmode:0,bytes:2},{opcode:10,cmd:"ASL",addrmode:12,bytes:1},{opcode:11,cmd:"ANC",addrmode:0,bytes:2},{opcode:12,cmd:"NOP",bytes:1,illegal:!0,addrmode:1},{opcode:13,cmd:"ORA",addrmode:1,bytes:3},{opcode:14,cmd:"ASL",addrmode:1,bytes:3},{opcode:15,cmd:"SLO",bytes:3,illegal:!0,addrmode:1},{opcode:16,cmd:"BPL",addrmode:Z,bytes:2},{opcode:17,cmd:"ORA",addrmode:J,bytes:2},{opcode:18,cmd:"???",bytes:1},{opcode:19,cmd:"SLO",bytes:2,illegal:!0,addrmode:J},{opcode:20,cmd:"NOP",bytes:1,illegal:!0,addrmode:7},{opcode:21,cmd:"ORA",addrmode:7,bytes:2},{opcode:22,cmd:"ASL",addrmode:7,bytes:2},{opcode:23,cmd:"SLO",bytes:2,illegal:!0,addrmode:7},{opcode:24,cmd:"CLC",addrmode:3,bytes:1},{opcode:25,cmd:"ORA",addrmode:6,bytes:3},{opcode:26,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:27,cmd:"SLO",bytes:3,illegal:!0,addrmode:6},{opcode:28,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:29,cmd:"ORA",addrmode:5,bytes:3},{opcode:30,cmd:"ASL",addrmode:5,bytes:3},{opcode:31,cmd:"SLO",bytes:3,illegal:!0,addrmode:5},{opcode:32,cmd:"JSR",addrmode:1,bytes:3},{opcode:33,cmd:"AND",addrmode:9,bytes:2},{opcode:34,cmd:"???",bytes:1},{opcode:35,cmd:"RLA",bytes:2,illegal:!0},{opcode:36,cmd:"BIT",addrmode:2,bytes:2},{opcode:37,cmd:"AND",addrmode:2,bytes:2},{opcode:38,cmd:"ROL",addrmode:2,bytes:2},{opcode:39,cmd:"RLA",bytes:2,illegal:!0},{opcode:40,cmd:"PLP",addrmode:3,bytes:1},{opcode:41,cmd:"AND",addrmode:0,bytes:2},{opcode:42,cmd:"ROL",addrmode:12,bytes:1},{opcode:43,cmd:"ANC",addrmode:0,bytes:2},{opcode:44,cmd:"BIT",addrmode:1,bytes:3},{opcode:45,cmd:"AND",addrmode:1,bytes:3},{opcode:46,cmd:"ROL",addrmode:1,bytes:3},{opcode:47,cmd:"RLA",bytes:3,illegal:!0},{opcode:48,cmd:"BMI",addrmode:Z,bytes:2},{opcode:49,cmd:"AND",addrmode:J,bytes:2},{opcode:50,cmd:"???",bytes:1},{opcode:51,cmd:"RLA",bytes:2,illegal:!0},{opcode:52,cmd:"NOP",bytes:1,illegal:!0,addrmode:7},{opcode:53,cmd:"AND",addrmode:7,bytes:2},{opcode:54,cmd:"ROL",addrmode:7,bytes:2},{opcode:55,cmd:"RLA",bytes:2,illegal:!0},{opcode:56,cmd:"SEC",addrmode:3,bytes:1},{opcode:57,cmd:"AND",addrmode:6,bytes:3},{opcode:58,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:59,cmd:"RLA",bytes:3,illegal:!0},{opcode:60,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:61,cmd:"AND",addrmode:5,bytes:3},{opcode:62,cmd:"ROL",addrmode:5,bytes:3},{opcode:63,cmd:"RLA",bytes:3,illegal:!0},{opcode:64,cmd:"RTI",addrmode:3,bytes:1},{opcode:65,cmd:"EOR",addrmode:9,bytes:2},{opcode:66,cmd:"???",bytes:1},{opcode:67,cmd:"SRE",bytes:1,illegal:!0,addrmode:J},{opcode:68,cmd:"NOP",bytes:1,illegal:!0,addrmode:2},{opcode:69,cmd:"EOR",addrmode:2,bytes:2},{opcode:70,cmd:"LSR",addrmode:2,bytes:2},{opcode:71,cmd:"SRE",bytes:1,illegal:!0,addrmode:2},{opcode:72,cmd:"PHA",addrmode:3,bytes:1},{opcode:73,cmd:"EOR",addrmode:0,bytes:2},{opcode:74,cmd:"LSR",addrmode:12,bytes:1},{opcode:75,cmd:"ALR",bytes:2,illegal:!0,addrmode:0},{opcode:76,cmd:"JMP",addrmode:1,bytes:3},{opcode:77,cmd:"EOR",addrmode:1,bytes:3},{opcode:78,cmd:"LSR",addrmode:1,bytes:3},{opcode:79,cmd:"SRE",bytes:1,illegal:!0,addrmode:1},{opcode:80,cmd:"BVC",addrmode:Z,bytes:2},{opcode:81,cmd:"EOR",addrmode:J,bytes:2},{opcode:82,cmd:"???",bytes:1},{opcode:83,cmd:"SRE",bytes:1,illegal:!0,addrmode:J},{opcode:84,cmd:"NOP",bytes:1,illegal:!0,addrmode:7},{opcode:85,cmd:"EOR",addrmode:7,bytes:2},{opcode:86,cmd:"LSR",addrmode:7,bytes:2},{opcode:87,cmd:"SRE",bytes:1,illegal:!0,addrmode:7},{opcode:88,cmd:"CLI",addrmode:3,bytes:1},{opcode:89,cmd:"EOR",addrmode:6,bytes:3},{opcode:90,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:91,cmd:"SRE",bytes:1,illegal:!0,addrmode:6},{opcode:92,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:93,cmd:"EOR",addrmode:5,bytes:3},{opcode:94,cmd:"LSR",addrmode:5,bytes:3},{opcode:95,cmd:"SRE",bytes:1,illegal:!0,addrmode:5},{opcode:96,cmd:"RTS",addrmode:3,bytes:1},{opcode:97,cmd:"ADC",addrmode:9,bytes:2},{opcode:98,cmd:"???",bytes:1},{opcode:99,cmd:"RRA",bytes:1,illegal:!0,addrmode:9},{opcode:100,cmd:"NOP",bytes:1,illegal:!0,addrmode:2},{opcode:101,cmd:"ADC",addrmode:2,bytes:2},{opcode:102,cmd:"ROR",addrmode:2,bytes:2},{opcode:103,cmd:"RRA",bytes:1,illegal:!0,addrmode:2},{opcode:104,cmd:"PLA",addrmode:3,bytes:1},{opcode:105,cmd:"ADC",addrmode:0,bytes:2},{opcode:106,cmd:"ROR",addrmode:12,bytes:1},{opcode:107,cmd:"ARR",bytes:1,illegal:!0,addrmode:0},{opcode:108,cmd:"JMP",addrmode:4,bytes:3},{opcode:109,cmd:"ADC",addrmode:1,bytes:3},{opcode:110,cmd:"ROR",addrmode:1,bytes:3},{opcode:111,cmd:"RRA",bytes:1,illegal:!0,addrmode:1},{opcode:112,cmd:"BVS",addrmode:Z,bytes:2},{opcode:113,cmd:"ADC",addrmode:J,bytes:2},{opcode:114,cmd:"???",bytes:1},{opcode:115,cmd:"RRA",bytes:1,illegal:!0,addrmode:J},{opcode:116,cmd:"NOP",bytes:1,illegal:!0,addrmode:7},{opcode:117,cmd:"ADC",addrmode:7,bytes:2},{opcode:118,cmd:"ROR",addrmode:7,bytes:2},{opcode:119,cmd:"RRA",bytes:1,illegal:!0,addrmode:7},{opcode:120,cmd:"SEI",addrmode:3,bytes:1},{opcode:121,cmd:"ADC",addrmode:6,bytes:3},{opcode:122,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:123,cmd:"RRA",bytes:1,illegal:!0,addrmode:6},{opcode:124,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:125,cmd:"ADC",addrmode:5,bytes:3},{opcode:126,cmd:"ROR",addrmode:5,bytes:3},{opcode:127,cmd:"RRA",bytes:1,illegal:!0,addrmode:5},{opcode:128,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:129,cmd:"STA",addrmode:9,bytes:2},{opcode:130,cmd:"NOP",bytes:1,illegal:!0,addrmode:0},{opcode:131,cmd:"SAX",bytes:1,illegal:!0,addrmode:9},{opcode:132,cmd:"STY",addrmode:2,bytes:2},{opcode:133,cmd:"STA",addrmode:2,bytes:2},{opcode:134,cmd:"STX",addrmode:2,bytes:2},{opcode:135,cmd:"SAX",bytes:1,illegal:!0,addrmode:2},{opcode:136,cmd:"DEY",addrmode:3,bytes:1},{opcode:137,cmd:"NOP",bytes:1,illegal:!0,addrmode:0},{opcode:138,cmd:"TXA",addrmode:3,bytes:1},{opcode:139,cmd:"ANE",bytes:1,illegal:!0,addrmode:0},{opcode:140,cmd:"STY",addrmode:1,bytes:3},{opcode:141,cmd:"STA",addrmode:1,bytes:3},{opcode:142,cmd:"STX",addrmode:1,bytes:3},{opcode:143,cmd:"SAX",bytes:1,illegal:!0,addrmode:1},{opcode:144,cmd:"BCC",addrmode:Z,bytes:2},{opcode:145,cmd:"STA",addrmode:J,bytes:2},{opcode:146,cmd:"???",bytes:1},{opcode:147,cmd:"SHA",bytes:1,illegal:!0,addrmode:J},{opcode:148,cmd:"STY",addrmode:7,bytes:2},{opcode:149,cmd:"STA",addrmode:7,bytes:2},{opcode:150,cmd:"STX",addrmode:8,bytes:2},{opcode:151,cmd:"SAX",bytes:1,illegal:!0,addrmode:7},{opcode:152,cmd:"TYA",addrmode:3,bytes:1},{opcode:153,cmd:"STA",addrmode:6,bytes:3},{opcode:154,cmd:"TXS",addrmode:3,bytes:1},{opcode:155,cmd:"SHS",bytes:1,illegal:!0,addrmode:6},{opcode:156,cmd:"SHY",bytes:1,illegal:!0,addrmode:5},{opcode:157,cmd:"STA",addrmode:5,bytes:3},{opcode:158,cmd:"SHX",bytes:1,illegal:!0,addrmode:5},{opcode:159,cmd:"SHA",bytes:1,illegal:!0,addrmode:5},{opcode:160,cmd:"LDY",addrmode:0,bytes:2},{opcode:161,cmd:"LDA",addrmode:9,bytes:2},{opcode:162,cmd:"LDX",addrmode:0,bytes:2},{opcode:163,cmd:"LAX",bytes:2,illegal:!0,addrmode:9},{opcode:164,cmd:"LDY",addrmode:2,bytes:2},{opcode:165,cmd:"LDA",addrmode:2,bytes:2},{opcode:166,cmd:"LDX",addrmode:2,bytes:2},{opcode:167,cmd:"LAX",bytes:2,illegal:!0,addrmode:2},{opcode:168,cmd:"TAY",addrmode:3,bytes:1},{opcode:169,cmd:"LDA",addrmode:0,bytes:2},{opcode:170,cmd:"TAX",addrmode:3,bytes:1},{opcode:171,cmd:"LXA",bytes:1,illegal:!0,addrmode:0},{opcode:172,cmd:"LDY",addrmode:1,bytes:3},{opcode:173,cmd:"LDA",addrmode:1,bytes:3},{opcode:174,cmd:"LDX",addrmode:1,bytes:3},{opcode:175,cmd:"LAX",bytes:3,illegal:!0,addrmode:1},{opcode:176,cmd:"BCS",addrmode:Z,bytes:2},{opcode:177,cmd:"LDA",addrmode:J,bytes:2},{opcode:178,cmd:"???",bytes:1},{opcode:179,cmd:"LAX",bytes:2,illegal:!0,addrmode:J},{opcode:180,cmd:"LDY",addrmode:7,bytes:2},{opcode:181,cmd:"LDA",addrmode:7,bytes:2},{opcode:182,cmd:"LDX",addrmode:7,bytes:2},{opcode:183,cmd:"LAX",bytes:2,illegal:!0,addrmode:7},{opcode:184,cmd:"CLV",addrmode:3,bytes:1},{opcode:185,cmd:"LDA",addrmode:6,bytes:3},{opcode:186,cmd:"TSX",addrmode:3,bytes:1},{opcode:187,cmd:"LAS",bytes:1,illegal:!0,addrmode:6},{opcode:188,cmd:"LDY",addrmode:5,bytes:3},{opcode:189,cmd:"LDA",addrmode:5,bytes:3},{opcode:190,cmd:"LDX",addrmode:5,bytes:3},{opcode:191,cmd:"LAX",bytes:3,illegal:!0,addrmode:5},{opcode:192,cmd:"CPY",addrmode:0,bytes:2},{opcode:193,cmd:"CMP",addrmode:9,bytes:2},{opcode:194,cmd:"NOP",bytes:1,illegal:!0,addrmode:0},{opcode:195,cmd:"DCP",bytes:1,illegal:!0,addrmode:9},{opcode:196,cmd:"CPY",addrmode:2,bytes:2},{opcode:197,cmd:"CMP",addrmode:2,bytes:2},{opcode:198,cmd:"DEC",addrmode:2,bytes:2},{opcode:199,cmd:"DCP",bytes:1,illegal:!0,addrmode:2},{opcode:200,cmd:"INY",addrmode:3,bytes:1},{opcode:201,cmd:"CMP",addrmode:0,bytes:2},{opcode:202,cmd:"DEX",addrmode:3,bytes:1},{opcode:203,cmd:"SBX",bytes:2,illegal:!0,addrmode:0},{opcode:204,cmd:"CPY",addrmode:1,bytes:3},{opcode:205,cmd:"CMP",addrmode:1,bytes:3},{opcode:206,cmd:"DEC",addrmode:1,bytes:3},{opcode:207,cmd:"DCP",bytes:1,illegal:!0,addrmode:1},{opcode:208,cmd:"BNE",addrmode:Z,bytes:2},{opcode:209,cmd:"CMP",addrmode:J,bytes:2},{opcode:210,cmd:"???",bytes:1},{opcode:211,cmd:"DCP",bytes:1,illegal:!0,addrmode:J},{opcode:212,cmd:"NOP",bytes:1,illegal:!0,addrmode:7},{opcode:213,cmd:"CMP",addrmode:7,bytes:2},{opcode:214,cmd:"DEC",addrmode:7,bytes:2},{opcode:215,cmd:"DCP",bytes:1,illegal:!0,addrmode:7},{opcode:216,cmd:"CLD",addrmode:3,bytes:1},{opcode:217,cmd:"CMP",addrmode:6,bytes:3},{opcode:218,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:219,cmd:"DCP",bytes:1,illegal:!0,addrmode:6},{opcode:220,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:221,cmd:"CMP",addrmode:5,bytes:3},{opcode:222,cmd:"DEC",addrmode:5,bytes:3},{opcode:223,cmd:"DCP",bytes:1,illegal:!0,addrmode:5},{opcode:224,cmd:"CPX",addrmode:0,bytes:2},{opcode:225,cmd:"SBC",addrmode:9,bytes:2},{opcode:226,cmd:"NOP",bytes:1,illegal:!0,addrmode:0},{opcode:227,cmd:"ISB",bytes:1,illegal:!0,addrmode:9},{opcode:228,cmd:"CPX",addrmode:2,bytes:2},{opcode:229,cmd:"SBC",addrmode:2,bytes:2},{opcode:230,cmd:"INC",addrmode:2,bytes:2},{opcode:231,cmd:"ISB",bytes:1,illegal:!0,addrmode:1},{opcode:232,cmd:"INX",addrmode:3,bytes:1},{opcode:233,cmd:"SBC",addrmode:0,bytes:2},{opcode:234,cmd:"NOP",addrmode:3,bytes:1},{opcode:235,cmd:"SBC",bytes:1,illegal:!0,addrmode:0},{opcode:236,cmd:"CPX",addrmode:1,bytes:3},{opcode:237,cmd:"SBC",addrmode:1,bytes:3},{opcode:238,cmd:"INC",addrmode:1,bytes:3},{opcode:239,cmd:"ISB",bytes:1,illegal:!0,addrmode:1},{opcode:240,cmd:"BEQ",addrmode:Z,bytes:2},{opcode:241,cmd:"SBC",addrmode:J,bytes:2},{opcode:242,cmd:"???",bytes:1},{opcode:243,cmd:"ISB",bytes:1,illegal:!0,addrmode:J},{opcode:244,cmd:"NOP",bytes:1,illegal:!0,addrmode:2},{opcode:245,cmd:"SBC",addrmode:7,bytes:2},{opcode:246,cmd:"INC",addrmode:7,bytes:2},{opcode:247,cmd:"ISB",bytes:1,illegal:!0,addrmode:7},{opcode:248,cmd:"SED",addrmode:3,bytes:1},{opcode:249,cmd:"SBC",addrmode:6,bytes:3},{opcode:250,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:251,cmd:"ISB",bytes:1,illegal:!0,addrmode:6},{opcode:252,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:253,cmd:"SBC",addrmode:5,bytes:3},{opcode:254,cmd:"INC",addrmode:5,bytes:3}];class Q{constructor(e){this.canvas=e.canvas,this.font=e.font,this.fontCanvas=this.font.fontCanvas,this.fontCanvasColors=this.font.fontCanvasColors,this.hexNumberCanvas=this.font.hexNumberCanvas,this.cmdCanvas=this.font.cmdCanvas,this.setFontMetrics(),this.setCanvasSize(),this.resize()}resize(){this.context=this.canvas.getContext("2d")}setFontMetrics(){let e=this.font.getDevicePixelRatio();this.fontCharWidth=this.font.fontCharWidth,this.fontCharHeight=this.font.fontCharHeight,this.hexNumberPositions=this.font.hexNumberPositions,this.cmdPositions=this.font.cmdPositions,this.lineHeight=this.fontCharHeight+6*e,this.cmdPositionX=19*this.fontCharWidth}setCanvasSize(){let e=this.font.getDevicePixelRatio(),t=30*this.fontCharWidth/e+8,n=4+14*this.lineHeight/e;this.canvas.width=t*e,this.canvas.height=n*e,this.canvas.style.width=t+"px",this.canvas.style.height=n+"px"}draw(){let e=this.context,t=f.getPC(),n=null,s=8,i=4,o=0,r=0,a=this.fontCharWidth,d=this.fontCharHeight,l=0,c=this.fontCharWidth,h=this.fontCharHeight,p=this.fontCharWidth,m=this.fontCharHeight,u=0,y=0;e.fillStyle="#111111",e.fillRect(0,0,this.canvas.width,this.canvas.height);let g=t;for(let t=0;t<14;t++){u=g>>8&255,y=255&g,n=this.hexNumberPositions[u],o=n.x,r=n.y,e.drawImage(this.hexNumberCanvas[0],o,r,2*c,h,s,i,2*p,m),s+=2*p,n=this.hexNumberPositions[y],o=n.x,r=n.y,e.drawImage(this.hexNumberCanvas[0],o,r,2*c,h,s,i,2*p,m),e.globalAlpha=1,s+=2*p,s+=10;let t=255&f.cpuRead(g),S=$[t],A="";var b=0,v=0;void 0!==S?(A=S.cmd,b=S.bytes,v=S.addrmode):(A="???",b=1);var k=0,w=0;g+1<65535&&(k=255&f.cpuRead(g+1)),g+2<65535&&(w=255&f.cpuRead(g+2));var x=b-1,C="";if(n=this.hexNumberPositions[t],o=n.x,r=n.y,e.drawImage(this.hexNumberCanvas[0],o,r,2*c,h,s,i,2*p,m),s+=2*p,s+=p,x>0&&(n=this.hexNumberPositions[k],o=n.x,r=n.y,e.drawImage(this.hexNumberCanvas[0],o,r,2*c,h,s,i,2*p,m),s+=2*p,s+=p),x>1&&(n=this.hexNumberPositions[w],o=n.x,r=n.y,e.drawImage(this.hexNumberCanvas[0],o,r,2*c,h,s,i,2*p,m),s+=2*p),s=this.cmdPositionX,n=this.cmdPositions[A],void 0!==n?(o=n.x,r=n.y,e.drawImage(this.cmdCanvas,o,r,3*c,h,s,i,3*p,m),s+=3*p):console.log("not found: "+A),2==x){C+=" ",4==v&&(C+="(");for(var B=(C+="$").length,I=0;I<B;I++)o=C.charCodeAt(I)*a,r=0,c=a,h=d,p=a,m=d,e.drawImage(this.fontCanvas,o,r,c,h,s,i,p,m),s+=a;n=this.hexNumberPositions[w],o=n.x,r=n.y,e.drawImage(this.hexNumberCanvas[l],o,r,2*c,h,s,i,2*p,m),s+=2*p,n=this.hexNumberPositions[k],o=n.x,r=n.y,e.drawImage(this.hexNumberCanvas[l],o,r,2*c,h,s,i,2*p,m),s+=2*p,C="",5==v&&(C+=",X"),4==v&&(C+=")"),6==v&&(C+=",Y")}if(1==x){if(w=!1,C+=" ",0==v&&(C+="#",l=0),v==Z){var T=k;T>127&&(T-=256);var E=g+T+2;w=E>>8&255,k=255&E}for(v==J&&(C+="("),B=(C+="$").length,I=0;I<B;I++)o=C.charCodeAt(I)*a,r=0,c=a,h=d,p=a,m=d,e.drawImage(this.fontCanvas,o,r,c,h,s,i,p,m),s+=a;!1!==w&&(n=this.hexNumberPositions[w],o=n.x,r=n.y,e.drawImage(this.hexNumberCanvas[l],o,r,2*c,h,s,i,2*p,m),s+=2*p),n=this.hexNumberPositions[k],o=n.x,r=n.y,e.drawImage(this.hexNumberCanvas[l],o,r,2*c,h,s,i,2*p,m),s+=2*p,C="",v==J&&(C+="),Y"),5!=v&&7!=v||(C+=",X")}for(B=C.length,I=0;I<B;I++)o=C.charCodeAt(I)*a,r=0,c=a,h=d,p=a,m=d,e.drawImage(this.fontCanvas,o,r,c,h,s,i,p,m),s+=a;g+=1+x,i+=this.lineHeight,s=8}}}const ee=10,te=11,ne=[{opcode:0,cmd:"BRK",addrmode:3,bytes:1},{opcode:1,cmd:"ORA",addrmode:9,bytes:2},{opcode:2,cmd:"???",bytes:1},{opcode:3,cmd:"SLO",bytes:2,illegal:!0,addrmode:9},{opcode:4,cmd:"NOP",bytes:1,illegal:!0,addrmode:2},{opcode:5,cmd:"ORA",addrmode:2,bytes:2},{opcode:6,cmd:"ASL",addrmode:2,bytes:2},{opcode:7,cmd:"SLO",bytes:2,illegal:!0,addrmode:2},{opcode:8,cmd:"PHP",addrmode:3,bytes:1},{opcode:9,cmd:"ORA",addrmode:0,bytes:2},{opcode:10,cmd:"ASL",addrmode:12,bytes:1},{opcode:11,cmd:"ANC",addrmode:0,bytes:2},{opcode:12,cmd:"NOP",bytes:1,illegal:!0,addrmode:1},{opcode:13,cmd:"ORA",addrmode:1,bytes:3},{opcode:14,cmd:"ASL",addrmode:1,bytes:3},{opcode:15,cmd:"SLO",bytes:3,illegal:!0,addrmode:1},{opcode:16,cmd:"BPL",addrmode:te,bytes:2},{opcode:17,cmd:"ORA",addrmode:ee,bytes:2},{opcode:18,cmd:"???",bytes:1},{opcode:19,cmd:"SLO",bytes:2,illegal:!0,addrmode:ee},{opcode:20,cmd:"NOP",bytes:1,illegal:!0,addrmode:7},{opcode:21,cmd:"ORA",addrmode:7,bytes:2},{opcode:22,cmd:"ASL",addrmode:7,bytes:2},{opcode:23,cmd:"SLO",bytes:2,illegal:!0,addrmode:7},{opcode:24,cmd:"CLC",addrmode:3,bytes:1},{opcode:25,cmd:"ORA",addrmode:6,bytes:3},{opcode:26,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:27,cmd:"SLO",bytes:3,illegal:!0,addrmode:6},{opcode:28,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:29,cmd:"ORA",addrmode:5,bytes:3},{opcode:30,cmd:"ASL",addrmode:5,bytes:3},{opcode:31,cmd:"SLO",bytes:3,illegal:!0,addrmode:5},{opcode:32,cmd:"JSR",addrmode:1,bytes:3},{opcode:33,cmd:"AND",addrmode:9,bytes:2},{opcode:34,cmd:"???",bytes:1},{opcode:35,cmd:"RLA",bytes:2,illegal:!0},{opcode:36,cmd:"BIT",addrmode:2,bytes:2},{opcode:37,cmd:"AND",addrmode:2,bytes:2},{opcode:38,cmd:"ROL",addrmode:2,bytes:2},{opcode:39,cmd:"RLA",bytes:2,illegal:!0},{opcode:40,cmd:"PLP",addrmode:3,bytes:1},{opcode:41,cmd:"AND",addrmode:0,bytes:2},{opcode:42,cmd:"ROL",addrmode:12,bytes:1},{opcode:43,cmd:"ANC",addrmode:0,bytes:2},{opcode:44,cmd:"BIT",addrmode:1,bytes:3},{opcode:45,cmd:"AND",addrmode:1,bytes:3},{opcode:46,cmd:"ROL",addrmode:1,bytes:3},{opcode:47,cmd:"RLA",bytes:3,illegal:!0},{opcode:48,cmd:"BMI",addrmode:te,bytes:2},{opcode:49,cmd:"AND",addrmode:ee,bytes:2},{opcode:50,cmd:"???",bytes:1},{opcode:51,cmd:"RLA",bytes:2,illegal:!0},{opcode:52,cmd:"NOP",bytes:1,illegal:!0,addrmode:7},{opcode:53,cmd:"AND",addrmode:7,bytes:2},{opcode:54,cmd:"ROL",addrmode:7,bytes:2},{opcode:55,cmd:"RLA",bytes:2,illegal:!0},{opcode:56,cmd:"SEC",addrmode:3,bytes:1},{opcode:57,cmd:"AND",addrmode:6,bytes:3},{opcode:58,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:59,cmd:"RLA",bytes:3,illegal:!0},{opcode:60,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:61,cmd:"AND",addrmode:5,bytes:3},{opcode:62,cmd:"ROL",addrmode:5,bytes:3},{opcode:63,cmd:"RLA",bytes:3,illegal:!0},{opcode:64,cmd:"RTI",addrmode:3,bytes:1},{opcode:65,cmd:"EOR",addrmode:9,bytes:2},{opcode:66,cmd:"???",bytes:1},{opcode:67,cmd:"SRE",bytes:1,illegal:!0,addrmode:ee},{opcode:68,cmd:"NOP",bytes:1,illegal:!0,addrmode:2},{opcode:69,cmd:"EOR",addrmode:2,bytes:2},{opcode:70,cmd:"LSR",addrmode:2,bytes:2},{opcode:71,cmd:"SRE",bytes:1,illegal:!0,addrmode:2},{opcode:72,cmd:"PHA",addrmode:3,bytes:1},{opcode:73,cmd:"EOR",addrmode:0,bytes:2},{opcode:74,cmd:"LSR",addrmode:12,bytes:1},{opcode:75,cmd:"ALR",bytes:2,illegal:!0,addrmode:0},{opcode:76,cmd:"JMP",addrmode:1,bytes:3},{opcode:77,cmd:"EOR",addrmode:1,bytes:3},{opcode:78,cmd:"LSR",addrmode:1,bytes:3},{opcode:79,cmd:"SRE",bytes:1,illegal:!0,addrmode:1},{opcode:80,cmd:"BVC",addrmode:te,bytes:2},{opcode:81,cmd:"EOR",addrmode:ee,bytes:2},{opcode:82,cmd:"???",bytes:1},{opcode:83,cmd:"SRE",bytes:1,illegal:!0,addrmode:ee},{opcode:84,cmd:"NOP",bytes:1,illegal:!0,addrmode:7},{opcode:85,cmd:"EOR",addrmode:7,bytes:2},{opcode:86,cmd:"LSR",addrmode:7,bytes:2},{opcode:87,cmd:"SRE",bytes:1,illegal:!0,addrmode:7},{opcode:88,cmd:"CLI",addrmode:3,bytes:1},{opcode:89,cmd:"EOR",addrmode:6,bytes:3},{opcode:90,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:91,cmd:"SRE",bytes:1,illegal:!0,addrmode:6},{opcode:92,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:93,cmd:"EOR",addrmode:5,bytes:3},{opcode:94,cmd:"LSR",addrmode:5,bytes:3},{opcode:95,cmd:"SRE",bytes:1,illegal:!0,addrmode:5},{opcode:96,cmd:"RTS",addrmode:3,bytes:1},{opcode:97,cmd:"ADC",addrmode:9,bytes:2},{opcode:98,cmd:"???",bytes:1},{opcode:99,cmd:"RRA",bytes:1,illegal:!0,addrmode:9},{opcode:100,cmd:"NOP",bytes:1,illegal:!0,addrmode:2},{opcode:101,cmd:"ADC",addrmode:2,bytes:2},{opcode:102,cmd:"ROR",addrmode:2,bytes:2},{opcode:103,cmd:"RRA",bytes:1,illegal:!0,addrmode:2},{opcode:104,cmd:"PLA",addrmode:3,bytes:1},{opcode:105,cmd:"ADC",addrmode:0,bytes:2},{opcode:106,cmd:"ROR",addrmode:12,bytes:1},{opcode:107,cmd:"ARR",bytes:1,illegal:!0,addrmode:0},{opcode:108,cmd:"JMP",addrmode:4,bytes:3},{opcode:109,cmd:"ADC",addrmode:1,bytes:3},{opcode:110,cmd:"ROR",addrmode:1,bytes:3},{opcode:111,cmd:"RRA",bytes:1,illegal:!0,addrmode:1},{opcode:112,cmd:"BVS",addrmode:te,bytes:2},{opcode:113,cmd:"ADC",addrmode:ee,bytes:2},{opcode:114,cmd:"???",bytes:1},{opcode:115,cmd:"RRA",bytes:1,illegal:!0,addrmode:ee},{opcode:116,cmd:"NOP",bytes:1,illegal:!0,addrmode:7},{opcode:117,cmd:"ADC",addrmode:7,bytes:2},{opcode:118,cmd:"ROR",addrmode:7,bytes:2},{opcode:119,cmd:"RRA",bytes:1,illegal:!0,addrmode:7},{opcode:120,cmd:"SEI",addrmode:3,bytes:1},{opcode:121,cmd:"ADC",addrmode:6,bytes:3},{opcode:122,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:123,cmd:"RRA",bytes:1,illegal:!0,addrmode:6},{opcode:124,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:125,cmd:"ADC",addrmode:5,bytes:3},{opcode:126,cmd:"ROR",addrmode:5,bytes:3},{opcode:127,cmd:"RRA",bytes:1,illegal:!0,addrmode:5},{opcode:128,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:129,cmd:"STA",addrmode:9,bytes:2},{opcode:130,cmd:"NOP",bytes:1,illegal:!0,addrmode:0},{opcode:131,cmd:"SAX",bytes:1,illegal:!0,addrmode:9},{opcode:132,cmd:"STY",addrmode:2,bytes:2},{opcode:133,cmd:"STA",addrmode:2,bytes:2},{opcode:134,cmd:"STX",addrmode:2,bytes:2},{opcode:135,cmd:"SAX",bytes:1,illegal:!0,addrmode:2},{opcode:136,cmd:"DEY",addrmode:3,bytes:1},{opcode:137,cmd:"NOP",bytes:1,illegal:!0,addrmode:0},{opcode:138,cmd:"TXA",addrmode:3,bytes:1},{opcode:139,cmd:"ANE",bytes:1,illegal:!0,addrmode:0},{opcode:140,cmd:"STY",addrmode:1,bytes:3},{opcode:141,cmd:"STA",addrmode:1,bytes:3},{opcode:142,cmd:"STX",addrmode:1,bytes:3},{opcode:143,cmd:"SAX",bytes:1,illegal:!0,addrmode:1},{opcode:144,cmd:"BCC",addrmode:te,bytes:2},{opcode:145,cmd:"STA",addrmode:ee,bytes:2},{opcode:146,cmd:"???",bytes:1},{opcode:147,cmd:"SHA",bytes:1,illegal:!0,addrmode:ee},{opcode:148,cmd:"STY",addrmode:7,bytes:2},{opcode:149,cmd:"STA",addrmode:7,bytes:2},{opcode:150,cmd:"STX",addrmode:8,bytes:2},{opcode:151,cmd:"SAX",bytes:1,illegal:!0,addrmode:7},{opcode:152,cmd:"TYA",addrmode:3,bytes:1},{opcode:153,cmd:"STA",addrmode:6,bytes:3},{opcode:154,cmd:"TXS",addrmode:3,bytes:1},{opcode:155,cmd:"SHS",bytes:1,illegal:!0,addrmode:6},{opcode:156,cmd:"SHY",bytes:1,illegal:!0,addrmode:5},{opcode:157,cmd:"STA",addrmode:5,bytes:3},{opcode:158,cmd:"SHX",bytes:1,illegal:!0,addrmode:5},{opcode:159,cmd:"SHA",bytes:1,illegal:!0,addrmode:5},{opcode:160,cmd:"LDY",addrmode:0,bytes:2},{opcode:161,cmd:"LDA",addrmode:9,bytes:2},{opcode:162,cmd:"LDX",addrmode:0,bytes:2},{opcode:163,cmd:"LAX",bytes:2,illegal:!0,addrmode:9},{opcode:164,cmd:"LDY",addrmode:2,bytes:2},{opcode:165,cmd:"LDA",addrmode:2,bytes:2},{opcode:166,cmd:"LDX",addrmode:2,bytes:2},{opcode:167,cmd:"LAX",bytes:2,illegal:!0,addrmode:2},{opcode:168,cmd:"TAY",addrmode:3,bytes:1},{opcode:169,cmd:"LDA",addrmode:0,bytes:2},{opcode:170,cmd:"TAX",addrmode:3,bytes:1},{opcode:171,cmd:"LXA",bytes:1,illegal:!0,addrmode:0},{opcode:172,cmd:"LDY",addrmode:1,bytes:3},{opcode:173,cmd:"LDA",addrmode:1,bytes:3},{opcode:174,cmd:"LDX",addrmode:1,bytes:3},{opcode:175,cmd:"LAX",bytes:3,illegal:!0,addrmode:1},{opcode:176,cmd:"BCS",addrmode:te,bytes:2},{opcode:177,cmd:"LDA",addrmode:ee,bytes:2},{opcode:178,cmd:"???",bytes:1},{opcode:179,cmd:"LAX",bytes:2,illegal:!0,addrmode:ee},{opcode:180,cmd:"LDY",addrmode:7,bytes:2},{opcode:181,cmd:"LDA",addrmode:7,bytes:2},{opcode:182,cmd:"LDX",addrmode:7,bytes:2},{opcode:183,cmd:"LAX",bytes:2,illegal:!0,addrmode:7},{opcode:184,cmd:"CLV",addrmode:3,bytes:1},{opcode:185,cmd:"LDA",addrmode:6,bytes:3},{opcode:186,cmd:"TSX",addrmode:3,bytes:1},{opcode:187,cmd:"LAS",bytes:1,illegal:!0,addrmode:6},{opcode:188,cmd:"LDY",addrmode:5,bytes:3},{opcode:189,cmd:"LDA",addrmode:5,bytes:3},{opcode:190,cmd:"LDX",addrmode:5,bytes:3},{opcode:191,cmd:"LAX",bytes:3,illegal:!0,addrmode:5},{opcode:192,cmd:"CPY",addrmode:0,bytes:2},{opcode:193,cmd:"CMP",addrmode:9,bytes:2},{opcode:194,cmd:"NOP",bytes:1,illegal:!0,addrmode:0},{opcode:195,cmd:"DCP",bytes:1,illegal:!0,addrmode:9},{opcode:196,cmd:"CPY",addrmode:2,bytes:2},{opcode:197,cmd:"CMP",addrmode:2,bytes:2},{opcode:198,cmd:"DEC",addrmode:2,bytes:2},{opcode:199,cmd:"DCP",bytes:1,illegal:!0,addrmode:2},{opcode:200,cmd:"INY",addrmode:3,bytes:1},{opcode:201,cmd:"CMP",addrmode:0,bytes:2},{opcode:202,cmd:"DEX",addrmode:3,bytes:1},{opcode:203,cmd:"SBX",bytes:2,illegal:!0,addrmode:0},{opcode:204,cmd:"CPY",addrmode:1,bytes:3},{opcode:205,cmd:"CMP",addrmode:1,bytes:3},{opcode:206,cmd:"DEC",addrmode:1,bytes:3},{opcode:207,cmd:"DCP",bytes:1,illegal:!0,addrmode:1},{opcode:208,cmd:"BNE",addrmode:te,bytes:2},{opcode:209,cmd:"CMP",addrmode:ee,bytes:2},{opcode:210,cmd:"???",bytes:1},{opcode:211,cmd:"DCP",bytes:1,illegal:!0,addrmode:ee},{opcode:212,cmd:"NOP",bytes:1,illegal:!0,addrmode:7},{opcode:213,cmd:"CMP",addrmode:7,bytes:2},{opcode:214,cmd:"DEC",addrmode:7,bytes:2},{opcode:215,cmd:"DCP",bytes:1,illegal:!0,addrmode:7},{opcode:216,cmd:"CLD",addrmode:3,bytes:1},{opcode:217,cmd:"CMP",addrmode:6,bytes:3},{opcode:218,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:219,cmd:"DCP",bytes:1,illegal:!0,addrmode:6},{opcode:220,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:221,cmd:"CMP",addrmode:5,bytes:3},{opcode:222,cmd:"DEC",addrmode:5,bytes:3},{opcode:223,cmd:"DCP",bytes:1,illegal:!0,addrmode:5},{opcode:224,cmd:"CPX",addrmode:0,bytes:2},{opcode:225,cmd:"SBC",addrmode:9,bytes:2},{opcode:226,cmd:"NOP",bytes:1,illegal:!0,addrmode:0},{opcode:227,cmd:"ISB",bytes:1,illegal:!0,addrmode:9},{opcode:228,cmd:"CPX",addrmode:2,bytes:2},{opcode:229,cmd:"SBC",addrmode:2,bytes:2},{opcode:230,cmd:"INC",addrmode:2,bytes:2},{opcode:231,cmd:"ISB",bytes:1,illegal:!0,addrmode:1},{opcode:232,cmd:"INX",addrmode:3,bytes:1},{opcode:233,cmd:"SBC",addrmode:0,bytes:2},{opcode:234,cmd:"NOP",addrmode:3,bytes:1},{opcode:235,cmd:"SBC",bytes:1,illegal:!0,addrmode:0},{opcode:236,cmd:"CPX",addrmode:1,bytes:3},{opcode:237,cmd:"SBC",addrmode:1,bytes:3},{opcode:238,cmd:"INC",addrmode:1,bytes:3},{opcode:239,cmd:"ISB",bytes:1,illegal:!0,addrmode:1},{opcode:240,cmd:"BEQ",addrmode:te,bytes:2},{opcode:241,cmd:"SBC",addrmode:ee,bytes:2},{opcode:242,cmd:"???",bytes:1},{opcode:243,cmd:"ISB",bytes:1,illegal:!0,addrmode:ee},{opcode:244,cmd:"NOP",bytes:1,illegal:!0,addrmode:2},{opcode:245,cmd:"SBC",addrmode:7,bytes:2},{opcode:246,cmd:"INC",addrmode:7,bytes:2},{opcode:247,cmd:"ISB",bytes:1,illegal:!0,addrmode:7},{opcode:248,cmd:"SED",addrmode:3,bytes:1},{opcode:249,cmd:"SBC",addrmode:6,bytes:3},{opcode:250,cmd:"NOP",bytes:1,illegal:!0,addrmode:3},{opcode:251,cmd:"ISB",bytes:1,illegal:!0,addrmode:6},{opcode:252,cmd:"NOP",bytes:1,illegal:!0,addrmode:5},{opcode:253,cmd:"SBC",addrmode:5,bytes:3},{opcode:254,cmd:"INC",addrmode:5,bytes:3}];class se{constructor(e){this.canvas=e.canvas,this.font=e.font,this.petArpDisplay=e.petArpDisplay,this.petArpToken=e.petArpToken,this.index=e.index,this.tokenId=0,this.fontCanvas=this.font.fontCanvas,this.fontCanvasColors=this.font.fontCanvasColors,this.hexNumberCanvas=this.font.hexNumberCanvas,this.cmdCanvas=this.font.colorCmdCanvas,this.byteInput=document.getElementById("petarp-byte-value"),this.byteInput.style.display="none",this.byteChanged=!1,this.prg_data_unmodified=[],this.prg_data=[],this.highlightBytePosition=!1,this.selectedByteAddress=!1,this.selectedPosition=!1,this.highlightByteX=!1,this.highlightByteY=!1,this.canvasHeight=!1,this.canvasScale=1,this.canvasWidth=!1,this.firstLine=0,this.contentHeight=0,this.vScrollBarWidth=10,this.vScrollBarPosition=0,this.vScrollBarPositionHeight=10,this.mouseInScrollBar=!1,this.mouseDownVScrollY=!1,this.slotTimePeriod=64,this.scrollY=0,this.dragCanvas=!1,this.lines=[],this.lineBytePosition=[],this.selectedByteSlot=0,this.settingsStart=1826,this.settingsEnd=this.settingsStart+8,this.paramsStart=1837,this.paramsEnd=this.paramsStart+8,this.unlocksStart=1845,this.unlocksEnd=1849,this.byteSlots=[{position:!1,address:!1,value:!1},{position:!1,address:!1,value:!1},{position:!1,address:!1,value:!1},{position:!1,address:!1,value:!1},{position:!1,address:!1,value:!1},{position:!1,address:!1,value:!1},{position:!1,address:!1,value:!1},{position:!1,address:!1,value:!1}],this.allCustomBytes=[],this.usedBytes=[],this.byteChanged=!1,this.setFontMetrics(),this.setCanvasSize(),this.resize(),this.initEvents()}initEvents(){this.canvas.addEventListener("pointermove",(e=>{this.mouseMove(e)})),this.canvas.addEventListener("pointerdown",(e=>{this.mouseDown(e)})),this.canvas.addEventListener("pointerup",(e=>{this.mouseUp(e)})),this.canvas.addEventListener("wheel",(e=>{this.mouseWheel(e)})),this.byteInput.addEventListener("blur",(e=>{this.byteInputBlur()})),this.byteInput.addEventListener("focus",(e=>{this.byteInputFocus()})),this.byteInput.addEventListener("keypress",(e=>{this.byteInputKeyPress(e)})),this.byteInput.addEventListener("keyup",(e=>{this.byteInputKeyUp(e)})),this.byteInput.addEventListener("change",(e=>{this.byteInputKeyUp(e)}));var e=document.getElementsByClassName("petarp-byte-slot");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(e=>{let t=document.querySelector('input[name="petarp-byte-slot"]:checked').value;this.setSelectedSlot(t)}));var t=document.getElementsByClassName("petarp-byte-remove");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(t=>{t.preventDefault(),this.byteRemove(e)}));let n=document.getElementsByClassName("petarp-byte-link");for(let e=0;e<n.length;e++)n[e].addEventListener("click",(e=>{let t=e.target.getAttribute("data-index");this.setSelectedSlot(t),this.clickOnAddress(t)}))}resize(){this.context=this.canvas.getContext("2d"),this.canvasHeight=this.canvas.height,this.canvasWidth=this.canvas.width}async getAllCustomBytes(){this.allCustomBytes=await this.petArpToken.getAllCustomBytes(),this.setUsedBytes()}setUsedBytes(){for(let e=0;e<2048;e++)this.usedBytes[e]=!1;var e=this.selectedByteSlot;for(let t=0;t<this.allCustomBytes.length;t++)if(this.allCustomBytes[t].tokenId!=this.tokenId&&e<this.allCustomBytes[t].position.length){let n=this.allCustomBytes[t].position[e];n>0&&n<2048&&(this.usedBytes[n]=this.allCustomBytes[t].tokenId)}}async connectedStatusChanged(){this.saveBytesError("");let e=await this.petArpToken.isOwner(this.tokenId);document.getElementById("petarp-bytes-editor-owner").innerHTML=e?"You own this":"You need to be connected with an account which owns this to be able to save changes"}async setTokenId(e){this.tokenId=e,this.timeSinceLastTransfer=await this.petArpToken.getTimeSinceLastTransfer(e),this.daysSinceLastTransfer=Math.floor(this.timeSinceLastTransfer/86400);let t=await this.petArpToken.getCustomBytes(e);for(let e=0;e<8;e++){if(0==t.position[e])this.byteSlots[e].position=!1,this.byteSlots[e].value=!1,this.byteSlots[e].address=!1;else{let n=parseInt(t.position[e],10);isNaN(n)&&(n=0),this.byteSlots[e].position=n,n=parseInt(t.position[e],10),isNaN(n)&&(n=0),this.byteSlots[e].address=n+2049-2,n=parseInt(t.value[e],10),isNaN(n)&&(n=0),this.byteSlots[e].value=n}this.setSelectedSlot(0)}console.log(t),console.log("----"),console.log(this.byteSlots),this.displayByteSlots(),this.getAllCustomBytes(),this.connectedStatusChanged(),this.userData=await this.petArpToken.getUserData(e),this.petArpToken.getUnmodifiedPRG(e).then((e=>{e.arrayBuffer().then((e=>{let t=new Uint8Array(e);this.prg_data_unmodified=new Uint8Array(t.length);for(let e=0;e<t.length;e++)this.prg_data_unmodified[e]=t[e];this.prg_data_unmodified[1826]=32+(7^this.userData.filterRouting),this.prg_data_unmodified[1827]=this.userData.filterValue,this.prg_data_unmodified[1828]=(this.userData.filterMode+3)%7,this.prg_data_unmodified[1829]=this.userData.colorOffset,this.prg_data_unmodified[1830]=this.userData.detuneMode,this.prg_data_unmodified[1831]=this.userData.rootNoteMode,this.prg_data_unmodified[1832]=this.userData.journeyMode,this.setPRGData(t),this.byteChanged=!1,this.run()}))}))}setPRGData(e){this.prg_data=e,this.countLines()}setPRGCustomBytes(){this.prg_data&&2048==this.prg_data.length||(this.prg_data=new Uint8Array(2048));for(let e=0;e<this.prg_data_unmodified.length;e++)this.prg_data[e]=this.prg_data_unmodified[e];for(let e=0;e<8;e++)this.byteSlots[e].address&&(this.prg_data[this.byteSlots[e].position]=this.byteSlots[e].value)}run(){this.setPRGCustomBytes(),this.petArpDisplay.setPRG(this.prg_data)}saveBytesError(e){document.getElementById("petarp-save-bytes-error").innerHTML=e}async saveBytes(){if(this.saveBytesError(""),!await this.petArpToken.isOwner(this.tokenId))return void this.saveBytesError("You need to be connected with an account which owns this PETARP to unlock settings");let e=document.getElementById("petarp-byte-editor-save-bytes"),t=document.getElementById("petarp-save-bytes-error"),n=await this.petArpToken.getCustomBytes(this.tokenId),s=0,i=!1,o=[],r=[];for(let e=0;e<8;e++){let t=parseInt(n.position[e],10),a=parseInt(n.value[e],10),d=this.byteSlots[e].position,l=this.byteSlots[e].value;d||(d=0),l||(l=0),t||d||(a=0,l=0),t!=d||a!=l?(s++,i=e,o.push(d),r.push(l)):(o.push(t),r.push(a))}if(0!=s)if(t.innerHTML="Saving to blockchain...",e.setAttribute("disabled","disabled"),1==s){let t=i;if(!await this.petArpToken.checkCanSetByte(this.tokenId,t,this.selectedPosition))return void this.saveBytesError("Sorry, unlock criteria not yet met");let n=this.byteSlots[t].value,s=this.byteSlots[t].position;this.petArpToken.setByte(this.tokenId,t,s,n).on("error",(t=>{this.saveBytesError(t.message),e.removeAttribute("disabled")})).then((()=>{this.saveBytesError("Saved!"),e.removeAttribute("disabled"),this.petArpDisplay.setTokenId(this.tokenId),this.petArpToken.requestCheckChanges(this.tokenId)}))}else this.saveBytesError("multiple bytes have changed..."),console.log("set bytes"),console.log(o),console.log("set values"),console.log(r),this.petArpToken.setBytes(this.tokenId,o,r).on("error",(t=>{this.saveBytesError(t.message),e.removeAttribute("disabled")})).then((()=>{this.saveBytesError("Saved!"),e.removeAttribute("disabled"),this.petArpDisplay.setTokenId(this.tokenId),this.petArpToken.requestCheckChanges(this.tokenId)}));else this.saveBytesError("No bytes have changed")}setFontMetrics(){let e=this.font.getDevicePixelRatio();this.fontCharWidth=this.font.fontCharWidth,this.fontCharHeight=this.font.fontCharHeight,this.hexNumberPositions=this.font.hexNumberPositions,this.cmdPositions=this.font.cmdPositions,this.lineHeight=this.fontCharHeight+6*e,this.cmdPositionX=19*this.fontCharWidth}setCanvasSize(){let e=this.font.getDevicePixelRatio(),t=32*this.fontCharWidth/e+8,n=4+21*this.lineHeight/e;this.canvas.width=t*e,this.canvas.height=n*e,this.canvas.style.width=t+"px",this.canvas.style.height=n+"px"}mouseMove(e){let t=this.font.getDevicePixelRatio();e.preventDefault();let n=e.offsetX*t,s=e.offsetY*t;var i=n-this.lastMouseX,o=s-this.lastMouseY;this.lastMouseX=n,this.lastMouseY=s,this.mouseInScrollBar=!1,n>this.canvasWidth-this.vScrollBarWidth&&this.mouseMoveVScroll(e,n,s),!1!==this.mouseDownVScrollY&&(this.mouseDownVScrollY=s);let r=!1;for(let e=0;e<this.lines.length;e++)if(this.lines[e].length>0){let t=this.lines[e][0].y;if(s>t&&s<t+this.lineHeight){r=e;break}}if(!1===r)return;if(this.vScroll){var a=this.vScrollBarHeight/this.contentHeight,d=(s-this.mouseDownY)/a;return void this.setYScroll(this.mouseDownAtScrollY+d)}if(this.dragCanvas)return void this.dragView(n,s,i,o);let l=this.lines[r];this.highlightBytePosition=!1,this.highlightByteX=!1,this.highlightByteY=!1;for(let e=0;e<l.length;e++)if(n>l[e].x&&n<l[e].x+2*l[e].w){let t=l[e].position;this.canEditByte(t)&&(this.highlightBytePosition=l[e].position,this.highlightByteX=l[e].x,this.highlightByteY=l[e].y)}}canEditByte(e){return!(e>=this.settingsStart&&e<this.settingsEnd||e>=this.paramsStart&&e<this.paramsEnd||e>=this.unlocksStart&&e<this.unlocksEnd)}getAddress(){return this.selectedByteAddress}byteInputFocus(){this.index.setProcessKeyEvents(!1)}byteInputBlur(){this.index.setProcessKeyEvents(!0),"none"!=this.byteInput.style.display&&(this.byteInput.style.display="none",this.byteChanged&&(this.byteChanged=!1,this.run()))}byteInputKeyPress(e){let t=e.key.toLowerCase();"enter"==t&&this.byteInputBlur(),t.match(/[a-fA-F\d]/g)||e.preventDefault()}clickOnAddress(e){if(e=parseInt(e,10),isNaN(e))return;if(e<0||e>=this.byteSlots.length)return;let t=this.byteSlots[e].address;if(!1===t)return;let n=this.getAddressY(t);this.highlightBytePosition=t-2049+2,this.highlightByteX=200,this.highlightByteY=n-this.scrollY,this.editAddress(),this.highlightBytePosition=!1,this.highlightByteX=!1,this.highlightByteY=!1,n>this.lineHeight&&(n-=this.lineHeight),this.setYScroll(n)}getAddressY(e){var t=!1,n=e-2049+2;for(let e=0;e<this.lineBytePosition.length;e++)if(n<this.lineBytePosition[e]){t=e-1;break}return!1!==t?t*this.lineHeight+4:0}displayByteSlots(){for(let e=0;e<8;e++){let t=(e+1)*this.slotTimePeriod,n=document.getElementById("petarp-byte-address-"+e),s=document.getElementById("petarp-byte-value-"+e),i=document.getElementById("petarp-byte-remove-"+e),o=document.getElementById("petarp-byte-slot-"+e),r=document.getElementById("petarp-byte-slot-label-"+e);if(this.daysSinceLastTransfer>=t)if(n.classList.add("clickable"),s.classList.add("clickable"),r.classList.add("clickable"),r.style.opacity=1,o.disabled=!1,this.byteSlots[e].address){let t=("0000"+this.byteSlots[e].address.toString(16)).substr(-4),o=("00"+this.byteSlots[e].value.toString(16)).substr(-2);i.style.display="flex",n.innerHTML=t,s.innerHTML=o,i.innerHTML='<img src="/images/close.svg"></a>'}else n.innerHTML="&nbsp;",s.innerHTML="&nbsp;",i.innerHTML="",i.style.display="none";else n.classList.remove("clickable"),s.classList.remove("clickable"),r.classList.remove("clickable"),r.style.opacity=.4,n.innerHTML="&nbsp;",s.innerHTML="&nbsp;",i.innerHTML="",i.style.display="none",o.disabled=!0}this.customByteMap=[];for(let t=0;t<2048;t++){var e=!1;for(let n=0;n<8;n++)this.byteSlots[n].position==t&&this.byteSlots[n].position&&(e=!0);this.customByteMap[t]=e}}setSelectedSlot(e){if(((e=parseInt(e,10))+1)*this.slotTimePeriod>this.daysSinceLastTransfer)return;this.selectedByteSlot=e,document.getElementById("petarp-byte-slot-"+e).checked=!0;for(let e=0;e<this.byteSlots.length;e++){let t=document.getElementsByClassName("petarp-byte-slot-row-"+e);for(let n=0;n<t.length;n++){let s=(e+1)*this.slotTimePeriod;this.daysSinceLastTransfer>=s?t[n].style.backgroundColor="#242424":t[n].style.backgroundColor="#1c1c1c"}}let t=document.getElementsByClassName("petarp-byte-slot-row-"+e);for(let e=0;e<t.length;e++)t[e].style.backgroundColor="#333";this.setUsedBytes()}byteRemove(e){e>=0&&e<this.byteSlots.length&&(this.byteSlots[e].address=0,this.byteSlots[e].value=0,this.byteSlots[e].position=!1,this.byteChanged=!1,this.run(),this.displayByteSlots())}setByteValue(e){!1!==this.selectedByteAddress&&(this.byteSlots[this.selectedByteSlot].position===this.selectedPosition&&this.byteSlots[this.selectedByteSlot].value===this.value||this.prg_data[this.selectedPosition]!==e&&(this.byteChanged=!0,this.byteSlots[this.selectedByteSlot]={position:this.selectedPosition,address:this.selectedByteAddress,value:e},this.setPRGCustomBytes(),this.countLines(),this.displayByteSlots()))}byteInputKeyUp(e){let t=this.byteInput.value;t=parseInt(t,16),isNaN(t)||this.setByteValue(t)}setInputPosition(){let e=this.font.getDevicePixelRatio(),t=Math.floor(this.selectedByteX/e)-1,n=Math.floor(this.selectedByteY/e)-1;this.byteInput.style.left=t+"px",this.byteInput.style.top=n+"px"}editAddress(){if(!1!==this.highlightBytePosition&&this.highlightBytePosition>0&&this.highlightBytePosition<this.prg_data.length){"block"==this.byteInput.style.display&&this.byteInputBlur();let e=this.highlightBytePosition+2049-2;this.selectedByteAddress=e,this.selectedPosition=this.highlightBytePosition,this.selectedByteX=this.highlightByteX,this.selectedByteY=this.highlightByteY;let t=0;return this.selectedPosition<this.prg_data.length&&(t=this.prg_data[this.selectedPosition],t=t.toString(16)),this.byteInput.value=t,this.byteInput.style.display="block",this.byteInput.focus(),this.byteInput.select(),void this.setInputPosition()}this.byteInputBlur()}mouseDown(e){let t=this.font.getDevicePixelRatio();e.preventDefault();let n=e.offsetX*t,s=e.offsetY*t;if(this.mouseDownX=n,this.mouseDownY=s,this.lastMouseX=n,this.lastMouseY=s,this.mouseDownAtScrollY=this.scrollY,this.mouseDownHighlightY=this.highlightByteY,this.mouseDownSelectedY=this.selectedByteY,1==e.button)return this.canvas.setPointerCapture(e.pointerId),void(this.dragCanvas=!0);n>this.canvasWidth-this.vScrollBarWidth*t?(this.mouseDownVScroll(e,n,s),this.byteInputBlur()):this.editAddress()}mouseUp(e){this.mouseUpScroll(e),this.mouseDownVScrollY=!1}mouseWheel(e){e.preventDefault();let t=1;e.deltaY<0&&(t=-1),this.scroll(20*t)}mouseDownVScroll(e,t,n){this.mouseDownVScrollY=n,n<this.vScrollBarPosition?this.setYScroll(this.scrollY-30):n>this.vScrollBarPosition+this.vScrollBarPositionHeight?this.setYScroll(this.scrollY+30):e&&(this.vScroll=!0),e&&this.canvas.setPointerCapture(e.pointerId)}mouseMoveVScroll(e,t,n){this.mouseInScrollBar=n>=this.vScrollBarPosition&&n<this.vScrollBarPosition+this.vScrollBarPositionHeight}mouseUpScroll(e){(this.vScroll||this.dragCanvas)&&this.canvas.releasePointerCapture(e.pointerId),this.dragCanvas=!1,this.vScroll=!1,this.mouseDownX=!1,this.mouseDownY=!1,this.mouseIsDown=!1}scroll(e){this.setYScroll(this.scrollY+e)}countLines(){if(this.lineCount=0,0==this.prg_data.length)return;this.lineBytePosition=[];let e=0;for(this.lineCount=2,e=14,this.lineBytePosition.push(2),this.lineBytePosition.push(10);e<1634;){if(this.lineBytePosition.push(e),e+2049-2>=2928&&e+2049-2<=2946)e+=8,e+2049-2>2946&&(e=900);else if(e+2049-2>=3360&&e+2049-2<=3580)e+=8,e+2049-2>3580&&(e=1534);else{let n=this.prg_data[e],s=ne[n],i="";var t=0;void 0!==s?(i=s.cmd,t=s.bytes):(i="???",t=1),e+=t}this.lineCount++}let n=Math.ceil((this.prg_data.length-e)/8);for(let t=0;t<n;t++)this.lineBytePosition.push(e),e+=8,this.lineCount++}dragView(e,t,n,s){this.setYScroll(this.scrollY-s)}setYScroll(e){var t=this.viewHeight;e+t>this.contentHeight&&(e=this.contentHeight-t),e<0&&(e=0);var n=this.scrollY-e;this.highlightByteY+=n,this.selectedByteY+=n,this.setInputPosition(),this.scrollY=e}calculateScroll(){this.contentHeight=this.lineCount*this.lineHeight,this.viewHeight=this.canvasHeight,this.vScrollBarWidth=10,this.scrollY+this.viewHeight>this.contentHeight&&(this.scrollY=this.contentHeight-this.viewHeight,this.scrollY<0&&(this.scrollY=0)),this.vScrollBarHeight=this.viewHeight,this.vScrollBarPositionHeight=this.vScrollBarHeight*this.viewHeight/this.contentHeight,this.vScrollBarPositionHeight>this.vScrollBarHeight&&(this.vScrollBarPositionHeight=this.vScrollBarHeight),this.vScrollBarPositionHeight<4&&(this.vScrollBarPositionHeight=4),this.vScrollBarPosition=this.scrollY*this.vScrollBarHeight/this.contentHeight}draw(){if(0==this.prg_data.length)return;!1!==this.mouseDownVScrollY&&this.mouseDownVScroll(!1,0,this.mouseDownVScrollY);let e=this.font.getDevicePixelRatio(),t=this.context,n=Math.ceil(this.canvasHeight/this.lineHeight)+1;this.firstLine=Math.floor(this.scrollY/this.lineHeight);let s=null,i=8,o=4-this.scrollY%this.lineHeight,r=0,a=0,d=this.fontCharWidth,l=this.fontCharHeight,c=0,h=this.fontCharWidth,p=this.fontCharHeight,m=this.fontCharWidth,u=this.fontCharHeight,y=0,g=0,b="#ddddff",f="#222222";t.fillStyle="#111111",t.fillRect(0,0,this.canvas.width,this.canvas.height);let v=0;v=this.lineBytePosition[this.firstLine],this.lines=[];for(let e=0;e<n;e++){let e=[];if(v<0||v>=this.prg_data.length)break;if(y=(L=v+2049-2)>>8&255,g=255&L,s=this.hexNumberPositions[y],r=s.x,a=s.y,t.drawImage(this.hexNumberCanvas[1],r,a,2*h,p,i,o,2*m,u),i+=2*m,s=this.hexNumberPositions[g],r=s.x,a=s.y,t.drawImage(this.hexNumberCanvas[1],r,a,2*h,p,i,o,2*m,u),i+=2*m+m,v>=0&&v<14||v+2049-2>=2928&&v+2049-2<=2946){let n=8;v>=10&&(n=4),v+2049-2>=2928&&(n=8),v+2049-2>=2943&&(n=3);for(let s=0;s<n;s++){let n=this.prg_data[v],s=this.hexNumberPositions[n],r=s.x,a=s.y;v==this.selectedPosition&&(t.fillStyle=f,t.fillRect(i,o,2*m,u),t.strokeStyle=b,t.lineWidth=1,t.rect(i-1.5,o-1.5,2*m+3,u+3),t.stroke(),this.selectedByteX!=i&&(this.selectedByteX=i,this.setInputPosition())),this.customByteMap[v]&&(t.fillStyle=f,t.fillRect(i,o,2*m,u),t.strokeStyle=b,t.lineWidth=1,t.rect(i-1.5,o-1.5,2*m+3,u+3),t.stroke());let d=0;!1!==this.usedBytes[v]&&(d=3),t.drawImage(this.hexNumberCanvas[d],r,a,2*h,p,i,o,2*m,u),e.push({x:i,y:o,w:2*m,h:u,position:v,usedBy:this.usedBytes[v]}),v+=1,10==v||14==v||889==v||897==v||900==v?(o+=this.lineHeight,i=8):i+=3*m}}else if(v+2049-2>=3360&&v+2049-2<=3580){let n=8;for(let s=0;s<n;s++){let n=this.prg_data[v],s=this.hexNumberPositions[n],r=s.x,a=s.y;v==this.selectedPosition&&this.selectedByteX!=i&&(this.selectedByteX=i,this.setInputPosition()),this.customByteMap[v]&&(t.fillStyle=f,t.fillRect(i,o,2*m,u),t.strokeStyle=b,t.lineWidth=1,t.rect(i-1.5,o-1.5,2*m+3,u+3),t.stroke());let d=0;if(!1!==this.usedBytes[v]&&(d=3),t.drawImage(this.hexNumberCanvas[d],r,a,2*h,p,i,o,2*m,u),e.push({x:i,y:o,w:2*m,h:u,position:v,usedBy:this.usedBytes[v]}),v+=1,v+2049-2>3580)break;i+=3*m}i=8,o+=this.lineHeight}else if(v+2049-2>=3681){let n=8;for(let s=0;s<n;s++){if(v<this.prg_data.length){let n=this.prg_data[v],s=!1;v>=this.settingsStart&&v<this.settingsEnd&&(s=!0);let r=!1;v>=this.paramsStart&&v<this.paramsEnd&&(r=!0);let a=!1;v>=this.unlocksStart&&v<this.unlocksEnd&&(a=!0);let d=this.hexNumberPositions[n],l=d.x,c=d.y,y=0;v==this.selectedPosition&&this.selectedByteX!=i&&(this.selectedByteX=i,this.setInputPosition()),this.customByteMap[v]&&(t.fillStyle=f,t.fillRect(i,o,2*m,u),t.strokeStyle=b,t.lineWidth=1,t.rect(i-1.5,o-1.5,2*m+3,u+3),t.stroke()),s&&(y=3),r&&(y=3),a&&(y=3),!1!==this.usedBytes[v]&&(y=3),t.drawImage(this.hexNumberCanvas[y],l,c,2*h,p,i,o,2*m,u),e.push({x:i,y:o,w:2*m,h:u,position:v,usedBy:this.usedBytes[v]})}v+=1,i+=3*m}i=8,o+=this.lineHeight}else{if(v<0||v>=this.prg_data.length)break;let n=this.prg_data[v],y=this.highlightBytePosition==v,g=this.highlightBytePosition==v+1,L=this.highlightBytePosition==v+2,P=ne[n],R="";var k=0,w=0;void 0!==P?(R=P.cmd,k=P.bytes,w=P.addrmode):(R="???",k=1);var x=0,C=0;v+1<this.prg_data.length&&(x=this.prg_data[v+1]),v+2<this.prg_data.length&&(C=this.prg_data[v+2]);var B=k-1,I="";s=this.hexNumberPositions[n],r=s.x,a=s.y,i=20*m,v==this.selectedPosition&&this.selectedByteX!=i&&(this.selectedByteX=i,this.setInputPosition()),this.customByteMap[v]&&(t.fillStyle=f,t.fillRect(i,o,2*m,u),t.strokeStyle=b,t.lineWidth=1,t.rect(i-1.5,o-1.5,2*m+3,u+3),t.stroke());let M=0;if(!1!==this.usedBytes[v]&&(M=3),t.drawImage(this.hexNumberCanvas[M],r,a,2*h,p,i,o,2*m,u),e.push({x:i,y:o,w:m,h:u,position:v,usedBy:this.usedBytes[v]}),i+=2*m,i+=m,B>0){s=this.hexNumberPositions[x],r=s.x,a=s.y,v+1==this.selectedPosition&&this.selectedByteX!=i&&(this.selectedByteX=i,this.setInputPosition()),this.customByteMap[v+1]&&(t.fillStyle=f,t.fillRect(i,o,2*m,u),t.strokeStyle=b,t.lineWidth=1,t.rect(i-1.5,o-1.5,2*m+3,u+3),t.stroke());let n=0;!1!==this.usedBytes[v+1]&&(n=3),t.drawImage(this.hexNumberCanvas[n],r,a,2*h,p,i,o,2*m,u),e.push({x:i,y:o,w:m,h:u,position:v+1,usedBy:this.usedBytes[v+1]}),i+=2*m,i+=m}if(B>1){s=this.hexNumberPositions[C],r=s.x,a=s.y,v+2==this.selectedPosition&&this.selectedByteX!=i&&(this.selectedByteX=i,this.setInputPosition()),this.customByteMap[v+2]&&(t.fillStyle=f,t.fillRect(i,o,2*m,u),t.strokeStyle=b,t.lineWidth=1,t.rect(i-1.5,o-1.5,2*m+3,u+3),t.stroke());let n=0;!1!==this.usedBytes[v+2]&&(n=3),t.drawImage(this.hexNumberCanvas[n],r,a,2*h,p,i,o,2*m,u),e.push({x:i,y:o,w:m,h:u,position:v+2,usedBy:this.usedBytes[v+2]}),i+=2*m}if(i=6*m,s=this.cmdPositions[R],void 0!==s?(r=s.x,a=s.y,y&&(t.filter="brightness(200%)"),t.drawImage(this.cmdCanvas,r,a,3*h,p,i,o,3*m,u),t.filter="none",i+=3*m):console.log("not found: "+R),c=2,2==B){I+=" ",4==w&&(I+="(");for(var T=(I+="$").length,E=0;E<T;E++)r=I.charCodeAt(E)*d,a=0,h=d,p=l,m=d,u=l,t.drawImage(this.fontCanvasColors[0],r,a,h,p,i,o,m,u),i+=d;s=this.hexNumberPositions[C],r=s.x,a=s.y,L&&(t.filter="brightness(200%)"),t.drawImage(this.hexNumberCanvas[c],r,a,2*h,p,i,o,2*m,u),t.filter="none",i+=2*m,s=this.hexNumberPositions[x],r=s.x,a=s.y,g&&(t.filter="brightness(200%)"),t.drawImage(this.hexNumberCanvas[c],r,a,2*h,p,i,o,2*m,u),t.filter="none",i+=2*m,I="",5==w&&(I+=",X"),4==w&&(I+=")"),6==w&&(I+=",Y")}if(1==B){if(C=!1,I+=" ",0==w&&(I+="#",c=2),w==te){var S=x;S>127&&(S-=256);var A=v+2049-2+S+2;C=A>>8&255,x=255&A}for(w==ee&&(I+="("),T=(I+="$").length,E=0;E<T;E++)r=I.charCodeAt(E)*d,a=0,h=d,p=l,m=d,u=l,t.drawImage(this.fontCanvasColors[0],r,a,h,p,i,o,m,u),i+=d;!1!==C&&(s=this.hexNumberPositions[C],r=s.x,a=s.y,L&&(t.filter="brightness(200%)"),t.drawImage(this.hexNumberCanvas[c],r,a,2*h,p,i,o,2*m,u),t.filter="none",i+=2*m),s=this.hexNumberPositions[x],r=s.x,a=s.y,g&&(t.filter="brightness(200%)"),t.drawImage(this.hexNumberCanvas[c],r,a,2*h,p,i,o,2*m,u),t.filter="none",i+=2*m,I="",w==ee&&(I+="),Y"),5!=w&&7!=w||(I+=",X")}for(T=I.length,E=0;E<T;E++)r=I.charCodeAt(E)*d,a=0,h=d,p=l,m=d,u=l,t.drawImage(this.fontCanvasColors[0],r,a,h,p,i,o,m,u),i+=d;v+=1+B,o+=this.lineHeight,i=8}this.lines.push(e)}if(!1!==this.highlightByteX&&!1!==this.highlightByteY){t.beginPath(),t.strokeStyle="#ddffdd",!1!==this.usedBytes[this.highlightBytePosition]&&(t.strokeStyle="#999999"),t.lineWidth=1,t.rect(this.highlightByteX-.5,this.highlightByteY-.5,2*m+1,u+1),t.stroke(),i=this.highlightByteX,o=this.highlightByteY-u-6;let e=4;if(!1!==this.usedBytes[this.highlightBytePosition]){e=1;let n="USED BY "+("000"+this.usedBytes[this.highlightBytePosition].toString()).substr(-3);i>22*m&&(i-=6*m),t.fillStyle="#222",t.fillRect(i-.5-2-2,o-.5-1,11*m+4+4,u+2),t.globalAlpha=.8,this.font.drawText(t,n,i,o),t.globalAlpha=1,o-=u}var L;t.fillStyle="#222",t.fillRect(i-.5-2-2,o-.5-1,4*m+4+4,u+2),y=(L=this.highlightBytePosition+2049-2)>>8&255,g=255&L,s=this.hexNumberPositions[y],r=s.x,a=s.y,t.globalAlpha=.8,t.drawImage(this.hexNumberCanvas[e],r,a,2*h,p,i,o,2*m,u),i+=2*m,s=this.hexNumberPositions[g],r=s.x,a=s.y,t.drawImage(this.hexNumberCanvas[e],r,a,2*h,p,i,o,2*m,u),t.globalAlpha=1}this.calculateScroll(),t.fillStyle="#222",t.fillRect(this.canvasWidth-this.vScrollBarWidth*e,0,this.vScrollBarWidth*e,this.canvasHeight),t.fillStyle="#aaa",this.mouseInScrollBar&&(t.fillStyle="#eee"),t.fillRect(this.canvasWidth-this.vScrollBarWidth*e+1,this.vScrollBarPosition*this.canvasScale,this.vScrollBarWidth*e-2,this.vScrollBarPositionHeight*this.canvasScale),t.strokeStyle="#282828",t.beginPath(),t.moveTo(this.canvasWidth-this.vScrollBarWidth*e-.5,0),t.lineTo(this.canvasWidth-this.vScrollBarWidth*e-.5,this.canvasHeight*this.canvasScale),t.stroke()}}class ie{constructor(e){this.canvas=e.canvas,this.font=e.font,this.fontCanvas=this.font.fontCanvas,this.fontCanvasColors=this.font.fontCanvasColors,this.hexNumberCanvas=this.font.hexNumberCanvas,this.cmdCanvas=this.font.cmdCanvas,this.setFontMetrics(),this.setCanvasSize(),this.resize()}resize(){this.context=this.canvas.getContext("2d")}setFontMetrics(){let e=this.font.getDevicePixelRatio();this.fontCharWidth=this.font.fontCharWidth,this.fontCharHeight=this.font.fontCharHeight,this.hexNumberPositions=this.font.hexNumberPositions,this.cmdPositions=this.font.cmdPositions,this.lineHeight=this.fontCharHeight+6*e,this.cmdPositionX=23*this.fontCharWidth,this.cyclesPositionX=19*this.fontCharWidth,this.opCodePositionX=this.breakpointColWidth+4*this.fontCharWidth+20}setCanvasSize(){let e=this.font.getDevicePixelRatio(),t=2*this.lineHeight/e,n=30*this.fontCharWidth/e+8;this.canvas.width=n*e,this.canvas.height=t*e,this.canvas.style.width=n+"px",this.canvas.style.height=t+"px"}draw(){let e=this.context;e.fillStyle="#111111",e.fillRect(0,0,this.canvas.width,this.canvas.height);let t="PC     A  X  Y  SP   NV-BDIZC",n=4;this.font.drawText(e,t,8,n),n+=this.lineHeight,t="",t+=("0000"+f.getPC().toString(16)).substr(-4),t+="   ",t+=("00"+f.getRegA().toString(16)).substr(-2),t+=" ",t+=("00"+f.getRegX().toString(16)).substr(-2),t+=" ",t+=("00"+f.getRegY().toString(16)).substr(-2),t+=" ",t+=("00"+f.getSP().toString(16)).substr(-2),t+="   ",f.getFlagN()?t+="1":t+="0",f.getFlagV()?t+="1":t+="0",t+="-",f.getFlagB()?t+="1":t+="0",f.getFlagD()?t+="1":t+="0",f.getFlagI()?t+="1":t+="0",f.getFlagZ()?t+="1":t+="0",f.getFlagC()?t+="1":t+="0",this.font.drawText(e,t,8,n)}}class oe{constructor(e){this.canvas=e.canvas,this.font=e.font,this.index=e.index,this.fontCanvas=this.font.fontCanvas,this.fontCanvasColors=this.font.fontCanvasColors,this.hexNumberCanvas=this.font.hexNumberCanvas,this.cmdCanvas=this.font.cmdCanvas,this.mouseCursorAddress=!1,this.valuesStartX=0,this.bufferCount=22,this.bufferDelay=8,this.bufferLength=256,this.showAddress=!0,this.lastBuffer=0,this.memoryBuffers=[];for(var t=0;t<this.bufferCount;t++)this.memoryBuffers[t]=new Uint8Array(this.bufferLength);this.setFontMetrics(),this.setCanvasSize(),this.resize(),this.initEvents()}initEvents(){window.addEventListener("resize",(e=>{this.resize()})),this.canvas.addEventListener("mousedown",(e=>{e.preventDefault(),this.mouseDown(e)})),this.canvas.addEventListener("mousemove",(e=>{e.preventDefault(),this.mouseMove(e)})),this.canvas.addEventListener("mouseup",(e=>{e.preventDefault(),this.mouseUp(e)})),this.canvas.addEventListener("mouseleave",(e=>{console.log("mouse leave"),this.setMouseCursorAddress(!1)})),this.memoryValueElement=document.getElementById("memory-value"),this.memoryValueElement.addEventListener("keydown",(e=>{this.keyDown(e)})),this.memoryValueElement.addEventListener("focus",(e=>{this.index.setProcessKeyEvents(!1)})),this.memoryValueElement.addEventListener("blur",(e=>{let t=this.memoryValueElement.value;t=parseInt(t,16),isNaN(t)||(this.setValueFromInput(t),this.hideValueInput(),this.index.setProcessKeyEvents(!0))}))}keyDown(e){let t=e.key.toLowerCase(),n=this.memoryValueElement.value;if(n=parseInt(n,16),!isNaN(n)&&("escape"==t&&this.hideValueInput(),"enter"==t&&(this.setValueFromInput(n),this.hideValueInput()),"tab"==t)){this.setValueFromInput(n);let t=this.inputAddress+1;t<255&&this.editAddress(t),e.preventDefault()}}resize(){this.setCanvasSize(),this.context=this.canvas.getContext("2d")}setFontMetrics(){let e=this.font.getDevicePixelRatio();this.fontCharWidth=this.font.fontCharWidth,this.fontCharHeight=this.font.fontCharHeight,this.hexNumberPositions=this.font.hexNumberPositions,this.cmdPositions=this.font.cmdPositions,this.lineHeight=this.fontCharHeight+6*e,this.cmdPositionX=23*this.fontCharWidth,this.cyclesPositionX=19*this.fontCharWidth,this.opCodePositionX=this.breakpointColWidth+4*this.fontCharWidth+20}setCanvasSize(){this.valueSpacing=this.fontCharWidth;let e=this.font.getDevicePixelRatio(),t=4+16*this.lineHeight/e,n=8+54*this.fontCharWidth/e;window.innerWidth<395?(this.valueSpacing=this.fontCharWidth-4,n=n-8*this.fontCharWidth/e-4,n-=32/e,this.showAddress=!1):window.innerWidth<410?(this.valueSpacing=this.fontCharWidth-2,n=n-6*this.fontCharWidth/e-4,n-=32/e,this.showAddress=!1):window.innerWidth<480?(this.showAddress=!1,n-=6*this.fontCharWidth/e):this.showAddress=!0,this.canvas.width=n*e,this.canvas.height=t*e,this.canvas.style.width=n+"px",this.canvas.style.height=t+"px"}setMouseCursorAddress(e){this.mouseCursorAddress=e}addressToXY(e){var t=Math.floor(e/this.bytesAcross),n=e%this.bytesAcross;return{x:this.valuesStartX+n*(2*this.fontCharWidth+this.valueSpacing),y:t*this.lineHeight+6}}mouseDown(e){}mouseMove(e){let t=e.offsetX,n=e.offsetY;var s=Math.floor(n/this.lineHeight),i=Math.floor((t-this.valuesStartX)/(2*this.fontCharWidth+this.valueSpacing));if(i>=0&&i<this.bytesAcross){var o=s*this.bytesAcross+i;this.setMouseCursorAddress(o)}}mouseUp(e){if(!1!==this.mouseCursorAddress){if("none"!=this.memoryValueElement.style.display){let e=this.memoryValueElement.value;if(e=parseInt(e,16),isNaN(e))return;this.setValueFromInput(e)}this.editAddress(this.mouseCursorAddress)}}editAddress(e){this.inputAddress=e;let t=255&f.cpuRead(e);t=t.toString(16),this.memoryValueElement.value=t,this.setInputPosition(),this.memoryValueElement.style.display="block",this.memoryValueElement.focus(),this.memoryValueElement.select()}setInputPosition(){var e=this.addressToXY(this.inputAddress),t=e.x/1,n=e.y/1-1;this.memoryValueElement.style.left=t+"px",this.memoryValueElement.style.top=n+"px",this.memoryValueElement.style.width="24px"}hideValueInput(){this.memoryValueElement.style.display="none"}setValueFromInput(e){!1!==this.inputAddress&&f.cpuWrite(this.inputAddress,e)}draw(){this.bytesAcross=16;let e=this.context;e.fillStyle="#111111",e.fillRect(0,0,this.canvas.width,this.canvas.height);let t=0,n=this.fontCharWidth,s=this.fontCharHeight,i=0,o=0,r=n,a=s,d=n,l=s,c=0,h=4;for(var p=0;p<this.bufferLength;p++)this.memoryBuffers[this.lastBuffer][p]=255&f.cpuRead(p);let m=this.lastBuffer;m-=this.bufferDelay,m<0&&(m+=this.bufferCount);let u=this.memoryBuffers[m];for(var y=0;y<21;y++){c=8;var g=t>>8&255,b=255&t;for(i=(v=this.hexNumberPositions[g]).x,o=v.y,this.showAddress&&(e.globalAlpha=.5,e.drawImage(this.hexNumberCanvas[0],i,o,2*r,a,c,h,2*d,l),c+=2*d,i=(v=this.hexNumberPositions[b]).x,o=v.y,e.drawImage(this.hexNumberCanvas[0],i,o,2*r,a,c,h,2*d,l),e.globalAlpha=1,c+=2*d,c+=2*n),this.valuesStartX=c,p=0;p<this.bytesAcross;p++){let n=0;var v;t<this.bufferLength&&(n=u[t]),0==t?n=47:1==t&&(n=53),i=(v=this.hexNumberPositions[n]).x,o=v.y,e.drawImage(this.hexNumberCanvas[0],i,o,2*r,a,c,h,2*d,l),c+=2*d+this.valueSpacing,t++}h+=this.lineHeight}if(this.lastBuffer=(this.lastBuffer+1)%this.bufferCount,!1!==this.mouseCursorAddress){var k=this.addressToXY(this.mouseCursorAddress);e.beginPath(),e.strokeStyle="#cccccc",e.rect(k.x-1.5,k.y-1.5,2*this.fontCharWidth+2,this.fontCharHeight+2),e.stroke()}}}class re{constructor(e){this.canvas=e.canvas,this.font=e.font,this.audioBufferCount=22,this.bufferDelay=0,this.bufferLength=f.getAudioBufferLength(),this.isFullscreen=!1,this.controlsTimer=0,this.lastBuffer=0,this.audioBuffers=[[],[],[]];for(var t=0;t<this.audioBufferCount;t++)for(var n=0;n<3;n++){let e=new Float32Array(this.bufferLength);this.audioBuffers[n].push(e)}this.holder=document.getElementById("petarp-sid-debug"),this.petarpCanvas=document.getElementById("petarp-canvas"),this.memoryCanvas=document.getElementById("memory"),document.getElementById("sid-holder").addEventListener("fullscreenchange",(e=>{document.fullscreenElement||(this.isFullscreen=!1,this.resize())})),document.getElementById("sid-fullscreen-icon").addEventListener("click",(e=>{e.preventDefault(),this.fullscreen()})),document.getElementById("sid-fullscreen-exit-icon").addEventListener("click",(e=>{e.preventDefault(),this.exitFullscreen()})),document.getElementById("sid").addEventListener("dblclick",(e=>{console.log("full screen"),e.preventDefault(),this.isFullscreen?this.exitFullscreen():this.fullscreen()})),document.getElementById("sid").addEventListener("mousemove",(e=>{this.mouseMove(e)})),document.getElementById("sid").addEventListener("mousemove",(e=>{this.mouseMove(e)})),window.addEventListener("resize",(e=>{this.resize()})),this.resize()}exitFullscreen(){this.isFullscreen=!1,document.exitFullscreen?document.exitFullscreen():void 0!==document.webkitCancelFullScreen&&document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),this.resize()}fullscreen(){this.isFullscreen=!0;var e=document.getElementById("sid-holder");void 0!==e.requestFullscreen&&e.requestFullscreen?e.requestFullscreen():void 0!==e.webkitRequestFullscreen&&e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),this.resize()}showControls(){document.getElementById("sid-controls").style.opacity=1,this.controlsTimer=1e3}hideControls(){document.getElementById("sid-controls").style.opacity=0}mouseMove(e){this.showControls()}resize(){let e=this.font.getDevicePixelRatio();var t=document.getElementById("sid-holder");let n=void 0!==t.requestFullscreen||void 0!==t.webkitRequestFullscreen;if(n||(document.getElementById("sid-fullscreen-icon").style.display="none",document.getElementById("sid-fullscreen-exit-icon").style.display="none"),this.isFullscreen){let t=window.innerWidth,s=window.innerHeight;this.canvas.width=t*e,this.canvas.height=s*e,this.canvas.style.width=t+"px",this.canvas.style.height=s+"px",this.context=this.canvas.getContext("2d"),n&&(document.getElementById("sid-fullscreen-icon").style.display="none",document.getElementById("sid-fullscreen-exit-icon").style.display="block")}else{let t=392,s=this.memoryCanvas.height/e;window.innerWidth>1300?(t=this.holder.clientWidth-238-459-60-36,e>=2&&(t+=Math.floor(84/e))):t=window.innerWidth>803||this.petarpCanvas.width<784?this.petarpCanvas.width:392,this.canvas.width=t*e,this.canvas.height=s*e,this.canvas.style.width=t+"px",this.canvas.style.height=s+"px",this.context=this.canvas.getContext("2d"),n&&(document.getElementById("sid-fullscreen-icon").style.display="block",document.getElementById("sid-fullscreen-exit-icon").style.display="none")}}draw(e){let t=this.canvas.getContext("2d");t.fillStyle="#111111",t.fillRect(0,0,this.canvas.width,this.canvas.height),this.audioBufferLength=f.getAudioBufferLength();for(let e=0;e<3;e++){var n=f.getAudioBufferCh(e),s=new Float32Array(f.HEAPF32.subarray(n>>2,(n>>2)+this.audioBufferLength));this.audioBuffers[e][this.lastBuffer].set(s);let y=this.lastBuffer;y-=this.bufferDelay,y<0&&(y+=this.audioBufferCount),s=this.audioBuffers[e][y];var i=0,o=this.canvas.width,r=this.canvas.height,a=2.5*this.audioBufferLength/2048,d=r/4+r/4*e,l=r/400*1.6;0==e&&(d-=10),2==e&&(d+=10),a*=590;var c=this.audioBufferLength/a;0==(c=590*c/o)&&(c=1);for(var h=Math.floor(this.audioBufferLength/2.8);s[h]<2&&h<this.audioBufferLength-580;)h++;for(;s[h]>=1.95&&h<this.audioBufferLength-580;)h++;(h-=Math.floor(this.audioBufferLength/2.8))<0&&(h=0);var p=.18*-o,m=s[i=Math.floor(h+0)%this.audioBufferLength]*l+d+.5;t.strokeStyle="#dddddd",t.lineWidth=2,t.beginPath(),t.moveTo(p,m);for(var u=1;u<this.audioBufferLength&&(i+=c,p++,m=s[Math.floor(i)%this.audioBufferLength]*l+d+.5,!(i>this.audioBufferLength));u+=c)t.lineTo(p,m);t.stroke()}this.lastBuffer=(this.lastBuffer+1)%this.audioBufferCount,this.controlsTimer>0&&(this.controlsTimer-=e,this.controlsTimer<0&&(this.controlsTimer=0,this.hideControls()))}}class ae{disassembly=null;byteEditor=null;editingBytes=!1;registers=null;sidVisualiser=null;memory=null;interfaceReady=!1;petArpToken=null;index=null;tokenId=!1;name="";prg_data=null;prg_data_original=null;params={};isFullscreen=!1;controlsTimer=0;loading=!1;unlocks=[0,0,0,0];volume=80;saveVolume=80;image=null;downloadCanvas=null;trackMouseTone=!1;trackMouseReverb=!1;trackMouseVolume=!1;ownerBalance=0;v=0;initEvents(){document.getElementById("downloadPrg").addEventListener("click",(e=>{e.preventDefault(),this.downloadPRG()})),document.getElementById("petarp-prev").addEventListener("click",(e=>{e.preventDefault(),this.prev()})),document.getElementById("petarp-next").addEventListener("click",(e=>{e.preventDefault(),this.next()})),document.getElementById("petarp-info").addEventListener("click",(e=>{if(e.target.classList.contains("petarp-unlock-button")){let t=e.target.getAttribute("data-param");this.unlock(t)}}));let e=document.getElementById("petarp-edit-bytes");e&&e.addEventListener("click",(e=>{e.preventDefault(),this.showEditBytes()})),document.getElementById("petarp-byte-editor-run").addEventListener("click",(e=>{e.preventDefault(),this.byteEditorRun()})),document.getElementById("petarp-byte-editor-save-bytes").addEventListener("click",(e=>{e.preventDefault(),this.byteEditorSaveBytes()})),document.getElementById("petarp-byte-editor-back").addEventListener("click",(e=>{e.preventDefault(),this.closeEditBytes()}));let t=document.getElementById("petarp-save-settings");t&&t.addEventListener("click",(e=>{e.preventDefault(),this.saveSettings()})),window.addEventListener("resize",(e=>{this.resize()})),document.getElementById("petarp-canvas-holder").addEventListener("fullscreenchange",(e=>{document.fullscreenElement||(this.isFullscreen=!1,document.getElementById("petarp-canvas-holder").style.alignItems="flex-start",this.resize())})),document.getElementById("petarp-canvas").addEventListener("dblclick",(e=>{e.preventDefault(),this.isFullscreen?this.exitFullscreen():this.fullscreen()})),document.getElementById("petarp-canvas").addEventListener("mousemove",(e=>{this.mouseMoveCanvas(e)})),document.getElementById("petarp-controls").addEventListener("mousemove",(e=>{this.mouseMoveCanvas(e)})),document.getElementById("petarp-fullscreen-icon").addEventListener("click",(e=>{e.preventDefault(),this.fullscreen()})),document.getElementById("petarp-fullscreen-exit-icon").addEventListener("click",(e=>{e.preventDefault(),this.exitFullscreen()})),document.getElementById("petarp-gallery-content").addEventListener("click",(e=>{if(e.preventDefault(),e.target.classList.contains("petarp-gallery-download")){let t=e.target.getAttribute("data-download");this.downloadImage(t)}})),this.startOverlay=document.getElementById("petarp-start-overlay"),this.startOverlay.addEventListener("click",(e=>{f.start_audio(),this.startWithAudio()})),this.requestCheckButton=document.getElementById("petarp-request-check"),this.requestCheckButton&&this.requestCheckButton.addEventListener("click",(e=>{e.preventDefault(),this.petArpToken.requestCheckChanges(this.tokenId)})),this.volumeOffElement=document.getElementById("petarp-volume-off-icon"),this.volumeUpElement=document.getElementById("petarp-volume-up-icon"),this.volumeDownElement=document.getElementById("petarp-volume-down-icon"),this.volumeOffElement.addEventListener("click",(e=>{this.toggleVolume()})),this.volumeUpElement.addEventListener("click",(e=>{this.toggleVolume()})),this.volumeDownElement.addEventListener("click",(e=>{this.toggleVolume()})),document.getElementById("petarp-volume-bar-holder").addEventListener("mousedown",(e=>{this.volumeTrackMouse(e),this.showControls()})),document.getElementById("petarp-gallery-button").addEventListener("click",(e=>{this.index.gotoURL("/petarp/"+this.tokenId+"/gallery")})),document.getElementById("petarp-gallery-back").addEventListener("click",(e=>{e.preventDefault(),this.index.gotoURL("/petarp/"+this.tokenId)})),window.addEventListener("mousemove",(e=>{this.mouseMove(e)})),window.addEventListener("mouseup",(e=>{this.mouseUp(e)})),this.setVolume(80),this.setTone(65),this.setReverb(20)}downloadImage(e){let t=this.petArpToken.getVersion(),n=2;document.getElementById("petarp_gallery_size_1").checked&&(n=1),document.getElementById("petarp_gallery_size_4").checked&&(n=4);let s="petarp.png",i=e.lastIndexOf("/");if(-1!==i&&(s=e.substr(i+1)),i=s.lastIndexOf("?"),-1!==i&&(s=s.substr(0,i)),-1!==e.indexOf(".gif")){let e="petarp-"+("000"+this.tokenId).substr(-3);2==n&&(e+="x2"),4==n&&(e+="x2"),e+=".gif";let s="https://nopsta.com/petarp/images/"+e,i=document.createElement("a");i.setAttribute("href",s+"?v="+t),i.setAttribute("target","_blank"),i.setAttribute("download",e),document.body.appendChild(i),i.click(),i.remove(),i=null}else this.image||(this.image=new Image,this.image.crossOrigin="Anonymous",this.image.onload=e=>{this.downloadImg(this.image,n,s)}),this.image.src=e+"?v="+t}downloadImg(e,t,n){null==this.downloadCanvas&&(this.downloadCanvas=document.createElement("canvas")),this.downloadCanvas.width=e.naturalWidth*t,this.downloadCanvas.height=e.naturalHeight*t;let s=this.downloadCanvas.getContext("2d");s.imageSmoothingEnabled=!1,s.drawImage(e,0,0,this.downloadCanvas.width,this.downloadCanvas.height);let i=this.downloadCanvas.toDataURL("image/png");(0,b.L)(i,n,"image/png")}volumeTrackMouse(e){this.trackMouseVolume=!0,this.mouseMove(e)}toneTrackMouse(e){this.trackMouseTone=!0,this.mouseMove(e,!0)}reverbTrackMouse(e){this.trackMouseReverb=!0,this.mouseMove(e)}mouseMove(e,t){if(this.trackMouseVolume){let t=document.getElementById("petarp-volume-bar-holder").getBoundingClientRect(),n=e.clientX-t.x;n<0&&(n=0),n>100&&(n=100),this.setVolume(n),this.showControls()}if(this.trackMouseReverb){let t=document.getElementById("petarp-reverb-bar-holder").getBoundingClientRect(),n=e.clientX-t.x;n<0&&(n=0),n>100&&(n=100),this.setReverb(n),this.showControls()}}closeGallery(){document.getElementById("petarp").style.display="block",document.getElementById("petarp-gallery").style.display="none"}showGallery(){let e=this.petArpToken.getVersion();document.getElementById("petarp").style.display="none",document.getElementById("petarp-gallery").style.display="block";let t="<div>An animated GIF and 128 stills for PETARP "+("000"+this.tokenId).substr(-3)+"</div>";document.getElementById("petarp-gallery-description").innerHTML=t;let n=document.getElementById("petarp-gallery-content"),s="",i="https://nopsta.com/petarp/images/petarp-"+("000"+this.tokenId).substr(-3)+".gif?v="+e;s+='<div class="petarp-gallery-image">',s+='<img width="392" height="272" src="'+i+'">',s+='<img class="petarp-gallery-download-shadow" src="/images/file_download.svg"/>',s+='<img class="petarp-gallery-download" data-download="'+i+'" src="/images/file_download.svg"/>',s+="</div>";for(let t=0;t<127;t++){let n="petarp-"+("000"+this.tokenId).substr(-3)+"-"+("000"+t).substr(-3)+".png?v="+e,i="https://nopsta.com/petarp/images/"+this.tokenId+"/"+n;s+='<div class="petarp-gallery-image">',s+='<img width="392" height="272" src="'+i+'">',s+='<img class="petarp-gallery-download-shadow" src="/images/file_download.svg"/>',s+='<img class="petarp-gallery-download" data-download="'+i+'" src="/images/file_download.svg"/>',s+="</div>"}n.innerHTML=s}showEditBytes(){this.editingBytes=!0,document.getElementById("petarp-byte-editor-holder").style.display="block",document.getElementById("petarp-section-settings").style.display="none",document.getElementById("petarp-ownership").style.display="none",this.byteEditor.setTokenId(this.tokenId)}closeEditBytes(){this.editingBytes=!1,document.getElementById("petarp-byte-editor-holder").style.display="none",document.getElementById("petarp-section-settings").style.display="block",document.getElementById("petarp-ownership").style.display="block",this.setTokenId(this.tokenId)}byteEditorChange(){this.byteEditor.getAddress()}byteEditorRun(){this.byteEditor.run()}byteEditorSaveBytes(){this.byteEditor.saveBytes()}mouseUp(e){this.trackMouseVolume=!1,this.trackMouseTone=!1,this.trackMouseReverb=!1}toggleVolume(){0!=this.volume?(this.saveVolume=this.volume,this.setVolume(0)):this.setVolume(this.saveVolume)}setVolume(e){0==e?(this.volumeOffElement.style.display="block",this.volumeUpElement.style.display="none",this.volumeDownElement.style.display="none"):e<50?(this.volumeOffElement.style.display="none",this.volumeUpElement.style.display="none",this.volumeDownElement.style.display="block"):(this.volumeOffElement.style.display="none",this.volumeUpElement.style.display="block",this.volumeDownElement.style.display="none");let t=e;document.getElementById("petarp-volume-bar-value").style.width=t+"px",t-=5,document.getElementById("petarp-volume-value").style.left=t+"px",this.volume=e,f.setVolume(e/100)}setTone(e){}setReverb(e){}showLoadingOverlay(){document.getElementById("petarp-loading-message").innerHTML="loading...",document.getElementById("petarp-loading-overlay").style.display="flex",this.loading=!0}hideLoadingOverlay(){this.loading=!1,document.getElementById("petarp-loading-overlay").style.display="none"}transfer(e,t){this.petArpToken.transfer(this.tokenId,e,t)}showControls(){document.getElementById("petarp-controls").style.opacity=1,this.controlsTimer=1e3}hideControls(){document.getElementById("petarp-controls").style.opacity=0}mouseMoveCanvas(e){this.showControls()}exitFullscreen(){this.isFullscreen=!1,document.exitFullscreen?document.exitFullscreen():void 0!==document.webkitCancelFullScreen&&document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),this.resize()}fullscreen(){this.isFullscreen=!0;var e=document.getElementById("petarp-canvas-holder");e.style.alignItems="center",void 0!==e.requestFullscreen&&e.requestFullscreen?e.requestFullscreen():void 0!==e.webkitRequestFullscreen&&e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),this.resize()}resize(){window.devicePixelRatio;let e=2,t=document.getElementById("petarp-controls"),n=document.getElementById("petarp-canvas-holder"),s=void 0!==n.requestFullscreen||void 0!==n.webkitRequestFullscreen;s||(document.getElementById("petarp-fullscreen-icon").style.display="none",document.getElementById("petarp-fullscreen-exit-icon").style.display="none");let i=f.getPixelBufferWidth(),o=f.getPixelBufferHeight();if(this.isFullscreen)e=(r=n.clientWidth/i)>(a=n.clientHeight/o)?a:r,e=Math.floor(e),s&&(document.getElementById("petarp-fullscreen-icon").style.display="none",document.getElementById("petarp-fullscreen-exit-icon").style.display="block"),this.onscreen_canvas.width=i*e,this.onscreen_canvas.height=o*e,this.onscreen_canvas.style.width=this.onscreen_canvas.width+"px",this.onscreen_canvas.style.height=this.onscreen_canvas.height+"px",this.onscreen_context=this.onscreen_canvas.getContext("2d"),this.onscreen_context.imageSmoothingEnabled=!1;else if(t.style.bottom="0",e=2,window.innerWidth<392){let e=window.innerWidth,t=o*e/i;this.onscreen_canvas.width=i,this.onscreen_canvas.height=o,this.onscreen_canvas.style.width=e+"px",this.onscreen_canvas.style.height=t+"px",this.onscreen_context=this.onscreen_canvas.getContext("2d"),this.onscreen_context.imageSmoothingEnabled=!1}else if(window.innerWidth<1300){var r,a;e=(r=(window.innerWidth-20)/i)>(a=window.innerHeight/o)?a:r,e=Math.floor(e),0==e&&(e=1),s&&(document.getElementById("petarp-fullscreen-icon").style.display="block",document.getElementById("petarp-fullscreen-exit-icon").style.display="none"),this.onscreen_canvas.width=i*e,this.onscreen_canvas.height=o*e,this.onscreen_canvas.style.width=this.onscreen_canvas.width+"px",this.onscreen_canvas.style.height=this.onscreen_canvas.height+"px",this.onscreen_context=this.onscreen_canvas.getContext("2d"),this.onscreen_context.imageSmoothingEnabled=!1}else e=2,s&&(document.getElementById("petarp-fullscreen-icon").style.display="block",document.getElementById("petarp-fullscreen-exit-icon").style.display="none"),t.style.left=0,t.style.right=0,this.onscreen_canvas.width=i*e,this.onscreen_canvas.height=o*e,this.onscreen_canvas.style.width=this.onscreen_canvas.width+"px",this.onscreen_canvas.style.height=this.onscreen_canvas.height+"px",this.onscreen_context=this.onscreen_canvas.getContext("2d"),this.onscreen_context.imageSmoothingEnabled=!1}init(e){this.petArpToken=e.petArpToken,this.index=e.index,this.filterRouting=7,this.filterValue=0,this.filterMode=0,this.colorOffset=0,this.detuneMode=0,this.rootNoteMode=0,this.journeyMode=0,this.m64_width=f.getPixelBufferWidth(),this.m64_height=f.getPixelBufferHeight(),this.onscreen_canvas=document.getElementById("petarp-canvas"),this.onscreen_canvas.width=2*this.m64_width,this.onscreen_canvas.height=2*this.m64_height,this.onscreen_context=this.onscreen_canvas.getContext("2d"),this.onscreen_context.imageSmoothingEnabled=!1,this.initEvents();var t=new FontFace("Roboto Mono","url(/fonts/RobotoMono-Regular.woff2)");document.fonts.add(t),t.loaded.then((()=>{var e=new K({font:t});this.registers=new ie({font:e,canvas:document.getElementById("registers")}),this.disassembly=new Q({font:e,canvas:document.getElementById("disassembly")}),this.byteEditor=new se({font:e,canvas:document.getElementById("petarp-byte-editor"),petArpDisplay:this,petArpToken:this.petArpToken,index:this.index}),this.memory=new oe({font:e,canvas:document.getElementById("memory"),index:this.index}),this.sidVisualiser=new re({font:e,canvas:document.getElementById("sid")}),this.interfaceReady=!0})),t.load()}async connectedStatusChanged(){await this.checkOwner(),this.byteEditor&&this.byteEditor.connectedStatusChanged()}async setByte(){var e=parseInt(document.getElementById("petarp-byte-index").value,10),t=parseInt(document.getElementById("petarp-byte-position").value,10),n=parseInt(document.getElementById("petarp-byte-value").value,10);isNaN(t)||isNaN(n)||this.petArpToken.setByte(this.tokenId,e,t,n).on("error",(e=>{})).then((()=>{this.setTokenId(this.tokenId)}))}unlockError(e,t){let n=document.getElementById("petarp-settings-unlock-error-"+t);n?(n.innerHTML='<span class="petarp-error-message">'+e+"</span>",setTimeout((()=>{n.innerHTML=""}),3e3)):console.log("no error element!")}async unlock(e){if(e=parseInt(e,10),!await this.petArpToken.isOwner(this.tokenId))return void this.unlockError("You need to be connected with an account which owns this PETARP to unlock settings",e);if(!await this.petArpToken.checkCanUnlock(this.tokenId,e))return void this.unlockError("Sorry, unlock criteria not yet met",e);let t=document.getElementById("petarp-unlock-button-"+e),n=document.getElementById("petarp-settings-unlock-error-"+e);n.innerHTML="Unlocking...",t.setAttribute("disabled","disabled"),this.petArpToken.unlock(this.tokenId,e).on("error",(n=>{this.unlockError(n.message,e),t.removeAttribute("disabled")})).then((()=>{n.innerHTML="",t.removeAttribute("disabled"),this.setTokenId(this.tokenId),this.petArpToken.requestCheckChanges(this.tokenId)}))}async saveSettings(){if(!await this.petArpToken.checkCanSetUserData(this.tokenId))return void alert("You need to be connected and own this token to be able to save settings");this.checkSettings(),this.useCustomBytes=1;let e=document.getElementById("petarp-save-settings"),t=document.getElementById("save-settings-status");t.innerHTML="Saving...",e.setAttribute("disabled","disabled"),this.petArpToken.setUserData(this.tokenId,this.filterRouting,this.filterValue,this.filterMode,this.colorOffset,this.detuneMode,this.rootNoteMode,this.journeyMode,this.useCustomBytes).on("error",(n=>{let s="Error:"+n.message;t.innerHTML=s,e.removeAttribute("disabled")})).then((()=>{this.setTokenId(this.tokenId),this.petArpToken.requestCheckChanges(this.tokenId),t.innerHTML="Saved.",e.removeAttribute("disabled"),setTimeout((()=>{t.innerHTML=""}),3e3)}))}async next(){let e=this.tokenId;e<await this.petArpToken.getTokenCount()-1?e++:e=0,this.index.gotoURL("/petarp/"+e)}async prev(){let e=this.tokenId;e>0?e--:e=await this.petArpToken.getTokenCount()-1,this.index.gotoURL("/petarp/"+e)}getData(){}downloadLink(e){const t=document.createElement("a");t.href=e,t.download=e.split("/").pop(),document.body.appendChild(t),t.click(),document.body.removeChild(t)}async downloadPRG(){const e=this.name+".prg";(0,b.L)(this.prg_data_original,e.toLowerCase(),"application/prg")}startWithAudio(){f.start_audio(),f.set_prg(this.prg_data,this.prg_data.length),this.resize(),setTimeout((()=>{this.resize()}),200)}setPRG(e){f.set_prg(e,e.length)}reset(){f.reset()}displayNotReady(){document.getElementById("petarp-loading-message").innerHTML="sorry, there was an error while loading<br/><br/>please try again in a couple of minutes"}async loadPRG(){try{if(this.prg_data=await this.petArpToken.getData(this.tokenId),0==this.prg_data)return void this.displayNotReady();this.prg_data_original=new Uint8Array(this.prg_data.length);for(let e=0;e<this.prg_data.length;e++)this.prg_data_original[e]=this.prg_data[e];this.startWithAudio(),this.hideLoadingOverlay()}catch(e){return void this.displayNotReady()}}async setTokenId(e){if(this.isOwner=!1,this.ownerBalance=0,console.log("set soken id = "+e),e=parseInt(e,10),document.getElementById("petarp-edit-bytes").style.display="none",e<0)return this.hideLoadingOverlay(),void this.index.showNotFound();let t=await this.petArpToken.getTokenCount();if(console.log("token count = "+t),e>=t)return this.hideLoadingOverlay(),void this.index.showNotFound();if(console.log("token id == "+e),this.tokenId=e,"none"!=document.getElementById("petarp-byte-editor-holder").style.display&&this.closeEditBytes(),!1===await this.petArpToken.setTokenId(e))return this.showLoadingOverlay(),void this.displayNotReady();this.params=await this.petArpToken.getParams(e),this.displayParams(),this.name="PETARP "+("000"+e).substr(-3),document.getElementById("page-title").innerHTML=this.name;let n="This page contains an emulator running the 2048 byte PRG for "+this.name;n+=".<br/> The PRG for each PETARP is generated on the Ethereum blockchain and can be downloaded from this page or by calling the 'getTokenPRG' function in the PETARP Contract.",n+='It can be run on Commodore 64 computers and emulators such as <a href="https://vice-emu.sourceforge.io/" target="_blank">VICE</a>',document.getElementById("petarp-page-info").innerHTML=n;let s=this.petArpToken.getOpenSeaLink(e);document.getElementById("petarp-opensea").innerHTML=s,this.tokenId=e;let i=await this.petArpToken.getCustomBytes(e);this.customBytes=i,this.customByteCount=0;for(let e=0;e<8;e++)0!=parseInt(this.customBytes.position[e],10)&&this.customByteCount++;console.log("custom byte counte = "+this.customByteCount),this.checkVideo(),this.checkOwner(),this.checkUnlocks();let o=await this.petArpToken.getUserData(e);this.setUserData(o),this.loadPRG(),this.sidVisualiser.resize();let r=await this.petArpToken.getMintDate(e);r&&(r='Minted <span class="text-highlight">'+r+"</span>"),document.getElementById("petarp-mint-date").innerHTML=r}checkVideo(){this.videoLink=this.petArpToken.getVideoLink();let e="",t=document.getElementById("videoLink"),n=document.getElementById("petarp-video-info"),s=document.getElementById("petarp-gallery-button");!1!==this.videoLink?(e='<a class="button" href="https://nopsta.com'+this.videoLink+'" target="_blank">Video</a>',t.style.display="flex",s.style.display="flex",n.innerHTML="The linked video is a 30 second .mp4 excerpt with a fade at the end"):(e="",t.style.display="none",s.style.display="none",n.innerHTML="A video is currently being generated...please check in a couple of minutes",setTimeout((()=>{this.checkVideo()}),15e3)),t.innerHTML=e}setUserData(e){let t=document.getElementById("custom-bytes");t&&(t.checked=1==e.customBytes)}async checkOwner(){let e="",t=document.getElementById("petarp-ownership-status");if(this.isOwner=await this.petArpToken.isOwner(this.tokenId),this.isOwner)t.innerHTML='<div class="petarp-is-owner">You Own This</div>',document.getElementById("petarp-save-settings").style.display="block",document.getElementById("save-settings-status").innerHTML="Settings will be saved to the blockchain. When the PRG is next loaded it will be loaded with the saved settings.";else{let n=await this.petArpToken.getTokenOwner(this.tokenId);t.innerHTML='Owned by <span class="text-highlight">'+n+"</span>",e="Connect with an account which owns this token to be able to unlock and save settings",document.getElementById("petarp-save-settings").style.display="none"}this.timeOwned=await this.petArpToken.getTimeSinceLastTransfer(this.tokenId);let n=document.getElementById("petarp-since-last-transfer"),s=Math.floor(this.timeOwned/86400);s>63?(document.getElementById("petarp-edit-bytes").style.display="inline-block",document.getElementById("petarp-setting-custombytes-label").classList.remove("petarp-unlock-criteria"),document.getElementById("petarp-setting-custombytes").classList.remove("petarp-unlock-criteria"),void 0===this.customByteCount?document.getElementById("petarp-setting-custombytes-label").innerHTML="":document.getElementById("petarp-setting-custombytes-label").innerHTML=this.customByteCount+" Custom Byte"+(1==this.customByteCount?"":"s")):(document.getElementById("petarp-setting-custombytes-label").classList.add("petarp-unlock-criteria"),document.getElementById("petarp-setting-custombytes").classList.add("petarp-unlock-criteria"),document.getElementById("petarp-setting-custombytes-label").innerHTML="Custom Bytes"),s='<span class="text-highlight">'+s,s+=" day",1!=s&&(s+="s"),s+="</span>",s+=" since last transfer",n.innerHTML=s;let i=this.petArpToken.getAccount();i&&(this.ownerBalance=await this.petArpToken.balanceOf(i)),document.getElementById("petarp-save-settings-message").innerHTML=e,this.settingsUpdated()}async checkUnlocks(){this.unlocks=await this.petArpToken.getUnlocks(this.tokenId),this.settingsUpdated()}displayParams(){var e="";for(let t=0;t<=7;t++)void 0!==this.params["p"+t]&&(e+='<div class="petarp-param">',e+="0x"+("00"+parseInt(this.params["p"+t],10).toString(16)).substr(-2),e+="</div>");if(document.getElementById("petarp-params").innerHTML=e,this.color="",this.speed="",void 0!==this.params.p4){let e=this.params.p4;this.color=15&e,this.speed=e>>3&15}if(this.repeat1="",this.repeat2="",this.repeat3="",void 0!==this.params.p5){let e=this.params.p5;this.repeat1=3&e,this.repeat2=e>>2&7,this.repeat3=e>>5&7}let t=["Triangle","Pulse","Sawtooth","Triangle","Triangle","Triangle","Pulse","Pulse"],n=["Pulse","Pulse","Pulse","Pulse + Triangle","Sawtooth","Sawtooth","Pulse + Triangle","Triangle"],s=["Pulse","Sawtooth","Pulse + Sawtooth","Triangle","Triangle + Ring","Pulse","Sawtooth","Pulse"];if(this.voiceType1="",this.voiceType2="",this.voiceType3="",void 0!==this.params.p6){let e=this.params.p6,s=7&e;this.voiceType1=t[s]+"("+s+")",s=e>>3&7,this.voiceType2=n[s]+"("+s+")"}if(void 0!==this.params.p7){let e=7&this.params.p7;this.voiceType3=s[e]+"("+e+")"}e="",e+=" Color: "+this.color,e+=" Speed: "+this.speed,e+=" Repeat 1: "+this.repeat1,e+=" Repeat 2: "+this.repeat2,e+=" Repeat 3: "+this.repeat3,e+=" Voice Type 1: "+this.voiceType1,e+=" Voice Type 2: "+this.voiceType2,e+=" Voice Type 3: "+this.voiceType3;let i=document.getElementById("petarp-attributes");i&&(i.innerHTML=e)}checkSettings(){let e=!1,t=7&f.cpuRead(87);this.filterRouting!==t&&(this.filterRouting=t,e=!0),t=255&f.cpuRead(48),this.filterValue!==t&&(this.filterValue=t,e=!0),t=255&f.cpuRead(49),this.filterMode!==t&&(this.filterMode=t,e=!0),t=255&f.cpuRead(51),this.detuneMode!==t&&(this.detuneMode=t,e=!0),t=255&f.cpuRead(52),this.rootNoteMode!==t&&(this.rootNoteMode=t,e=!0),t=255&f.cpuRead(53),this.journeyMode!==t&&(this.journeyMode=t,e=!0),this.journeyMode||(t=15&f.cpuRead(50),this.colorOffset!==t&&(this.colorOffset=t,e=!0)),e&&this.settingsUpdated()}settingsUpdated(){let e="",t=1;for(let n=0;n<3;n++)0!=(this.filterRouting&t)?e+='<div class="petarp-filter-on"></div>':e+='<div class="petarp-filter-off"></div>',t<<=1;document.getElementById("petarp-setting-filter-routing").innerHTML=e;let n="";switch(this.filterMode){case 0:n="Lowpass constant frequency";break;case 1:n="Lowpass with increasing frequency 2";break;case 2:n="Lowpass with increasing frequency 1";break;case 3:n="Lowpass with increasing frequency";break;case 4:n="Lowpass with decreasing frequency 2";break;case 5:n="Lowpass with decreasing frequency 1";break;case 6:n="Lowpass with decreasing frequency"}document.getElementById("petarp-setting-filter-mode").innerHTML=n;let s=this.filterValue;document.getElementById("petarp-setting-filter-value").innerHTML=s;let i=Math.floor(this.timeOwned/86400),o=0;0==this.unlocks[0]?(document.getElementById("petarp-setting-color-change-label").classList.add("petarp-unlock-criteria"),document.getElementById("petarp-setting-color-change-key").classList.add("petarp-unlock-criteria"),document.getElementById("petarp-setting-color-change-key").innerHTML="locked",i>31&&this.isOwner&&this.ownerBalance>1?(o='<button class="petarp-unlock-button" id="petarp-unlock-button-0" data-param="0">Unlock</button>',o+='<div class="petarp-settings-unlock-error" id="petarp-settings-unlock-error-0"></div>'):o='<div class="petarp-unlock-criteria">Unlockable if last transfer > 31 days + own > 1</div>'):(document.getElementById("petarp-setting-color-change-label").classList.remove("petarp-unlock-criteria"),document.getElementById("petarp-setting-color-change-key").classList.remove("petarp-unlock-criteria"),document.getElementById("petarp-setting-color-change-key").innerHTML="7",o=this.colorOffset),document.getElementById("petarp-setting-color-change").innerHTML=o;let r=0;if(0==this.unlocks[1])document.getElementById("petarp-setting-detune-mode-label").classList.add("petarp-unlock-criteria"),document.getElementById("petarp-setting-detune-mode-key").classList.add("petarp-unlock-criteria"),document.getElementById("petarp-setting-detune-mode-key").innerHTML="locked",i>63&&this.isOwner?(r='<button class="petarp-unlock-button" id="petarp-unlock-button-1" data-param="1">Unlock</button>',r+='<div class="petarp-settings-unlock-error" id="petarp-settings-unlock-error-1"></div>'):(r='<div class="petarp-unlock-criteria">Unlockable if last transfer > 63 days</div>',r+='<div class="petarp-settings-unlock-error" id="petarp-settings-unlock-error-1"></div>');else switch(document.getElementById("petarp-setting-detune-mode-label").classList.remove("petarp-unlock-criteria"),document.getElementById("petarp-setting-detune-mode-key").classList.remove("petarp-unlock-criteria"),document.getElementById("petarp-setting-detune-mode-key").innerHTML="8",this.detuneMode){case 0:r="Off";break;case 1:r="4";break;case 2:r="3";break;case 3:r="2";break;case 4:r="1"}document.getElementById("petarp-setting-detune-mode").innerHTML=r;let a=0;0==this.unlocks[2]?(document.getElementById("petarp-setting-root-note-label").classList.add("petarp-unlock-criteria"),document.getElementById("petarp-setting-root-note-key").classList.add("petarp-unlock-criteria"),document.getElementById("petarp-setting-root-note-key").innerHTML="locked",i>127&&this.isOwner?(a='<button class="petarp-unlock-button" id="petarp-unlock-button-2" data-param="2">Unlock</button>',a+='<div class="petarp-settings-unlock-error" id="petarp-settings-unlock-error-2"></div>'):(a='<div class="petarp-unlock-criteria">Unlockable if last transfer > 127 days</div>',a+='<div class="petarp-settings-unlock-error" id="petarp-settings-unlock-error-2"></div>')):(document.getElementById("petarp-setting-root-note-label").classList.remove("petarp-unlock-criteria"),document.getElementById("petarp-setting-root-note-key").classList.remove("petarp-unlock-criteria"),document.getElementById("petarp-setting-root-note-key").innerHTML="9",a=this.rootNoteMode),document.getElementById("petarp-setting-root-note").innerHTML=a;let d=0;0==this.unlocks[2]?(document.getElementById("petarp-setting-journey-label").classList.add("petarp-unlock-criteria"),document.getElementById("petarp-setting-journey-key").classList.add("petarp-unlock-criteria"),document.getElementById("petarp-setting-journey-key").innerHTML="locked",i>255&&this.isOwner&&this.ownerBalance>3?(d='<button class="petarp-unlock-button" id="petarp-unlock-button-3" data-param="3">Unlock</button>',d+='<div class="petarp-settings-unlock-error" id="petarp-settings-unlock-error-3"></div>'):(d='<div class="petarp-unlock-criteria">Unlockable if last transfer > 255 days + own > 3</div>',d+='<div class="petarp-settings-unlock-error" id="petarp-settings-unlock-error-3"></div>')):(document.getElementById("petarp-setting-journey-label").classList.remove("petarp-unlock-criteria"),document.getElementById("petarp-setting-journey-key").classList.remove("petarp-unlock-criteria"),document.getElementById("petarp-setting-journey-key").innerHTML="0",d=this.journeyMode),document.getElementById("petarp-setting-journey").innerHTML=d}update(e,t){this.interfaceReady&&(f.update(t)&&f.draw(this.onscreen_context,this.onscreen_canvas.width,this.onscreen_canvas.height),this.editingBytes&&this.byteEditor.draw(),this.disassembly.draw(),this.registers.draw(),this.memory.draw(),this.sidVisualiser.draw(t),this.checkSettings(),this.controlsTimer>0&&(this.controlsTimer-=t,this.controlsTimer<0&&(this.controlsTimer=0,this.hideControls())),f.get_audio_playing()||this.loading?this.startOverlay.style.display="none":this.startOverlay.style.display="flex")}}class de{index=null;petArpToken=null;numberMinted=0;maxTokens=64;checkRequested=[];interfaceReady=!1;mintCounter=0;currentMintIndex=0;mintData=[];mintPRG=new Uint8Array([1,8,12,8,0,0,158,50,48,54,52,0,0,0,0,0,0,169,14,141,32,208,169,6,141,33,208,162,0,169,32,157,0,4,202,208,248,76,36,8]);tokenPRGLoaded=!1;confirmationCount=0;constructor(){this.initEvents()}init(e){this.index=e.index,this.petArpToken=e.petArpToken,this.onscreen_canvas=document.getElementById("petarp-mint-canvas"),this.onscreen_canvas&&(this.onscreen_canvas.width=2*m64.getPixelBufferWidth(),this.onscreen_canvas.height=2*m64.getPixelBufferHeight(),this.onscreen_context=this.onscreen_canvas.getContext("2d"),this.onscreen_context.imageSmoothingEnabled=!1),this.interfaceReady=!0}initEvents(){document.getElementById("mint-button")&&document.getElementById("mint-button").addEventListener("click",(e=>{this.mint()})),document.getElementById("petarp-mint-connect")&&document.getElementById("petarp-mint-connect").addEventListener("click",(e=>{this.index.connect()})),document.getElementById("mint-status")&&document.getElementById("mint-status").addEventListener("click",(e=>{e.target.classList.contains("petarp-mint-link")&&(e.preventDefault(),this.index.gotoURL(e.target.href))})),document.getElementById("petarp-mint-switch")&&document.getElementById("petarp-mint-switch").addEventListener("click",(e=>{this.petArpToken.switchToMainnet()})),this.connectElement=document.getElementById("petarp-mint-connect"),this.mintElement=document.getElementById("petarp-mint-mint"),this.switchElement=document.getElementById("petarp-mint-switch")}setNumberMinted(e){this.numberMinted=e,e==this.maxTokens&&(document.getElementById("petarp-mint-mint").innerHTML="")}async show(){document.getElementById("mint-result")&&(document.getElementById("mint-result").innerHTML=""),document.getElementById("mint-status")&&(document.getElementById("mint-status").innerHTML=""),document.getElementById("petarp-mint-canvas")&&(document.getElementById("petarp-mint-canvas").style.display="none"),this.index.loadMintPrice(),this.index.loadNumberMinted(),this.showMintControls(),this.checkBrowser()?this.petArpToken.isConnected()?(await this.petArpToken.checkAccounts(),this.connected()):this.disconnected():(this.connectElement.style.display="none",this.mintElement.style.display="none")}checkBrowser(){let e=document.getElementById("petarp-browser-check-message");return void 0===window.ethereum?(e.innerHTML='<div>To Mint tokens you will need to install <a href="https://metamask.io/" target="_blank">MetaMask</a> and connect a wallet</div>',!1):(e.innerHTML="",!0)}connected(){}disconnected(){}wrongNetwork(){}hideMintControls(){document.getElementById("mint-button")&&(document.getElementById("mint-button").style.display="none")}showMintControls(){document.getElementById("mint-button")&&(document.getElementById("mint-button").style.display="inline-block")}async mint(){if(!this.checkBrowser())return;if(document.getElementById("mint-result").innerHTML="",await this.petArpToken.connect(),!this.petArpToken.isConnected())return void alert("please connect");let e=this.mintCounter;this.mintData[e]={lastStatus:"",transactionHash:"",blockHash:"",blockNumber:"",confirmations:0},this.currentMintIndex=e,this.mintCounter++,this.confirmationCount=0,this.hideMintControls(),this.mintReceipt=!1,document.getElementById("petarp-mint-canvas").style.display="block",this.tokenPRGLoaded=!1,this.petArpToken.mint().once("sending",(t=>{this.updateStatus(e,"Sending..",t)})).once("sent",(t=>{this.updateStatus(e,"Sent",t)})).once("transactionHash",(t=>{this.updateStatus(e,"Transaction Hash",t)})).once("receipt",(t=>{this.updateStatus(e,"Receipt",t)})).on("confirmation",((t,n,s)=>{this.updateStatus(e,"Confirmation",{confNumber:t,receipt:n,blockHash:s})})).on("error",(t=>{this.showMintControls(),this.displayMintError(e,t)})).then((t=>{console.log("receipt"),console.log(t),this.mintReceipt=t,this.displayMintResult(e,t),this.displayMintStatus(this.currentMintIndex)}))}displayMintError(e,t){let n='<span style="color: red; margin-bottom: 20px">Error</span>:'+t.message;document.getElementById("mint-result").innerHTML=n,this.mintData[this.currentMintIndex].lastStatus="Error",this.displayMintStatus(this.currentMintIndex)}updateStatus(e,t,n){this.mintData[e].lastStatus=t,"Transaction Hash"==t&&(this.mintData[e].transactionHash=n),"Receipt"==t&&(this.mintData[e].blockHash=n.blockHash,this.mintData[e].blockNumber=n.blockNumber),"Confirmation"==t&&(this.mintData[e].confirmations=n.confNumber,this.mintData[e].blockHash=n.blockHash),this.displayMintStatus(this.currentMintIndex)}clearStatus(){}displayMintStatus(e){let t="";t+='<div class="petarp-mint-status-row">',t+='  <div class="petarp-mint-status-heading">Status</div>',t+='  <div class="petarp-mint-status-value">'+this.mintData[e].lastStatus+"</div>",t+="</div>",t+='<div class="petarp-mint-status-row">',t+='  <div class="petarp-mint-status-heading">Transaction Hash</div>',t+='  <div class="petarp-mint-status-value"><a href="https://etherscan.io/tx/'+this.mintData[e].transactionHash+'" target="_blank">'+this.mintData[e].transactionHash+"</a></div>",t+="</div>";let n=this.mintData[e].blockNumber;void 0===n&&(n=""),t+='<div class="petarp-mint-status-row">',t+='  <div class="petarp-mint-status-heading">Confirmations</div>',t+='  <div class="petarp-mint-status-value">',t+=""==n?" (Pending), Confirmations: ":' Block Number: <a target="_blank" href="https://etherscan.io/block/'+n+'">'+n+"</a>,  Confirmations: ",t+=this.mintData[e].confirmations,t+="  </div>",t+="</div>",t+='<div class="petarp-mint-status-row">',t+='  <div class="petarp-mint-status-heading">Link</div>',t+='  <div class="petarp-mint-status-value">';let s=!1,i=!1;this.mintReceipt&&(s=this.mintReceipt.events.Transfer.returnValues.tokenId,this.mintReceipt.events.Transfer.returnValues.to);let o=8;this.confirmationCount<o?t+="Link available after "+o+" confirmations":t+='<a class="petarp-mint-link" href="/petarp/'+s+'">PETARP '+("000"+s).substr(-3)+"</a>",t+="  </div>",t+="</div>",this.confirmationCount=this.mintData[e].confirmations,document.getElementById("mint-status").innerHTML=t,this.tokenPRGLoaded,o=2,this.confirmationCount>o&&!this.tokenPRGLoaded&&(this.tokenPRGLoaded=!0,this.loadPRG(s),-1==this.checkRequested.indexOf(s)&&(this.checkRequested.push(s),this.petArpToken.requestCheckChanges(s)))}displayMintResult(e,t){}update(e,t){this.interfaceReady}}class le{petArpToken=null;index=null;account=!1;init(e){this.petArpToken=e.petArpToken,this.index=e.index,this.collectionAccountElement=document.getElementById("petarp-collection-account"),this.connectMessage=document.getElementById("petarp-collection-connect-message"),this.collectionContainer=document.getElementById("petarp-collection-container"),document.getElementById("petarp-collection-connect").addEventListener("click",(e=>{e.preventDefault(),this.index.connect()}))}show(){this.index.lazyLoad(),this.account=this.petArpToken.getAccount(),0==this.account?this.disconnected():this.connected()}showConnectMessage(){this.collectionContainer.style.display="none",this.connectMessage.style.display="block"}connected(){this.account=this.petArpToken.getAccount(),this.collectionAccountElement.innerHTML="Collection of "+this.account,this.balance()}disconnected(){this.collectionAccountElement.innerHTML="",this.showConnectMessage()}async balance(){this.connectMessage.style.display="none",this.collectionContainer.style.display="flex";let e=await this.petArpToken.balanceOf(this.account),t="";for(let n=0;n<e;n++){let s=await this.petArpToken.tokenOfOwnerByIndex(this.account,n);t+=this.index.getCatalogTokenHTML(s),this.collectionContainer.innerHTML="<h3>Loading "+e+"</h3>"+t}this.collectionContainer.innerHTML=t,this.index.updateLazyLoadList(),this.index.lazyLoad()}}let ce=new class{lastUpdate=!1;setup=!1;petArpDisplay=null;petArpCollection=null;petArpMint=null;petArpToken=null;connectedStatus="";lazyLoadElements=[];lazyFadeElements=[];url=!1;versions=[];processKeyEvents=!0;constructor(){this.initEvents(),this.setupHome()}doSetup(){f.setup(),this.headerElement=document.getElementById("header"),this.petArpToken=new q,this.petArpToken.init({index:this}),this.petArpDisplay=new ae,this.petArpDisplay.init({petArpToken:this.petArpToken,index:this}),this.petArpMint=new de,this.petArpMint.init({index:this,petArpToken:this.petArpToken}),this.petArpCollection=new le,this.petArpCollection.init({petArpToken:this.petArpToken,index:this}),this.tryConnect(),this.processURL()}initEvents(){window.addEventListener("popstate",(e=>{this.processURL()}));const e=document.getElementById("show-mint-button");e&&e.addEventListener("click",(e=>{e.preventDefault(),this.gotoURL("/petarp/mint")})),document.getElementById("connect").addEventListener("click",(e=>{e.preventDefault(),this.connect()}));const t=document.getElementById("petarp-collection-link");t&&t.addEventListener("click",(e=>{e.preventDefault(),this.gotoURL("/petarp/collection")})),document.getElementById("connect-status").addEventListener("click",(e=>{e.preventDefault(),e.target.classList.contains("collection-link")&&this.gotoURL(e.target.href)})),document.getElementById("read-more-button").addEventListener("click",(e=>{e.preventDefault(),this.gotoURL(e.target.href)})),document.getElementById("petarp-mint-account")&&document.getElementById("petarp-mint-account").addEventListener("click",(e=>{e.preventDefault(),e.target.classList.contains("collection-link")&&this.gotoURL(e.target.href)})),document.getElementById("menu-items").addEventListener("click",(e=>{e.preventDefault(),e.target.classList.contains("menu-link")&&this.gotoURL(e.target.href),e.target.classList.contains("external-link")&&window.open(e.target.href)})),document.getElementById("switch-to-mainnet").addEventListener("click",(e=>{e.preventDefault(),this.petArpToken.switchToMainnet()})),document.addEventListener("scroll",(e=>{this.scroll(e)})),window.addEventListener("resize",(e=>{this.scroll(e)})),document.addEventListener("DOMContentLoaded",(e=>{document.getElementById("page-content").style.display="block",this.tryConnect()})),document.addEventListener("keydown",(e=>{this.keyDown(e)})),document.addEventListener("keyup",(e=>{this.keyUp(e)}))}tryConnect(){this.petArpToken&&this.petArpToken.tryConnect()}connect(){this.petArpToken&&this.petArpToken.connect()}setProcessKeyEvents(e){console.log("set process key events = "+e),this.processKeyEvents=e}keyDown(e){this.processKeyEvents&&f.ready&&(f.keyDown(e.keyCode,e),f.setScreenDelay(0))}keyUp(e){this.processKeyEvents&&f.ready&&f.keyUp(e.keyCode,e)}setupHome(){document.getElementById("petarp-catalog").addEventListener("click",(e=>{e.preventDefault(),e.target.classList.contains("petarp-link")&&this.gotoURL(e.target.href)}),!1),document.getElementById("petarp-collection-container").addEventListener("click",(e=>{e.preventDefault(),e.target.classList.contains("petarp-link")&&this.gotoURL(e.target.href)}),!1)}gotoURL(e){const t=e;window.history.pushState({},"PETARP",t);let n=this.url.split("/");for(;n.length>0&&""===n[0].trim();)n.shift();let s=t.split("/");for(;s.length>0&&""===s[0].trim();)s.shift();return 3==s.length&&"gallery"==s[2]&&s[0]==n[0]&&s[1]==n[1]?(this.petArpDisplay.showGallery(),void(this.url=t)):3==n.length&&"gallery"==n[2]&&s[0]==n[0]&&s[1]==n[1]?(this.petArpDisplay.closeGallery(),void(this.url=t)):void this.processURL()}scroll(e){this.lazyLoad();let t=window.scrollY/100;t>1&&(t=1),this.headerElement&&(this.headerElement.style.boxShadow="0 0 2px 1px rgba(10, 10, 10, "+t+")")}updateLazyLoadList(){let e=document.getElementsByClassName("lazy-load");this.lazyLoadElements=[];for(let t=0;t<e.length;t++)this.lazyLoadElements.push(e[t]);this.lazyFadeElements=[];let t=document.getElementsByClassName("lazy-fade");for(let e=0;e<t.length;e++)this.lazyFadeElements.push(t[e])}lazyLoad(){let e=!1,t=window.innerHeight;for(let n=0;n<this.lazyLoadElements.length;n++){let s=this.lazyLoadElements[n];s&&s.getBoundingClientRect().top-20<t&&(e=!0,s.src=s.getAttribute("data-src"),s.classList.remove("lazy-load"))}for(let n=0;n<this.lazyFadeElements.length;n++){let s=this.lazyFadeElements[n];s&&s.getBoundingClientRect().top<t&&(e=!0,s.style.opacity=1,s.classList.remove("lazy-fade"))}e&&this.updateLazyLoadList()}showContent(e){const t=document.getElementsByClassName("content");this.headerElement.style.display="flex";for(let n=0;n<t.length;n++)t[n].id!==e?t[n].style.display="none":t[n].style.display="block"}loadNumberMinted(){this.petArpToken.getTokenCount().then((e=>{let t=document.getElementsByClassName("petarp-number-minted");for(let n=0;n<t.length;n++)t[n].innerHTML=e;this.petArpMint.setNumberMinted(e)}))}loadMintPrice(){this.petArpToken.getMintPrice().then((e=>{let t=document.getElementsByClassName("petarp-mint-price");for(let n=0;n<t.length;n++)t[n].innerHTML=e}))}showHome(){f.stop_audio(),this.loadNumberMinted(),this.loadMintPrice();let e=this.petArpToken.getContractLink(),t=document.getElementsByClassName("petarp-contract-link");for(let n=0;n<t.length;n++)t[n].innerHTML=e;this.showContent("index"),this.showCatalog(),window.scrollTo(0,0)}getCatalogTokenHTML(e){let t=0;e<this.versions.length&&(t=this.versions[e]);let n="",s=("00"+e).substr(-3);return n+='<a class="petarp-catalog-item petarp-link lazy-fade" id="petarp-link-'+e+'" href="/petarp/'+e+'">',n+='<div class="petarp-image-holder">',n+='<img class="petarp-image lazy-load" data-src="https://nopsta.com/petarp/images/'+e+".png?v="+t+'"/>',n+='<img class="petarp-anim lazy-load" data-src="https://nopsta.com/petarp/images/petarp-'+s+".gif?v="+t+'"/>',n+="</div>",n+='<div class="petarp-title">',n+="PETARP "+s,n+="</div>",n+="</a>",n}async showCatalog(){const e=await this.petArpToken.getTokenCount();this.versions=await this.petArpToken.getTokenVersions();let t="";if(!1!==e)for(let n=0;n<e;n++)t+=this.getCatalogTokenHTML(n);let n=document.getElementById("petarp-catalog");n&&(n.innerHTML=t),this.updateLazyLoadList(),this.lazyLoad()}showCollection(){this.showContent("petarp-collection"),this.petArpCollection.show(),window.scrollTo(0,0)}showAbout(){this.showContent("petarp-about"),this.petArpCollection.show(),window.scrollTo(0,0)}showNotFound(){this.showContent("petarp-notfound"),window.scrollTo(0,0),this.setTitle("PETARP - Not Found")}showPETARP(e,t){this.showContent("petarp"),this.petArpDisplay.reset(),this.petArpDisplay.showLoadingOverlay();try{this.petArpDisplay.setTokenId(e).then((()=>{void 0!==t&&t&&this.petArpDisplay.showGallery()}))}catch(e){this.petArpDisplay.displayNotReady()}window.scrollTo(0,0)}showPETARPMint(){this.petArpMint.show(),this.showContent("petarp-mint"),window.scrollTo(0,0)}setTitle(e,t){document.title=e,document.getElementById("page-title").innerHTML=e;let n=document.getElementById("petarp-params"),s=document.getElementById("petarp-nav-holder"),i=document.getElementById("header"),o=document.getElementById("header-content"),r=document.getElementsByClassName("content");if(document.getElementById("header-items").style.flexDirection="PETARP"==e?"column-reverse":"column",void 0!==t&&t){n.style.display="flex",s.style.display="flex",i.style.height="120px",o.style.paddingTop="8px",o.style.paddingBottom="8px";for(let e=0;e<r.length;e++)r[e].style.marginTop="90px"}else if("PETARP"==e){n.style.display="none",s.style.display="none",i.style.height="100px",o.style.paddingTop="0px",o.style.paddingBottom="8px";for(let e=0;e<r.length;e++)r[e].style.marginTop="50px"}else{n.style.display="none",s.style.display="none",i.style.height="90px",o.style.paddingTop="8px",o.style.paddingBottom="0px";for(let e=0;e<r.length;e++)r[e].style.marginTop="50px"}}processURL(){this.url=window.location.pathname;let e=window.location.pathname.split("/");for(;e.length>0&&""===e[0].trim();)e.shift();if(f.stop_audio(),e.length>0&&"petarp"==e[0]&&e.length>1){if("mint"==e[1])return this.showPETARPMint(),void this.setTitle("PETARP - Mint");if("collection"==e[1])return this.showCollection(),void this.setTitle("PETARP - Collection");if("about"==e[1])return this.showAbout(),void this.setTitle("PETARP - About");{let t=parseInt(e[1],10);if(!isNaN(t)){let n="PETARP "+("000"+t).substr(-3);return this.setTitle(n,!0),void("gallery"==e[2]?this.showPETARP(t,!0):this.showPETARP(t))}}}this.setTitle("PETARP"),this.showHome(),this.url="/"}setConnectedStatus(e,t){console.log("set connected status:"+e);let n=document.getElementById("connect");console.log("connect button = "),console.log(n);let s=document.getElementById("switch-to-mainnet"),i=this.petArpToken.getAccount();switch(i||(i="",e="disconnected"),e){case"connecting":break;case"connected":console.log("connected!!!"),n.innerHTML="Connected",i='<a class="collection-link" href="/petarp/collection">'+this.petArpToken.getAccount()+"</a>",this.loadNumberMinted(),this.loadMintPrice(),this.showCatalog(),this.petArpMint.connected(),this.petArpCollection.connected(),console.log("hide connect button"),n.style.display="none",s.style.display="none";break;case"disconnected":this.petArpMint.disconnected(),this.petArpCollection.disconnected(),n.innerHTML="Connect",n.style.display="block",s.style.display="none",i="";break;case"switch":this.petArpMint.wrongNetwork(),this.petArpCollection.disconnected(),n.style.display="none",s.style.display="flex",i=""}document.getElementById("connect-status").innerHTML=i,document.getElementById("petarp-mint-account")&&(document.getElementById("petarp-mint-account").innerHTML=i),this.petArpDisplay.connectedStatusChanged()}update(e){if(!1!==this.lastUpdate){var t=e-this.lastUpdate;t>200&&(t=16.666),f.ready&&(this.setup||(this.doSetup(),this.setup=!0),"/"==this.url||("/petarp/mint"==this.url?this.petArpMint.update(e,t):this.petArpDisplay.update(e,t)))}this.lastUpdate=e}};!function e(t){ce.update(t),requestAnimationFrame(e)}(!1)}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={id:s,loaded:!1,exports:{}};return e[s](o,o.exports,n),o.loaded=!0,o.exports}n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(506)})();